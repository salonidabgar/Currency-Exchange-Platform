import { a, b } from './chunk-IJNDVXAX.mjs';

!function(o){o&&(void 0===o.global&&(o.global=o),void 0===o.globalThis&&(o.globalThis=o),void 0===o.process&&(o.process={env:{NODE_ENV:"production"}}));}("undefined"!=typeof window?window:void 0);
var ve=(e=>(e.MissingApiKey="MISSING_API_KEY",e.ModalNotReady="MODAL_NOT_READY",e.MalformedResponse="MALFORMED_RESPONSE",e.InvalidArgument="INVALID_ARGUMENT",e.ExtensionNotInitialized="EXTENSION_NOT_INITIALIZED",e.IncompatibleExtensions="INCOMPATIBLE_EXTENSIONS",e))(ve||{}),Pe=(e=>(e.SyncWeb3Method="SYNC_WEB3_METHOD",e.DuplicateIframe="DUPLICATE_IFRAME",e.ReactNativeEndpointConfiguration="REACT_NATIVE_ENDPOINT_CONFIGURATION",e.DeprecationNotice="DEPRECATION_NOTICE",e))(Pe||{}),Ce=(e=>(e[e.ParseError=-32700]="ParseError",e[e.InvalidRequest=-32600]="InvalidRequest",e[e.MethodNotFound=-32601]="MethodNotFound",e[e.InvalidParams=-32602]="InvalidParams",e[e.InternalError=-32603]="InternalError",e[e.MagicLinkFailedVerification=-1e4]="MagicLinkFailedVerification",e[e.MagicLinkExpired=-10001]="MagicLinkExpired",e[e.MagicLinkRateLimited=-10002]="MagicLinkRateLimited",e[e.MagicLinkInvalidRedirectURL=-10006]="MagicLinkInvalidRedirectURL",e[e.UserAlreadyLoggedIn=-10003]="UserAlreadyLoggedIn",e[e.UpdateEmailFailed=-10004]="UpdateEmailFailed",e[e.UserRequestEditEmail=-10005]="UserRequestEditEmail",e[e.InactiveRecipient=-10010]="InactiveRecipient",e[e.AccessDeniedToUser=-10011]="AccessDeniedToUser",e))(Ce||{}),K=(e=>(e.LoginWithSms="magic_auth_login_with_sms",e.LoginWithEmailOTP="magic_auth_login_with_email_otp",e.LoginWithMagicLink="magic_auth_login_with_magic_link",e.LoginWithCredential="magic_auth_login_with_credential",e.GetIdToken="magic_auth_get_id_token",e.GenerateIdToken="magic_auth_generate_id_token",e.GetMetadata="magic_auth_get_metadata",e.IsLoggedIn="magic_auth_is_logged_in",e.Logout="magic_auth_logout",e.UpdateEmail="magic_auth_update_email",e.UserSettings="magic_auth_settings",e.UserSettingsTestMode="magic_auth_settings_testing_mode",e.LoginWithSmsTestMode="magic_auth_login_with_sms_testing_mode",e.LoginWithEmailOTPTestMode="magic_auth_login_with_email_otp_testing_mode",e.LoginWithMagicLinkTestMode="magic_login_with_magic_link_testing_mode",e.LoginWithCredentialTestMode="magic_auth_login_with_credential_testing_mode",e.GetIdTokenTestMode="magic_auth_get_id_token_testing_mode",e.GenerateIdTokenTestMode="magic_auth_generate_id_token_testing_mode",e.GetMetadataTestMode="magic_auth_get_metadata_testing_mode",e.IsLoggedInTestMode="magic_auth_is_logged_in_testing_mode",e.LogoutTestMode="magic_auth_logout_testing_mode",e.UpdateEmailTestMode="magic_auth_update_email_testing_mode",e))(K||{}),ge=(e=>(e.MAGIC_HANDLE_RESPONSE="MAGIC_HANDLE_RESPONSE",e.MAGIC_OVERLAY_READY="MAGIC_OVERLAY_READY",e.MAGIC_SHOW_OVERLAY="MAGIC_SHOW_OVERLAY",e.MAGIC_HIDE_OVERLAY="MAGIC_HIDE_OVERLAY",e.MAGIC_HANDLE_EVENT="MAGIC_HANDLE_EVENT",e))(ge||{}),Ne=(e=>(e.MAGIC_HANDLE_REQUEST="MAGIC_HANDLE_REQUEST",e))(Ne||{}),wn=(e=>(e.Harmony="HARMONY",e))(wn||{});var Rn=Object.create,Ge=Object.defineProperty,On=Object.defineProperties,Nn=Object.getOwnPropertyDescriptor,Sn=Object.getOwnPropertyDescriptors,An=Object.getOwnPropertyNames,zt=Object.getOwnPropertySymbols,Ln=Object.getPrototypeOf,ir=Object.prototype.hasOwnProperty,Mn=Object.prototype.propertyIsEnumerable,Ht=a((e,t,n)=>t in e?Ge(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,"Ne"),ar=a((e,t)=>{for(var n in t||(t={}))ir.call(t,n)&&Ht(e,n,t[n]);if(zt)for(var n of zt(t))Mn.call(t,n)&&Ht(e,n,t[n]);return e},"z"),Tn=a((e,t)=>On(e,Sn(t)),"we"),$n=a(e=>Ge(e,"__esModule",{value:!0}),"$t"),Pn=a((e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),"bt"),Cn=a((e,t)=>{for(var n in t)Ge(e,n,{get:t[n],enumerable:!0});},"Mt"),jn=a((e,t,n,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let l of An(t))!ir.call(e,l)&&(n||l!=="default")&&Ge(e,l,{get:()=>t[l],enumerable:!(s=Nn(t,l))||s.enumerable});return e},"Nt"),Dn=a((e,t)=>jn($n(Ge(e!=null?Rn(Ln(e)):{},"default",!t&&e&&e.__esModule?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e),"wt"),he=a((e,t,n)=>new Promise((s,l)=>{var c=a(y=>{try{v(n.next(y));}catch(g){l(g);}},"o"),b=a(y=>{try{v(n.throw(y));}catch(g){l(g);}},"a"),v=a(y=>y.done?s(y.value):Promise.resolve(y.value).then(c,b),"i");v((n=n.apply(e,t)).next());}),"I"),kn=Pn((e,t)=>{var n=Object.prototype.hasOwnProperty,s="~";function l(){}a(l,"B"),Object.create&&(l.prototype=Object.create(null),new l().__proto__||(s=!1));function c(g,m,S){this.fn=g,this.context=m,this.once=S||!1;}a(c,"bn");function b(g,m,S,D,F){if(typeof S!="function")throw new TypeError("The listener must be a function");var O=new c(S,D||g,F),M=s?s+m:m;return g._events[M]?g._events[M].fn?g._events[M]=[g._events[M],O]:g._events[M].push(O):(g._events[M]=O,g._eventsCount++),g}a(b,"tt");function v(g,m){--g._eventsCount===0?g._events=new l:delete g._events[m];}a(v,"oe");function y(){this._events=new l,this._eventsCount=0;}a(y,"y"),y.prototype.eventNames=function(){var g=[],m,S;if(this._eventsCount===0)return g;for(S in m=this._events)n.call(m,S)&&g.push(s?S.slice(1):S);return Object.getOwnPropertySymbols?g.concat(Object.getOwnPropertySymbols(m)):g},y.prototype.listeners=function(g){var m=s?s+g:g,S=this._events[m];if(!S)return [];if(S.fn)return [S.fn];for(var D=0,F=S.length,O=new Array(F);D<F;D++)O[D]=S[D].fn;return O},y.prototype.listenerCount=function(g){var m=s?s+g:g,S=this._events[m];return S?S.fn?1:S.length:0},y.prototype.emit=function(g,m,S,D,F,O){var M=s?s+g:g;if(!this._events[M])return !1;var L=this._events[M],G=arguments.length,Y,C;if(L.fn){switch(L.once&&this.removeListener(g,L.fn,void 0,!0),G){case 1:return L.fn.call(L.context),!0;case 2:return L.fn.call(L.context,m),!0;case 3:return L.fn.call(L.context,m,S),!0;case 4:return L.fn.call(L.context,m,S,D),!0;case 5:return L.fn.call(L.context,m,S,D,F),!0;case 6:return L.fn.call(L.context,m,S,D,F,O),!0}for(C=1,Y=new Array(G-1);C<G;C++)Y[C-1]=arguments[C];L.fn.apply(L.context,Y);}else {var le=L.length,W;for(C=0;C<le;C++)switch(L[C].once&&this.removeListener(g,L[C].fn,void 0,!0),G){case 1:L[C].fn.call(L[C].context);break;case 2:L[C].fn.call(L[C].context,m);break;case 3:L[C].fn.call(L[C].context,m,S);break;case 4:L[C].fn.call(L[C].context,m,S,D);break;default:if(!Y)for(W=1,Y=new Array(G-1);W<G;W++)Y[W-1]=arguments[W];L[C].fn.apply(L[C].context,Y);}}return !0},y.prototype.on=function(g,m,S){return b(this,g,m,S,!1)},y.prototype.once=function(g,m,S){return b(this,g,m,S,!0)},y.prototype.removeListener=function(g,m,S,D){var F=s?s+g:g;if(!this._events[F])return this;if(!m)return v(this,F),this;var O=this._events[F];if(O.fn)O.fn===m&&(!D||O.once)&&(!S||O.context===S)&&v(this,F);else {for(var M=0,L=[],G=O.length;M<G;M++)(O[M].fn!==m||D&&!O[M].once||S&&O[M].context!==S)&&L.push(O[M]);L.length?this._events[F]=L.length===1?L[0]:L:v(this,F);}return this},y.prototype.removeAllListeners=function(g){var m;return g?(m=s?s+g:g,this._events[m]&&v(this,m)):(this._events=new l,this._eventsCount=0),this},y.prototype.off=y.prototype.removeListener,y.prototype.addListener=y.prototype.on,y.prefixed=s,y.EventEmitter=y,typeof t<"u"&&(t.exports=y);});function xn(e){let t={exports:{}};return e(t,t.exports),t.exports}a(xn,"At");var Un=Number.MAX_SAFE_INTEGER||9007199254740991,yt={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:Un,MAX_SAFE_COMPONENT_LENGTH:16},Fn=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{},H=Fn,We=xn(function(e,t){let{MAX_SAFE_COMPONENT_LENGTH:n}=yt,s=(t=e.exports={}).re=[],l=t.src=[],c=t.t={},b=0,v=a((y,g,m)=>{let S=b++;H(S,g),c[y]=S,l[S]=g,s[S]=new RegExp(g,m?"g":void 0);},"i");v("NUMERICIDENTIFIER","0|[1-9]\\d*"),v("NUMERICIDENTIFIERLOOSE","[0-9]+"),v("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),v("MAINVERSION",`(${l[c.NUMERICIDENTIFIER]})\\.(${l[c.NUMERICIDENTIFIER]})\\.(${l[c.NUMERICIDENTIFIER]})`),v("MAINVERSIONLOOSE",`(${l[c.NUMERICIDENTIFIERLOOSE]})\\.(${l[c.NUMERICIDENTIFIERLOOSE]})\\.(${l[c.NUMERICIDENTIFIERLOOSE]})`),v("PRERELEASEIDENTIFIER",`(?:${l[c.NUMERICIDENTIFIER]}|${l[c.NONNUMERICIDENTIFIER]})`),v("PRERELEASEIDENTIFIERLOOSE",`(?:${l[c.NUMERICIDENTIFIERLOOSE]}|${l[c.NONNUMERICIDENTIFIER]})`),v("PRERELEASE",`(?:-(${l[c.PRERELEASEIDENTIFIER]}(?:\\.${l[c.PRERELEASEIDENTIFIER]})*))`),v("PRERELEASELOOSE",`(?:-?(${l[c.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[c.PRERELEASEIDENTIFIERLOOSE]})*))`),v("BUILDIDENTIFIER","[0-9A-Za-z-]+"),v("BUILD",`(?:\\+(${l[c.BUILDIDENTIFIER]}(?:\\.${l[c.BUILDIDENTIFIER]})*))`),v("FULLPLAIN",`v?${l[c.MAINVERSION]}${l[c.PRERELEASE]}?${l[c.BUILD]}?`),v("FULL",`^${l[c.FULLPLAIN]}$`),v("LOOSEPLAIN",`[v=\\s]*${l[c.MAINVERSIONLOOSE]}${l[c.PRERELEASELOOSE]}?${l[c.BUILD]}?`),v("LOOSE",`^${l[c.LOOSEPLAIN]}$`),v("GTLT","((?:<|>)?=?)"),v("XRANGEIDENTIFIERLOOSE",`${l[c.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),v("XRANGEIDENTIFIER",`${l[c.NUMERICIDENTIFIER]}|x|X|\\*`),v("XRANGEPLAIN",`[v=\\s]*(${l[c.XRANGEIDENTIFIER]})(?:\\.(${l[c.XRANGEIDENTIFIER]})(?:\\.(${l[c.XRANGEIDENTIFIER]})(?:${l[c.PRERELEASE]})?${l[c.BUILD]}?)?)?`),v("XRANGEPLAINLOOSE",`[v=\\s]*(${l[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[c.XRANGEIDENTIFIERLOOSE]})(?:${l[c.PRERELEASELOOSE]})?${l[c.BUILD]}?)?)?`),v("XRANGE",`^${l[c.GTLT]}\\s*${l[c.XRANGEPLAIN]}$`),v("XRANGELOOSE",`^${l[c.GTLT]}\\s*${l[c.XRANGEPLAINLOOSE]}$`),v("COERCE",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?(?:$|[^\\d])`),v("COERCERTL",l[c.COERCE],!0),v("LONETILDE","(?:~>?)"),v("TILDETRIM",`(\\s*)${l[c.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",v("TILDE",`^${l[c.LONETILDE]}${l[c.XRANGEPLAIN]}$`),v("TILDELOOSE",`^${l[c.LONETILDE]}${l[c.XRANGEPLAINLOOSE]}$`),v("LONECARET","(?:\\^)"),v("CARETTRIM",`(\\s*)${l[c.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",v("CARET",`^${l[c.LONECARET]}${l[c.XRANGEPLAIN]}$`),v("CARETLOOSE",`^${l[c.LONECARET]}${l[c.XRANGEPLAINLOOSE]}$`),v("COMPARATORLOOSE",`^${l[c.GTLT]}\\s*(${l[c.LOOSEPLAIN]})$|^$`),v("COMPARATOR",`^${l[c.GTLT]}\\s*(${l[c.FULLPLAIN]})$|^$`),v("COMPARATORTRIM",`(\\s*)${l[c.GTLT]}\\s*(${l[c.LOOSEPLAIN]}|${l[c.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",v("HYPHENRANGE",`^\\s*(${l[c.XRANGEPLAIN]})\\s+-\\s+(${l[c.XRANGEPLAIN]})\\s*$`),v("HYPHENRANGELOOSE",`^\\s*(${l[c.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[c.XRANGEPLAINLOOSE]})\\s*$`),v("STAR","(<|>)?=?\\s*\\*"),v("GTE0","^\\s*>=\\s*0.0.0\\s*$"),v("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$");}),Xt=/^[0-9]+$/,sr=a((e,t)=>{let n=Xt.test(e),s=Xt.test(t);return n&&s&&(e=+e,t=+t),e===t?0:n&&!s?-1:s&&!n?1:e<t?-1:1},"Le"),Bn=a((e,t)=>sr(t,e),"Ot"),Gn={compareIdentifiers:sr,rcompareIdentifiers:Bn},{MAX_LENGTH:Kt,MAX_SAFE_INTEGER:Xe}=yt,{re:Vt,t:Yt}=We,{compareIdentifiers:je}=Gn,te=a(class{constructor(e,t){if(t&&typeof t=="object"||(t={loose:!!t,includePrerelease:!1}),e instanceof te){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version;}else if(typeof e!="string")throw new TypeError(`Invalid Version: ${e}`);if(e.length>Kt)throw new TypeError(`version is longer than ${Kt} characters`);H("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;let n=e.trim().match(t.loose?Vt[Yt.LOOSE]:Vt[Yt.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>Xe||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Xe||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Xe||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(s=>{if(/^[0-9]+$/.test(s)){let l=+s;if(l>=0&&l<Xe)return l}return s}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format();}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(H("SemVer.compare",this.version,this.options,e),!(e instanceof te)){if(typeof e=="string"&&e===this.version)return 0;e=new te(e,this.options);}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof te||(e=new te(e,this.options)),je(this.major,e.major)||je(this.minor,e.minor)||je(this.patch,e.patch)}comparePre(e){if(e instanceof te||(e=new te(e,this.options)),this.prerelease.length&&!e.prerelease.length)return -1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{let n=this.prerelease[t],s=e.prerelease[t];if(H("prerelease compare",t,n,s),n===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(n===void 0)return -1;if(n!==s)return je(n,s)}while(++t)}compareBuild(e){e instanceof te||(e=new te(e,this.options));let t=0;do{let n=this.build[t],s=e.build[t];if(H("prerelease compare",t,n,s),n===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(n===void 0)return -1;if(n!==s)return je(n,s)}while(++t)}inc(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",t),this.inc("pre",t);break;case"major":this.minor===0&&this.patch===0&&this.prerelease.length!==0||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":this.patch===0&&this.prerelease.length!==0||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else {let n=this.prerelease.length;for(;--n>=0;)typeof this.prerelease[n]=="number"&&(this.prerelease[n]++,n=-2);n===-1&&this.prerelease.push(0);}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}},"E"),Wn=a((e,t,n)=>new te(e,n).compare(new te(t,n)),"_t"),Me=Wn,qn=a((e,t,n)=>Me(e,t,n)===0,"Dt"),zn=qn,Hn=a((e,t,n)=>Me(e,t,n)!==0,"Jt"),Xn=Hn,Kn=a((e,t,n)=>Me(e,t,n)>0,"Gt"),Vn=Kn,Yn=a((e,t,n)=>Me(e,t,n)>=0,"Kt"),Jn=Yn,Qn=a((e,t,n)=>Me(e,t,n)<0,"Ft"),Zn=Qn,eo=a((e,t,n)=>Me(e,t,n)<=0,"Xt"),to=eo,ro=a((e,t,n,s)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return zn(e,n,s);case"!=":return Xn(e,n,s);case">":return Vn(e,n,s);case">=":return Jn(e,n,s);case"<":return Zn(e,n,s);case"<=":return to(e,n,s);default:throw new TypeError(`Invalid operator: ${t}`)}},"Ht"),pt=ro,De=Symbol("SemVer ANY"),xe=a(class{static get ANY(){return De}constructor(e,t){if(t&&typeof t=="object"||(t={loose:!!t,includePrerelease:!1}),e instanceof xe){if(e.loose===!!t.loose)return e;e=e.value;}H("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===De?this.value="":this.value=this.operator+this.semver.version,H("comp",this);}parse(e){let t=this.options.loose?Jt[Qt.COMPARATORLOOSE]:Jt[Qt.COMPARATOR],n=e.match(t);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new te(n[2],this.options.loose):this.semver=De;}toString(){return this.value}test(e){if(H("Comparator.test",e,this.options.loose),this.semver===De||e===De)return !0;if(typeof e=="string")try{e=new te(e,this.options);}catch{return !1}return pt(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof xe))throw new TypeError("a Comparator is required");if(t&&typeof t=="object"||(t={loose:!!t,includePrerelease:!1}),this.operator==="")return this.value===""||new Ae(e.value,t).test(this.value);if(e.operator==="")return e.value===""||new Ae(this.value,t).test(e.semver);let n=!(this.operator!==">="&&this.operator!==">"||e.operator!==">="&&e.operator!==">"),s=!(this.operator!=="<="&&this.operator!=="<"||e.operator!=="<="&&e.operator!=="<"),l=this.semver.version===e.semver.version,c=!(this.operator!==">="&&this.operator!=="<="||e.operator!==">="&&e.operator!=="<="),b=pt(this.semver,"<",e.semver,t)&&(this.operator===">="||this.operator===">")&&(e.operator==="<="||e.operator==="<"),v=pt(this.semver,">",e.semver,t)&&(this.operator==="<="||this.operator==="<")&&(e.operator===">="||e.operator===">");return n||s||l&&c||b||v}},"O"),{re:Jt,t:Qt}=We,Ae=a(class{constructor(e,t){if(t&&typeof t=="object"||(t={loose:!!t,includePrerelease:!1}),e instanceof Ae)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new Ae(e.raw,t);if(e instanceof xe)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${e}`);this.format();}format(){return this.range=this.set.map(e=>e.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(e){let{loose:t}=this.options;e=e.trim();let n=t?ne[re.HYPHENRANGELOOSE]:ne[re.HYPHENRANGE];e=e.replace(n,vo(this.options.includePrerelease)),H("hyphen replace",e),e=e.replace(ne[re.COMPARATORTRIM],no),H("comparator trim",e,ne[re.COMPARATORTRIM]),e=(e=(e=e.replace(ne[re.TILDETRIM],oo)).replace(ne[re.CARETTRIM],io)).split(/\s+/).join(" ");let s=t?ne[re.COMPARATORLOOSE]:ne[re.COMPARATOR];return e.split(" ").map(l=>ao(l,this.options)).join(" ").split(/\s+/).map(l=>mo(l,this.options)).filter(this.options.loose?l=>!!l.match(s):()=>!0).map(l=>new xe(l,this.options))}intersects(e,t){if(!(e instanceof Ae))throw new TypeError("a Range is required");return this.set.some(n=>Zt(n,t)&&e.set.some(s=>Zt(s,t)&&n.every(l=>s.every(c=>l.intersects(c,t)))))}test(e){if(!e)return !1;if(typeof e=="string")try{e=new te(e,this.options);}catch{return !1}for(let t=0;t<this.set.length;t++)if(go(this.set[t],e,this.options))return !0;return !1}},"N"),{re:ne,t:re,comparatorTrimReplace:no,tildeTrimReplace:oo,caretTrimReplace:io}=We,Zt=a((e,t)=>{let n=!0,s=e.slice(),l=s.pop();for(;n&&s.length;)n=s.every(c=>l.intersects(c,t)),l=s.pop();return n},"ke"),ao=a((e,t)=>(H("comp",e,t),e=uo(e,t),H("caret",e),e=so(e,t),H("tildes",e),e=fo(e,t),H("xrange",e),e=po(e,t),H("stars",e),e),"Zt"),ae=a(e=>!e||e.toLowerCase()==="x"||e==="*","R"),so=a((e,t)=>e.trim().split(/\s+/).map(n=>co(n,t)).join(" "),"Qt"),co=a((e,t)=>{let n=t.loose?ne[re.TILDELOOSE]:ne[re.TILDE];return e.replace(n,(s,l,c,b,v)=>{let y;return H("tilde",e,s,l,c,b,v),ae(l)?y="":ae(c)?y=`>=${l}.0.0 <${+l+1}.0.0-0`:ae(b)?y=`>=${l}.${c}.0 <${l}.${+c+1}.0-0`:v?(H("replaceTilde pr",v),y=`>=${l}.${c}.${b}-${v} <${l}.${+c+1}.0-0`):y=`>=${l}.${c}.${b} <${l}.${+c+1}.0-0`,H("tilde return",y),y})},"en"),uo=a((e,t)=>e.trim().split(/\s+/).map(n=>lo(n,t)).join(" "),"tn"),lo=a((e,t)=>{H("caret",e,t);let n=t.loose?ne[re.CARETLOOSE]:ne[re.CARET],s=t.includePrerelease?"-0":"";return e.replace(n,(l,c,b,v,y)=>{let g;return H("caret",e,l,c,b,v,y),ae(c)?g="":ae(b)?g=`>=${c}.0.0${s} <${+c+1}.0.0-0`:ae(v)?g=c==="0"?`>=${c}.${b}.0${s} <${c}.${+b+1}.0-0`:`>=${c}.${b}.0${s} <${+c+1}.0.0-0`:y?(H("replaceCaret pr",y),g=c==="0"?b==="0"?`>=${c}.${b}.${v}-${y} <${c}.${b}.${+v+1}-0`:`>=${c}.${b}.${v}-${y} <${c}.${+b+1}.0-0`:`>=${c}.${b}.${v}-${y} <${+c+1}.0.0-0`):(H("no pr"),g=c==="0"?b==="0"?`>=${c}.${b}.${v}${s} <${c}.${b}.${+v+1}-0`:`>=${c}.${b}.${v}${s} <${c}.${+b+1}.0-0`:`>=${c}.${b}.${v} <${+c+1}.0.0-0`),H("caret return",g),g})},"nn"),fo=a((e,t)=>(H("replaceXRanges",e,t),e.split(/\s+/).map(n=>ho(n,t)).join(" ")),"rn"),ho=a((e,t)=>{e=e.trim();let n=t.loose?ne[re.XRANGELOOSE]:ne[re.XRANGE];return e.replace(n,(s,l,c,b,v,y)=>{H("xRange",e,s,l,c,b,v,y);let g=ae(c),m=g||ae(b),S=m||ae(v),D=S;return l==="="&&D&&(l=""),y=t.includePrerelease?"-0":"",g?s=l===">"||l==="<"?"<0.0.0-0":"*":l&&D?(m&&(b=0),v=0,l===">"?(l=">=",m?(c=+c+1,b=0,v=0):(b=+b+1,v=0)):l==="<="&&(l="<",m?c=+c+1:b=+b+1),l==="<"&&(y="-0"),s=`${l+c}.${b}.${v}${y}`):m?s=`>=${c}.0.0${y} <${+c+1}.0.0-0`:S&&(s=`>=${c}.${b}.0${y} <${c}.${+b+1}.0-0`),H("xRange return",s),s})},"sn"),po=a((e,t)=>(H("replaceStars",e,t),e.trim().replace(ne[re.STAR],"")),"on"),mo=a((e,t)=>(H("replaceGTE0",e,t),e.trim().replace(ne[t.includePrerelease?re.GTE0PRE:re.GTE0],"")),"an"),vo=a(e=>(t,n,s,l,c,b,v,y,g,m,S,D,F)=>`${n=ae(s)?"":ae(l)?`>=${s}.0.0${e?"-0":""}`:ae(c)?`>=${s}.${l}.0${e?"-0":""}`:b?`>=${n}`:`>=${n}${e?"-0":""}`} ${y=ae(g)?"":ae(m)?`<${+g+1}.0.0-0`:ae(S)?`<${g}.${+m+1}.0-0`:D?`<=${g}.${m}.${S}-${D}`:e?`<${g}.${m}.${+S+1}-0`:`<=${y}`}`.trim(),"cn"),go=a((e,t,n)=>{for(let s=0;s<e.length;s++)if(!e[s].test(t))return !1;if(t.prerelease.length&&!n.includePrerelease){for(let s=0;s<e.length;s++)if(H(e[s].semver),e[s].semver!==xe.ANY&&e[s].semver.prerelease.length>0){let l=e[s].semver;if(l.major===t.major&&l.minor===t.minor&&l.patch===t.patch)return !0}return !1}return !0},"ln"),yo=a((e,t,n)=>{try{t=new Ae(t,n);}catch{return !1}return t.test(e)},"Je"),{MAX_LENGTH:Eo}=yt,{re:er,t:tr}=We,_o=a((e,t)=>{if(t&&typeof t=="object"||(t={loose:!!t,includePrerelease:!1}),e instanceof te)return e;if(typeof e!="string"||e.length>Eo||!(t.loose?er[tr.LOOSE]:er[tr.FULL]).test(e))return null;try{return new te(e,t)}catch{return null}},"un"),Io=_o,{re:Ke,t:Ve}=We,bo=a((e,t)=>{if(e instanceof te)return e;if(typeof e=="number"&&(e=String(e)),typeof e!="string")return null;let n=null;if((t=t||{}).rtl){let s;for(;(s=Ke[Ve.COERCERTL].exec(e))&&(!n||n.index+n[0].length!==e.length);)n&&s.index+s[0].length===n.index+n[0].length||(n=s),Ke[Ve.COERCERTL].lastIndex=s.index+s[1].length+s[2].length;Ke[Ve.COERCERTL].lastIndex=-1;}else n=e.match(Ke[Ve.COERCE]);return n===null?null:Io(`${n[2]}.${n[3]||"0"}.${n[4]||"0"}`,t)},"Ue");function wo(e){return String.fromCharCode(parseInt(e.slice(1),16))}a(wo,"mn");function Ro(e){return `%${`00${e.charCodeAt(0).toString(16)}`.slice(-2)}`}a(Ro,"En");function Oo(e){return btoa(encodeURIComponent(e).replace(/%[0-9A-F]{2}/g,wo))}a(Oo,"hn");function No(e){return decodeURIComponent(Array.from(atob(e),Ro).join(""))}a(No,"fn");function cr(e){return Oo(JSON.stringify(e))}a(cr,"ee");function So(e){return JSON.parse(No(e))}a(So,"Ke");function ke(e){return typeof e>"u"}a(ke,"$");function Ao(e){return e===null}a(Ao,"Rn");function ur(e){return Ao(e)||ke(e)}a(ur,"te");function Lo(e){return ur(e)?!1:!ke(e.jsonrpc)&&!ke(e.id)&&(!ke(e.result)||!ke(e.error))}a(Lo,"je");function Mo(e){return ur(e)?!1:typeof e=="number"&&Object.values(Ce).includes(e)}a(Mo,"Fe");function mt(e){if(!e)return !0;for(let t in e)if(Object.hasOwnProperty.call(e,t))return !1;return !0}a(mt,"ne");var J={};function lr(e,t){return Object.assign(J,t),e}a(lr,"Tn");var To={"magic-sdk":"magic-sdk","@magic-sdk/react-native":"magic-sdk-rn"},ye=a(class extends Error{constructor(e,t){super(`Magic SDK Error: [${e}] ${t}`),this.code=e,this.rawMessage=t,this.__proto__=Error,Object.setPrototypeOf(this,ye.prototype);}},"b"),Ue=a(class extends Error{constructor(e){super(),this.__proto__=Error;let t=Number(e==null?void 0:e.code);this.rawMessage=(e==null?void 0:e.message)||"Internal error",this.code=Mo(t)?t:Ce.InternalError,this.message=`Magic RPC Error: [${this.code}] ${this.rawMessage}`,Object.setPrototypeOf(this,Ue.prototype);}},"w"),rt=a(class{constructor(e,t){this.code=e,this.rawMessage=t,this.message=`Magic SDK Warning: [${e}] ${t}`;}log(){console.warn(this.message);}},"W"),Et=a(class extends Error{constructor(e,t,n,s){super(`Magic Extension Error (${e.name}): [${t}] ${n}`),this.code=t,this.rawMessage=n,this.data=s,this.__proto__=Error,Object.setPrototypeOf(this,Et.prototype);}},"X"),vt=a(class{constructor(e,t,n){this.code=t,this.rawMessage=n,this.message=`Magic Extension Warning (${e.name}): [${t}] ${n}`;}log(){console.warn(this.message);}},"se");function $o(){return new ye(ve.MissingApiKey,"Please provide an API key that you acquired from the Magic developer dashboard.")}a($o,"Xe");function fr(){return new ye(ve.ModalNotReady,"Modal is not ready.")}a(fr,"cr");function Po(){return new ye(ve.MalformedResponse,"Response from the Magic iframe is malformed.")}a(Po,"Be");function Co(e){return new ye(ve.ExtensionNotInitialized,`Extensions must be initialized with a Magic SDK instance before \`Extension.${e}\` can be accessed. Do not invoke \`Extension.${e}\` inside an extension constructor.`)}a(Co,"He");function jo(e){let t=`Some extensions are incompatible with \`${J.sdkName}@${J.version}\`:`;return e.filter(n=>typeof n.compat<"u"&&n.compat!==null).forEach(n=>{let s=n.compat[J.sdkName];typeof s=="string"?t+=`
  - Extension \`${n.name}\` supports version(s) \`${s}\``:s||(t+=`
  - Extension \`${n.name}\` does not support ${J.platform} environments.`);}),new ye(ve.IncompatibleExtensions,t)}a(jo,"Ve");function Do(e){let t=a(n=>{let s=n+1,l=s%10,c=s%100;return l===1&&c!==11?`${s}st`:l===2&&c!==12?`${s}nd`:l===3&&c!==13?`${s}rd`:`${s}th`},"e");return new ye(ve.InvalidArgument,`Invalid ${t(e.argument)} argument given to \`${e.procedure}\`.
  Expected: \`${e.expected}\`
  Received: \`${e.received}\``)}a(Do,"ze");function dr(){return new rt(Pe.DuplicateIframe,"Duplicate iframes found.")}a(dr,"lr");function ko(){return new rt(Pe.SyncWeb3Method,"Non-async web3 methods are deprecated in web3 > 1.0 and are not supported by the Magic web3 provider. Please use an async method instead.")}a(ko,"Ye");function xo(){return new rt(Pe.ReactNativeEndpointConfiguration,`CUSTOM DOMAINS ARE NOT SUPPORTED WHEN USING MAGIC SDK WITH REACT NATIVE! The \`endpoint\` parameter SHOULD NOT be provided. The Magic \`<iframe>\` is automatically wrapped by a WebView pointed at \`${J.defaultEndpoint}\`. Changing this default behavior will lead to unexpected results and potentially security-threatening bugs.`)}a(xo,"Ze");function*Uo(){let e=0;for(;;)e<Number.MAX_SAFE_INTEGER?yield ++e:e=0;}a(Uo,"xn");var Fo=Uo();function hr(){return Fo.next().value}a(hr,"he");var pr=Symbol("Payload pre-processed by Magic SDK");function mr(e){return Object.defineProperty(e,pr,{value:!0,enumerable:!1}),e}a(mr,"et");function Bo(e){return !!e[pr]}a(Bo,"Pn");function Ze(e){var t,n,s;return Bo(e)||(e.jsonrpc=(t=e.jsonrpc)!=null?t:"2.0",e.id=hr(),e.method=(n=e.method)!=null?n:"noop",e.params=(s=e.params)!=null?s:[],mr(e)),e}a(Ze,"C");function ue(e,t=[]){return mr({params:t,method:e,jsonrpc:"2.0",id:hr()})}a(ue,"h");var _t=a(class{constructor(e){e instanceof _t?(this._jsonrpc=e.payload.jsonrpc,this._id=e.payload.id,this._result=e.payload.result,this._error=e.payload.error):Lo(e)?(this._jsonrpc=e.jsonrpc,this._id=e.id,this._result=e.result,this._error=e.error):(this._jsonrpc=e.jsonrpc,this._id=e.id,this._result=void 0,this._error=void 0);}applyError(e){return this._error=e,this}applyResult(e){return this._result=e,this}get hasError(){return typeof this._error<"u"&&this._error!==null}get hasResult(){return typeof this._result<"u"}get payload(){return {jsonrpc:this._jsonrpc,id:this._id,result:this._result,error:this._error}}},"_"),Go=Dn(kn()),Wo=a(class extends Go.default{},"st");function vr(){let e=new Wo;return {emitter:e,createChainingEmitterMethod:(t,n)=>(...s)=>(e[t].apply(e,s),n),createBoundEmitterMethod:t=>(...n)=>e[t].apply(e,n)}}a(vr,"ie");var gr=Symbol("isPromiEvent");function yr(e){return !!e[gr]}a(yr,"it");function Er(e){let t=_r(e),{createBoundEmitterMethod:n,createChainingEmitterMethod:s}=vr(),l=Symbol("Promise.then"),c=Symbol("Promise.catch"),b=Symbol("Promise.finally"),v=a((m,S)=>(...D)=>{let F=S[m].apply(S,D);return y(F)},"i"),y=a(m=>Object.assign(m,{[gr]:!0,[l]:m[l]||m.then,[c]:m[c]||m.catch,[b]:m[b]||m.finally,then:v(l,m),catch:v(c,m),finally:v(b,m),on:s("on",m),once:s("once",m),addListener:s("addListener",m),off:s("off",m),removeListener:s("removeListener",m),removeAllListeners:s("removeAllListeners",m),emit:n("emit"),eventNames:n("eventNames"),listeners:n("listeners"),listenerCount:n("listenerCount")}),"c"),g=y(t.then(m=>(g.emit("done",m),g.emit("settled"),m),m=>{throw g.emit("error",m),g.emit("settled"),m}));return g}a(Er,"ae");function _r(e){return new Promise((t,n)=>{let s=e(t,n);Promise.resolve(s).catch(n);})}a(_r,"ge");var qe=a(class{constructor(e){this.sdk=e;}get overlay(){return this.sdk.overlay}request(e){let t=this.overlay.post(Ne.MAGIC_HANDLE_REQUEST,Ze(e)),n=Er((l,c)=>{t.then(b=>{if(s(),b.hasError)c(new Ue(b.payload.error));else if(b.hasResult)l(b.payload.result);else throw Po()}).catch(b=>{s(),c(b);});}),s=this.overlay.on(ge.MAGIC_HANDLE_EVENT,l=>{var c;let{response:b}=l.data;if(b.id===e.id&&((c=b.result)==null?void 0:c.event)){let{event:v,params:y=[]}=b.result;n.emit(v,...y);}});return n}},"P"),qo=a(class extends qe{loginWithMagicLink(e){let{email:t,showUI:n=!0,redirectURI:s}=e,l=ue(this.sdk.testMode?K.LoginWithMagicLinkTestMode:K.LoginWithMagicLink,[{email:t,showUI:n,redirectURI:s}]);return this.request(l)}loginWithSMS(e){let{phoneNumber:t}=e,n=ue(this.sdk.testMode?K.LoginWithSmsTestMode:K.LoginWithSms,[{phoneNumber:t,showUI:!0}]);return this.request(n)}loginWithEmailOTP(e){let{email:t}=e,n=ue(this.sdk.testMode?K.LoginWithEmailOTPTestMode:K.LoginWithEmailOTP,[{email:t,showUI:!0}]);return this.request(n)}loginWithCredential(e){let t=e??"";if(!e&&J.platform==="web"){t=window.location.search;let s=window.location.origin+window.location.pathname;window.history.replaceState(null,"",s);}let n=ue(this.sdk.testMode?K.LoginWithCredentialTestMode:K.LoginWithCredential,[t]);return this.request(n)}},"ye"),Ir={};Cn(Ir,{clear:()=>zo,getItem:()=>Fe,iterate:()=>Vo,key:()=>Xo,keys:()=>Ko,length:()=>Ho,removeItem:()=>gt,setItem:()=>et});var Ye;function Ee(e){return (...t)=>he(this,null,function*(){return Ye||(Ye=yield J.configureStorage()),yield Ye.ready(),Ye[e](...t)})}a(Ee,"L");var Fe=Ee("getItem"),et=Ee("setItem"),gt=Ee("removeItem"),zo=Ee("clear"),Ho=Ee("length"),Xo=Ee("key"),Ko=Ee("keys"),Vo=Ee("iterate");function Yo(){let e=window.crypto.getRandomValues(new Uint8Array(16));e[6]=e[6]&15|64,e[8]=e[8]&191|128;let t="";return t+=e[0].toString(16),t+=e[1].toString(16),t+=e[2].toString(16),t+=e[3].toString(16),t+="-",t+=e[4].toString(16),t+=e[5].toString(16),t+="-",t+=e[6].toString(16),t+=e[7].toString(16),t+="-",t+=e[8].toString(16),t+=e[9].toString(16),t+="-",t+=e[10].toString(16),t+=e[11].toString(16),t+=e[12].toString(16),t+=e[13].toString(16),t+=e[14].toString(16),t+=e[15].toString(16),t}a(Yo,"at");var It="STORE_KEY_PRIVATE_KEY",tt="STORE_KEY_PUBLIC_JWK",bt="ECDSA",br="P-256",Jo={name:bt,namedCurve:br},Qo={name:bt,namedCurve:br};function Zo(){gt(tt),gt(It);}a(Zo,"lt");function ei(){return he(this,null,function*(){let e=yield ti();if(!e){console.info("unable to create public key or webcrypto is unsupported");return}let{subtle:t}=window.crypto,n=yield Fe(It);if(!n||!t){console.info("unable to find private key or webcrypto unsupported");return}let s={iat:Math.floor(new Date().getTime()/1e3),jti:Yo()},l={typ:"dpop+jwt",alg:"ES256",jwk:e},c={protected:rr(JSON.stringify(l)),claims:rr(JSON.stringify(s))},b=oi(`${c.protected}.${c.claims}`),v={name:bt,hash:{name:"SHA-256"}},y=ai(new Uint8Array(yield t.sign(v,n,b)));return `${c.protected}.${c.claims}.${y}`})}a(ei,"pt");function ti(){return he(this,null,function*(){if(!ni()){console.info("webcrypto is not supported");return}return (yield Fe(tt))||(yield ri()),Fe(tt)})}a(ti,"Dn");function ri(){return he(this,null,function*(){let e=null,{subtle:t}=window.crypto,n=yield t.generateKey(Jo,!0,["sign"]),s=yield t.exportKey("jwk",n.privateKey);e=yield t.exportKey("jwk",n.publicKey);let l=yield t.importKey("jwk",s,Qo,!1,["sign"]);yield et(It,l),yield et(tt,e);})}a(ri,"kn");function ni(){let e=typeof window<"u"&&!!window.crypto,t=e&&!!window.crypto.subtle;return e&&t}a(ni,"Jn");function rr(e){return wr(ii(e))}a(rr,"ut");function oi(e){return new TextEncoder().encode(e)}a(oi,"qn");function wr(e){return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+/g,"")}a(wr,"dt");function ii(e){return encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(t,n)=>String.fromCharCode(parseInt(n,16)))}a(ii,"Gn");function ai(e){let t="";return e.forEach(n=>{t+=String.fromCharCode(n);}),wr(t)}a(ai,"Un");var si=a(class extends qe{getIdToken(e){let t=ue(this.sdk.testMode?K.GetIdTokenTestMode:K.GetIdToken,[e]);return this.request(t)}generateIdToken(e){let t=ue(this.sdk.testMode?K.GenerateIdTokenTestMode:K.GenerateIdToken,[e]);return this.request(t)}getMetadata(){let e=ue(this.sdk.testMode?K.GetMetadataTestMode:K.GetMetadata);return this.request(e)}updateEmail(e){let{email:t,showUI:n=!0}=e,s=ue(this.sdk.testMode?K.UpdateEmailTestMode:K.UpdateEmail,[{email:t,showUI:n}]);return this.request(s)}isLoggedIn(){let e=ue(this.sdk.testMode?K.IsLoggedInTestMode:K.IsLoggedIn);return this.request(e)}logout(){Zo();let e=ue(this.sdk.testMode?K.LogoutTestMode:K.Logout);return this.request(e)}showSettings(){let e=ue(this.sdk.testMode?K.UserSettingsTestMode:K.UserSettings);return this.request(e)}},"ve"),{createBoundEmitterMethod:Je,createChainingEmitterMethod:Se}=vr(),ci=a(class extends qe{constructor(){super(...arguments),this.isMagic=!0,this.on=Se("on",this),this.once=Se("once",this),this.addListener=Se("addListener",this),this.off=Se("off",this),this.removeListener=Se("removeListener",this),this.removeAllListeners=Se("removeAllListeners",this),this.emit=Je("emit"),this.eventNames=Je("eventNames"),this.listeners=Je("listeners"),this.listenerCount=Je("listenerCount");}sendAsync(e,t){if(!t)throw Do({procedure:"Magic.rpcProvider.sendAsync",argument:1,expected:"function",received:t===null?"null":typeof t});if(Array.isArray(e))this.overlay.post(Ne.MAGIC_HANDLE_REQUEST,e.map(n=>{let s=Ze(n);return this.prefixPayloadMethodForTestMode(s),s})).then(n=>{t(null,n.map(s=>Tn(ar({},s.payload),{error:s.hasError?new Ue(s.payload.error):null})));});else {let n=Ze(e);this.prefixPayloadMethodForTestMode(n),this.overlay.post(Ne.MAGIC_HANDLE_REQUEST,n).then(s=>{t(s.hasError?new Ue(s.payload.error):null,s.payload);});}}send(e,t){if(typeof e=="string"){let s=ue(e,Array.isArray(t)?t:[]);return this.request(s)}if(Array.isArray(e)||!!t){this.sendAsync(e,t);return}let n=ko();return n.log(),new _t(e).applyError({code:-32603,message:n.rawMessage}).payload}enable(){let e=ue("eth_accounts");return this.request(e)}request(e){return this.prefixPayloadMethodForTestMode(e),super.request(e)}prefixPayloadMethodForTestMode(e){let t="testMode/eth/";this.sdk.testMode&&(e.method=`${t}${e.method}`);}},"xe");function Be(e,t){return t?new URL(e,t):new URL(e)}a(Be,"Ie");var nr=["request","overlay","sdk"];function ui(e){let t=Object.getPrototypeOf(e),n=[t];for(;t!==qe.prototype;)t=Object.getPrototypeOf(t),n.push(t);return n}a(ui,"Kn");var Rr=a(class extends qe{constructor(){super(void 0),this.__sdk_access_field_descriptors__=new Map,this.__is_initialized__=!1,this.utils={createPromiEvent:Er,isPromiEvent:yr,encodeJSON:cr,decodeJSON:So,createJsonRpcRequestPayload:ue,standardizeJsonRpcRequestPayload:Ze,storage:Ir};let e=[this,...ui(this)];nr.forEach(t=>{let n=e.map(b=>Object.getOwnPropertyDescriptor(b,t)),s=n.findIndex(b=>!!b),l=s>0,c=n[s];c&&(this.__sdk_access_field_descriptors__.set(t,{descriptor:c,isPrototypeField:l}),Object.defineProperty(this,t,{configurable:!0,get:()=>{throw Co(t)}}));});}init(e){this.__is_initialized__||(nr.forEach(t=>{if(this.__sdk_access_field_descriptors__.has(t)){let{descriptor:n,isPrototypeField:s}=this.__sdk_access_field_descriptors__.get(t);s?delete this[t]:Object.defineProperty(this,t,n);}}),this.sdk=e,this.__is_initialized__=!0);}createDeprecationWarning(e){let{method:t,removalVersion:n,useInstead:s}=e,l=s?` Use \`${s}\` instead.`:"",c=`\`${t}\` will be removed from this Extension in version \`${n}\`.${l}`;return new vt(this,"DEPRECATION_NOTICE",c)}createWarning(e,t){return new vt(this,e,t)}createError(e,t,n){return new Et(this,e,t,n)}},"Pe"),li=a(class extends Rr{},"ht"),Le=a(class extends Rr{},"S");Le.Internal=li,Le.Anonymous="anonymous extension";function or(e){return e.compat&&e.compat[J.sdkName]!=null?typeof e.compat[J.sdkName]=="string"?yo(bo(J.version),e.compat[J.sdkName]):!!e.compat[J.sdkName]:!0}a(or,"ft");function fi(e){var t;let n=(t=e==null?void 0:e.extensions)!=null?t:[],s={},l=[];if(Array.isArray(n)?n.forEach(c=>{or(c)?(c.init(this),(c.name||c.name!==Le.Anonymous)&&(this[c.name]=c),c instanceof Le.Internal&&(mt(c.config)||(s[c.name]=c.config))):l.push(c);}):Object.keys(n).forEach(c=>{if(or(n[c])){n[c].init(this);let b=n[c];this[c]=b,b instanceof Le.Internal&&(mt(b.config)||(s[n[c].name]=b.config));}else l.push(n[c]);}),l.length)throw jo(l);return s}a(fi,"jn");var Qe=a(class{constructor(e,t){this.apiKey=e;var n;if(!e)throw $o();J.platform==="react-native"&&(t==null?void 0:t.endpoint)&&xo().log();let{defaultEndpoint:s,version:l}=J;this.testMode=!!(t!=null&&t.testMode),this.endpoint=Be((n=t==null?void 0:t.endpoint)!=null?n:s).origin,this.auth=new qo(this),this.user=new si(this),this.rpcProvider=new ci(this);let c=fi.call(this,t);this.parameters=cr(ar({API_KEY:this.apiKey,DOMAIN_ORIGIN:window.location?window.location.origin:"",ETH_NETWORK:t==null?void 0:t.network,host:Be(this.endpoint).host,sdk:To[J.sdkName],version:l,ext:mt(c)?void 0:c,locale:(t==null?void 0:t.locale)||"en_US"},J.bundleId?{bundleId:J.bundleId}:{}));}get overlay(){if(!Qe.__overlays__.has(this.parameters)){let e=new J.ViewController(this.endpoint,this.parameters);e.init(),Qe.__overlays__.set(this.parameters,e);}return Qe.__overlays__.get(this.parameters)}preload(){return he(this,null,function*(){yield this.overlay.ready;})}},"V"),wt=Qe;wt.__overlays__=new Map;function di(e,t){return t&&Array.isArray(e)?e.find(n=>n.id===t):e}a(di,"Fn");function hi(e,t){var n;let s=(n=t.data.response)==null?void 0:n.id,l=di(e,s);if(s&&l){let c=new _t(l).applyResult(t.data.response.result).applyError(t.data.response.error);return {id:s,response:c}}return {}}a(hi,"Wn");function pi(e,t){return he(this,null,function*(){let n=yield Fe("rt"),s;if(J.platform==="web")try{s=yield ei();}catch(l){console.error("webcrypto error",l);}return s?n?{msgType:e,payload:t,jwt:s,rt:n}:{msgType:e,payload:t,jwt:s}:{msgType:e,payload:t}})}a(pi,"Xn");function mi(e){return he(this,null,function*(){!e.data.rt||(yield et("rt",e.data.rt));})}a(mi,"Bn");var Or=a(class{constructor(e,t){this.endpoint=e,this.parameters=t,this.messageHandlers=new Set,this.ready=this.waitForReady(),this.listen();}post(e,t){return he(this,null,function*(){return _r(n=>he(this,null,function*(){yield this.ready;let s=[],l=Array.isArray(t)?t.map(y=>y.id):[],c=yield pi(`${e}-${this.parameters}`,t);yield this._post(c);let b=a(y=>g=>{let{id:m,response:S}=hi(t,g);mi(g),m&&S&&Array.isArray(t)&&l.includes(m)?(s.push(S),s.length===t.length&&(y(),n(s))):m&&S&&!Array.isArray(t)&&m===t.id&&(y(),n(S));},"i"),v=this.on(ge.MAGIC_HANDLE_RESPONSE,b(()=>v()));}))})}on(e,t){let n=t.bind(window),s=a(l=>{l.data.msgType===`${e}-${this.parameters}`&&n(l);},"s");return this.messageHandlers.add(s),()=>this.messageHandlers.delete(s)}waitForReady(){return new Promise(e=>{this.on(ge.MAGIC_OVERLAY_READY,()=>e());})}listen(){this.on(ge.MAGIC_HIDE_OVERLAY,()=>{this.hideOverlay();}),this.on(ge.MAGIC_SHOW_OVERLAY,()=>{this.showOverlay();});}},"gt");var vi=Object.create,Ot=Object.defineProperty,gi=Object.getOwnPropertyDescriptor,yi=Object.getOwnPropertyNames,Ei=Object.getPrototypeOf,_i=Object.prototype.hasOwnProperty,Ii=a(e=>Ot(e,"__esModule",{value:!0}),"tt"),nt=(e=>typeof b<"u"?b:typeof Proxy<"u"?new Proxy(e,{get:(t,n)=>(typeof b<"u"?b:t)[n]}):e)(function(e){if(typeof b<"u")return b.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')}),Sr=a((e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),"$e"),bi=a((e,t,n,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let l of yi(t))!_i.call(e,l)&&(n||l!=="default")&&Ot(e,l,{get:()=>t[l],enumerable:!(s=gi(t,l))||s.enumerable});return e},"nt"),Ar=a((e,t)=>bi(Ii(Ot(e!=null?vi(Ei(e)):{},"default",!t&&e&&e.__esModule?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e),"Ze"),ot=a((e,t,n)=>new Promise((s,l)=>{var c=a(y=>{try{v(n.next(y));}catch(g){l(g);}},"Q"),b=a(y=>{try{v(n.throw(y));}catch(g){l(g);}},"C"),v=a(y=>y.done?s(y.value):Promise.resolve(y.value).then(c,b),"Y");v((n=n.apply(e,t)).next());}),"se"),wi=Sr((e,t)=>{(function(n){if(typeof e=="object"&&typeof t<"u")t.exports=n();else if(typeof define=="function"&&define.amd)define([],n);else {var s;typeof window<"u"?s=window:typeof globalThis<"u"?s=globalThis:typeof self<"u"?s=self:s=this,s.localforage=n();}})(function(){return a(function c(b,v,y){function g(D,F){if(!v[D]){if(!b[D]){var O=typeof nt=="function"&&nt;if(!F&&O)return O(D,!0);if(m)return m(D,!0);var M=new Error("Cannot find module '"+D+"'");throw M.code="MODULE_NOT_FOUND",M}var L=v[D]={exports:{}};b[D][0].call(L.exports,function(G){var Y=b[D][1][G];return g(Y||G)},L,L.exports,c,b,v,y);}return v[D].exports}a(g,"Y");for(var m=typeof nt=="function"&&nt,S=0;S<y.length;S++)g(y[S]);return g},"L")({1:[function(c,b,v){(function(y){var g=y.MutationObserver||y.WebKitMutationObserver,m;if(g){var S=0,D=new g(G),F=y.document.createTextNode("");D.observe(F,{characterData:!0}),m=a(function(){F.data=S=++S%2;},"S");}else if(!y.setImmediate&&typeof y.MessageChannel<"u"){var O=new y.MessageChannel;O.port1.onmessage=G,m=a(function(){O.port2.postMessage(0);},"S");}else "document"in y&&"onreadystatechange"in y.document.createElement("script")?m=a(function(){var C=y.document.createElement("script");C.onreadystatechange=function(){G(),C.onreadystatechange=null,C.parentNode.removeChild(C),C=null;},y.document.documentElement.appendChild(C);},"S"):m=a(function(){setTimeout(G,0);},"S");var M,L=[];function G(){M=!0;for(var C,le,W=L.length;W;){for(le=L,L=[],C=-1;++C<W;)le[C]();W=L.length;}M=!1;}a(G,"z"),b.exports=Y;function Y(C){L.push(C)===1&&!M&&m();}a(Y,"q");}).call(this,typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:{});},{}],2:[function(c,b,v){var y=c(1);function g(){}a(g,"Y");var m={},S=["REJECTED"],D=["FULFILLED"],F=["PENDING"];b.exports=O;function O(A){if(typeof A!="function")throw new TypeError("resolver must be a function");this.state=F,this.queue=[],this.outcome=void 0,A!==g&&Y(this,A);}a(O,"m"),O.prototype.catch=function(A){return this.then(null,A)},O.prototype.then=function(A,U){if(typeof A!="function"&&this.state===D||typeof U!="function"&&this.state===S)return this;var k=new this.constructor(g);if(this.state!==F){var q=this.state===D?A:U;L(k,q,this.outcome);}else this.queue.push(new M(k,A,U));return k};function M(A,U,k){this.promise=A,typeof U=="function"&&(this.onFulfilled=U,this.callFulfilled=this.otherCallFulfilled),typeof k=="function"&&(this.onRejected=k,this.callRejected=this.otherCallRejected);}a(M,"w"),M.prototype.callFulfilled=function(A){m.resolve(this.promise,A);},M.prototype.otherCallFulfilled=function(A){L(this.promise,this.onFulfilled,A);},M.prototype.callRejected=function(A){m.reject(this.promise,A);},M.prototype.otherCallRejected=function(A){L(this.promise,this.onRejected,A);};function L(A,U,k){y(function(){var q;try{q=U(k);}catch(Q){return m.reject(A,Q)}q===A?m.reject(A,new TypeError("Cannot resolve promise with itself")):m.resolve(A,q);});}a(L,"N"),m.resolve=function(A,U){var k=C(G,U);if(k.status==="error")return m.reject(A,k.value);var q=k.value;if(q)Y(A,q);else {A.state=D,A.outcome=U;for(var Q=-1,oe=A.queue.length;++Q<oe;)A.queue[Q].callFulfilled(U);}return A},m.reject=function(A,U){A.state=S,A.outcome=U;for(var k=-1,q=A.queue.length;++k<q;)A.queue[k].callRejected(U);return A};function G(A){var U=A&&A.then;if(A&&(typeof A=="object"||typeof A=="function")&&typeof U=="function")return function(){U.apply(A,arguments);}}a(G,"z");function Y(A,U){var k=!1;function q(ce){k||(k=!0,m.reject(A,ce));}a(q,"B");function Q(ce){k||(k=!0,m.resolve(A,ce));}a(Q,"H");function oe(){U(Q,q);}a(oe,"j");var se=C(oe);se.status==="error"&&q(se.value);}a(Y,"q");function C(A,U){var k={};try{k.value=A(U),k.status="success";}catch(q){k.status="error",k.value=q;}return k}a(C,"F"),O.resolve=le;function le(A){return A instanceof this?A:m.resolve(new this(g),A)}a(le,"k"),O.reject=W;function W(A){var U=new this(g);return m.reject(U,A)}a(W,"U"),O.all=we;function we(A){var U=this;if(Object.prototype.toString.call(A)!=="[object Array]")return this.reject(new TypeError("must be an array"));var k=A.length,q=!1;if(!k)return this.resolve([]);for(var Q=new Array(k),oe=0,se=-1,ce=new this(g);++se<k;)fe(A[se],se);return ce;function fe(_e,h){U.resolve(_e).then(E,function(N){q||(q=!0,m.reject(ce,N));});function E(N){Q[h]=N,++oe===k&&!q&&(q=!0,m.resolve(ce,Q));}a(E,"s");}}a(we,"ae"),O.race=de;function de(A){var U=this;if(Object.prototype.toString.call(A)!=="[object Array]")return this.reject(new TypeError("must be an array"));var k=A.length,q=!1;if(!k)return this.resolve([]);for(var Q=-1,oe=new this(g);++Q<k;)se(A[Q]);return oe;function se(ce){U.resolve(ce).then(function(fe){q||(q=!0,m.resolve(oe,fe));},function(fe){q||(q=!0,m.reject(oe,fe));});}}a(de,"re");},{1:1}],3:[function(c,b,v){(function(y){typeof y.Promise!="function"&&(y.Promise=c(2));}).call(this,typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:{});},{2:2}],4:[function(c,b,v){var y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r};function g(r,i){if(!(r instanceof i))throw new TypeError("Cannot call a class as a function")}a(g,"Y");function m(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}a(m,"S");var S=m();function D(){try{if(!S||!S.open)return !1;var r=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),i=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return (!r||i)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return !1}}a(D,"K");function F(r,i){r=r||[],i=i||{};try{return new Blob(r,i)}catch(d){if(d.name!=="TypeError")throw d;for(var a=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,f=new a,u=0;u<r.length;u+=1)f.append(r[u]);return f.getBlob(i.type)}}a(F,"Z"),typeof Promise>"u"&&c(3);var O=Promise;function M(r,i){i&&r.then(function(a){i(null,a);},function(a){i(a);});}a(M,"w");function L(r,i,a){typeof i=="function"&&r.then(i),typeof a=="function"&&r.catch(a);}a(L,"N");function G(r){return typeof r!="string"&&(console.warn(r+" used as a key, but it is not a string."),r=String(r)),r}a(G,"z");function Y(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}a(Y,"q");var C="local-forage-detect-blob-support",le=void 0,W={},we=Object.prototype.toString,de="readonly",A="readwrite";function U(r){for(var i=r.length,a=new ArrayBuffer(i),f=new Uint8Array(a),u=0;u<i;u++)f[u]=r.charCodeAt(u);return a}a(U,"R");function k(r){return new O(function(i){var a=r.transaction(C,A),f=F([""]);a.objectStore(C).put(f,"key"),a.onabort=function(u){u.preventDefault(),u.stopPropagation(),i(!1);},a.oncomplete=function(){var u=navigator.userAgent.match(/Chrome\/(\d+)/),d=navigator.userAgent.match(/Edge\//);i(d||!u||parseInt(u[1],10)>=43);};}).catch(function(){return !1})}a(k,"I");function q(r){return typeof le=="boolean"?O.resolve(le):k(r).then(function(i){return le=i,le})}a(q,"B");function Q(r){var i=W[r.name],a={};a.promise=new O(function(f,u){a.resolve=f,a.reject=u;}),i.deferredOperations.push(a),i.dbReady?i.dbReady=i.dbReady.then(function(){return a.promise}):i.dbReady=a.promise;}a(Q,"H");function oe(r){var i=W[r.name],a=i.deferredOperations.pop();if(a)return a.resolve(),a.promise}a(oe,"j");function se(r,i){var a=W[r.name],f=a.deferredOperations.pop();if(f)return f.reject(i),f.promise}a(se,"J");function ce(r,i){return new O(function(a,f){if(W[r.name]=W[r.name]||ee(),r.db)if(i)Q(r),r.db.close();else return a(r.db);var u=[r.name];i&&u.push(r.version);var d=S.open.apply(S,u);i&&(d.onupgradeneeded=function(p){var _=d.result;try{_.createObjectStore(r.storeName),p.oldVersion<=1&&_.createObjectStore(C);}catch(R){if(R.name==="ConstraintError")console.warn('The database "'+r.name+'" has been upgraded from version '+p.oldVersion+" to version "+p.newVersion+', but the storage "'+r.storeName+'" already exists.');else throw R}}),d.onerror=function(p){p.preventDefault(),f(d.error);},d.onsuccess=function(){a(d.result),oe(r);};})}a(ce,"$");function fe(r){return ce(r,!1)}a(fe,"ee");function _e(r){return ce(r,!0)}a(_e,"oe");function h(r,i){if(!r.db)return !0;var a=!r.db.objectStoreNames.contains(r.storeName),f=r.version<r.db.version,u=r.version>r.db.version;if(f&&(r.version!==i&&console.warn('The database "'+r.name+`" can't be downgraded from version `+r.db.version+" to version "+r.version+"."),r.version=r.db.version),u||a){if(a){var d=r.db.version+1;d>r.version&&(r.version=d);}return !0}return !1}a(h,"a");function E(r){return new O(function(i,a){var f=new FileReader;f.onerror=a,f.onloadend=function(u){var d=btoa(u.target.result||"");i({__local_forage_encoded_blob:!0,data:d,type:r.type});},f.readAsBinaryString(r);})}a(E,"s");function N(r){var i=U(atob(r.data));return F([i],{type:r.type})}a(N,"v");function $(r){return r&&r.__local_forage_encoded_blob}a($,"b");function P(r){var i=this,a=i._initReady().then(function(){var f=W[i._dbInfo.name];if(f&&f.dbReady)return f.dbReady});return L(a,r,r),a}a(P,"_");function j(r){Q(r);for(var i=W[r.name],a=i.forages,f=0;f<a.length;f++){var u=a[f];u._dbInfo.db&&(u._dbInfo.db.close(),u._dbInfo.db=null);}return r.db=null,fe(r).then(function(d){return r.db=d,h(r)?_e(r):d}).then(function(d){r.db=i.db=d;for(var p=0;p<a.length;p++)a[p]._dbInfo.db=d;}).catch(function(d){throw se(r,d),d})}a(j,"E");function B(r,i,a,f){f===void 0&&(f=1);try{var u=r.db.transaction(r.storeName,i);a(null,u);}catch(d){if(f>0&&(!r.db||d.name==="InvalidStateError"||d.name==="NotFoundError"))return O.resolve().then(function(){if(!r.db||d.name==="NotFoundError"&&!r.db.objectStoreNames.contains(r.storeName)&&r.version<=r.db.version)return r.db&&(r.version=r.db.version+1),_e(r)}).then(function(){return j(r).then(function(){B(r,i,a,f-1);})}).catch(a);a(d);}}a(B,"D");function ee(){return {forages:[],db:null,dbReady:null,deferredOperations:[]}}a(ee,"G");function Re(r){var i=this,a$1={db:null};if(r)for(var f in r)a$1[f]=r[f];var u=W[a$1.name];u||(u=ee(),W[a$1.name]=u),u.forages.push(i),i._initReady||(i._initReady=i.ready,i.ready=P);var d=[];function p(){return O.resolve()}a(p,"f");for(var _=0;_<u.forages.length;_++){var R=u.forages[_];R!==i&&d.push(R._initReady().catch(p));}var w=u.forages.slice(0);return O.all(d).then(function(){return a$1.db=u.db,fe(a$1)}).then(function(I){return a$1.db=I,h(a$1,i._defaultConfig.version)?_e(a$1):I}).then(function(I){a$1.db=u.db=I,i._dbInfo=a$1;for(var T=0;T<w.length;T++){var x=w[T];x!==i&&(x._dbInfo.db=a$1.db,x._dbInfo.version=a$1.version);}})}a(Re,"fe");function Ie(r,i){var a=this;r=G(r);var f=new O(function(u,d){a.ready().then(function(){B(a._dbInfo,de,function(p,_){if(p)return d(p);try{var R=_.objectStore(a._dbInfo.storeName),w=R.get(r);w.onsuccess=function(){var I=w.result;I===void 0&&(I=null),$(I)&&(I=N(I)),u(I);},w.onerror=function(){d(w.error);};}catch(I){d(I);}});}).catch(d);});return M(f,i),f}a(Ie,"ie");function Te(r,i){var a=this,f=new O(function(u,d){a.ready().then(function(){B(a._dbInfo,de,function(p,_){if(p)return d(p);try{var R=_.objectStore(a._dbInfo.storeName),w=R.openCursor(),I=1;w.onsuccess=function(){var T=w.result;if(T){var x=T.value;$(x)&&(x=N(x));var X=r(x,T.key,I++);X!==void 0?u(X):T.continue();}else u();},w.onerror=function(){d(w.error);};}catch(T){d(T);}});}).catch(d);});return M(f,i),f}a(Te,"ce");function Lr(r,i,a){var f=this;r=G(r);var u=new O(function(d,p){var _;f.ready().then(function(){return _=f._dbInfo,we.call(i)==="[object Blob]"?q(_.db).then(function(R){return R?i:E(i)}):i}).then(function(R){B(f._dbInfo,A,function(w,I){if(w)return p(w);try{var T=I.objectStore(f._dbInfo.storeName);R===null&&(R=void 0);var x=T.put(R,r);I.oncomplete=function(){R===void 0&&(R=null),d(R);},I.onabort=I.onerror=function(){var X=x.error?x.error:x.transaction.error;p(X);};}catch(X){p(X);}});}).catch(p);});return M(u,a),u}a(Lr,"nr");function Mr(r,i){var a=this;r=G(r);var f=new O(function(u,d){a.ready().then(function(){B(a._dbInfo,A,function(p,_){if(p)return d(p);try{var R=_.objectStore(a._dbInfo.storeName),w=R.delete(r);_.oncomplete=function(){u();},_.onerror=function(){d(w.error);},_.onabort=function(){var I=w.error?w.error:w.transaction.error;d(I);};}catch(I){d(I);}});}).catch(d);});return M(f,i),f}a(Mr,"or");function Tr(r){var i=this,a=new O(function(f,u){i.ready().then(function(){B(i._dbInfo,A,function(d,p){if(d)return u(d);try{var _=p.objectStore(i._dbInfo.storeName),R=_.clear();p.oncomplete=function(){f();},p.onabort=p.onerror=function(){var w=R.error?R.error:R.transaction.error;u(w);};}catch(w){u(w);}});}).catch(u);});return M(a,r),a}a(Tr,"ir");function $r(r){var i=this,a=new O(function(f,u){i.ready().then(function(){B(i._dbInfo,de,function(d,p){if(d)return u(d);try{var _=p.objectStore(i._dbInfo.storeName),R=_.count();R.onsuccess=function(){f(R.result);},R.onerror=function(){u(R.error);};}catch(w){u(w);}});}).catch(u);});return M(a,r),a}a($r,"ar");function Pr(r,i){var a=this,f=new O(function(u,d){if(r<0){u(null);return}a.ready().then(function(){B(a._dbInfo,de,function(p,_){if(p)return d(p);try{var R=_.objectStore(a._dbInfo.storeName),w=!1,I=R.openKeyCursor();I.onsuccess=function(){var T=I.result;if(!T){u(null);return}r===0||w?u(T.key):(w=!0,T.advance(r));},I.onerror=function(){d(I.error);};}catch(T){d(T);}});}).catch(d);});return M(f,i),f}a(Pr,"fr");function Cr(r){var i=this,a=new O(function(f,u){i.ready().then(function(){B(i._dbInfo,de,function(d,p){if(d)return u(d);try{var _=p.objectStore(i._dbInfo.storeName),R=_.openKeyCursor(),w=[];R.onsuccess=function(){var I=R.result;if(!I){f(w);return}w.push(I.key),I.continue();},R.onerror=function(){u(R.error);};}catch(I){u(I);}});}).catch(u);});return M(a,r),a}a(Cr,"ur");function jr(r,i){i=Y.apply(this,arguments);var a=this.config();r=typeof r!="function"&&r||{},r.name||(r.name=r.name||a.name,r.storeName=r.storeName||a.storeName);var f=this,u;if(!r.name)u=O.reject("Invalid arguments");else {var d=r.name===a.name&&f._dbInfo.db,p=d?O.resolve(f._dbInfo.db):fe(r).then(function(_){var R=W[r.name],w=R.forages;R.db=_;for(var I=0;I<w.length;I++)w[I]._dbInfo.db=_;return _});r.storeName?u=p.then(function(_){if(_.objectStoreNames.contains(r.storeName)){var R=_.version+1;Q(r);var w=W[r.name],I=w.forages;_.close();for(var T=0;T<I.length;T++){var x=I[T];x._dbInfo.db=null,x._dbInfo.version=R;}var X=new O(function(z,Z){var V=S.open(r.name,R);V.onerror=function(ie){var dt=V.result;dt.close(),Z(ie);},V.onupgradeneeded=function(){var ie=V.result;ie.deleteObjectStore(r.storeName);},V.onsuccess=function(){var ie=V.result;ie.close(),z(ie);};});return X.then(function(z){w.db=z;for(var Z=0;Z<I.length;Z++){var V=I[Z];V._dbInfo.db=z,oe(V._dbInfo);}}).catch(function(z){throw (se(r,z)||O.resolve()).catch(function(){}),z})}}):u=p.then(function(_){Q(r);var R=W[r.name],w=R.forages;_.close();for(var I=0;I<w.length;I++){var T=w[I];T._dbInfo.db=null;}var x=new O(function(X,z){var Z=S.deleteDatabase(r.name);Z.onerror=Z.onblocked=function(V){var ie=Z.result;ie&&ie.close(),z(V);},Z.onsuccess=function(){var V=Z.result;V&&V.close(),X(V);};});return x.then(function(X){R.db=X;for(var z=0;z<w.length;z++){var Z=w[z];oe(Z._dbInfo);}}).catch(function(X){throw (se(r,X)||O.resolve()).catch(function(){}),X})});}return M(u,i),u}a(jr,"sr");var Dr={_driver:"asyncStorage",_initStorage:Re,_support:D(),iterate:Te,getItem:Ie,setItem:Lr,removeItem:Mr,clear:Tr,length:$r,key:Pr,keys:Cr,dropInstance:jr};function kr(){return typeof openDatabase=="function"}a(kr,"lr");var pe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",xr="~~local_forage_type~",Nt=/^~~local_forage_type~([^~]+)~/,ze="__lfsc__:",it=ze.length,at="arbf",st="blob",St="si08",At="ui08",Lt="uic8",Mt="si16",Tt="si32",$t="ur16",Pt="ui32",Ct="fl32",jt="fl64",Dt=it+at.length,kt=Object.prototype.toString;function xt(r){var i=r.length*.75,a=r.length,f,u=0,d,p,_,R;r[r.length-1]==="="&&(i--,r[r.length-2]==="="&&i--);var w=new ArrayBuffer(i),I=new Uint8Array(w);for(f=0;f<a;f+=4)d=pe.indexOf(r[f]),p=pe.indexOf(r[f+1]),_=pe.indexOf(r[f+2]),R=pe.indexOf(r[f+3]),I[u++]=d<<2|p>>4,I[u++]=(p&15)<<4|_>>2,I[u++]=(_&3)<<6|R&63;return w}a(xt,"He");function ct(r){var i=new Uint8Array(r),a="",f;for(f=0;f<i.length;f+=3)a+=pe[i[f]>>2],a+=pe[(i[f]&3)<<4|i[f+1]>>4],a+=pe[(i[f+1]&15)<<2|i[f+2]>>6],a+=pe[i[f+2]&63];return i.length%3===2?a=a.substring(0,a.length-1)+"=":i.length%3===1&&(a=a.substring(0,a.length-2)+"=="),a}a(ct,"we");function Ur(r,i){var a="";if(r&&(a=kt.call(r)),r&&(a==="[object ArrayBuffer]"||r.buffer&&kt.call(r.buffer)==="[object ArrayBuffer]")){var f,u=ze;r instanceof ArrayBuffer?(f=r,u+=at):(f=r.buffer,a==="[object Int8Array]"?u+=St:a==="[object Uint8Array]"?u+=At:a==="[object Uint8ClampedArray]"?u+=Lt:a==="[object Int16Array]"?u+=Mt:a==="[object Uint16Array]"?u+=$t:a==="[object Int32Array]"?u+=Tt:a==="[object Uint32Array]"?u+=Pt:a==="[object Float32Array]"?u+=Ct:a==="[object Float64Array]"?u+=jt:i(new Error("Failed to get type for BinaryArray"))),i(u+ct(f));}else if(a==="[object Blob]"){var d=new FileReader;d.onload=function(){var p=xr+r.type+"~"+ct(this.result);i(ze+st+p);},d.readAsArrayBuffer(r);}else try{i(JSON.stringify(r));}catch(p){console.error("Couldn't convert value into a JSON string: ",r),i(null,p);}}a(Ur,"vr");function Fr(r){if(r.substring(0,it)!==ze)return JSON.parse(r);var i=r.substring(Dt),a=r.substring(it,Dt),f;if(a===st&&Nt.test(i)){var u=i.match(Nt);f=u[1],i=i.substring(u[0].length);}var d=xt(i);switch(a){case at:return d;case st:return F([d],{type:f});case St:return new Int8Array(d);case At:return new Uint8Array(d);case Lt:return new Uint8ClampedArray(d);case Mt:return new Int16Array(d);case $t:return new Uint16Array(d);case Tt:return new Int32Array(d);case Pt:return new Uint32Array(d);case Ct:return new Float32Array(d);case jt:return new Float64Array(d);default:throw new Error("Unkown type: "+a)}}a(Fr,"hr");var ut={serialize:Ur,deserialize:Fr,stringToBuffer:xt,bufferToString:ct};function Ut(r,i,a,f){r.executeSql("CREATE TABLE IF NOT EXISTS "+i.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],a,f);}a(Ut,"Ve");function Br(r){var i=this,a={db:null};if(r)for(var f in r)a[f]=typeof r[f]!="string"?r[f].toString():r[f];var u=new O(function(d,p){try{a.db=openDatabase(a.name,String(a.version),a.description,a.size);}catch(_){return p(_)}a.db.transaction(function(_){Ut(_,a,function(){i._dbInfo=a,d();},function(R,w){p(w);});},p);});return a.serializer=ut,u}a(Br,"mr");function me(r,i,a,f,u,d){r.executeSql(a,f,u,function(p,_){_.code===_.SYNTAX_ERR?p.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[i.storeName],function(R,w){w.rows.length?d(R,_):Ut(R,i,function(){R.executeSql(a,f,u,d);},d);},d):d(p,_);},d);}a(me,"ne");function Gr(r,i){var a=this;r=G(r);var f=new O(function(u,d){a.ready().then(function(){var p=a._dbInfo;p.db.transaction(function(_){me(_,p,"SELECT * FROM "+p.storeName+" WHERE key = ? LIMIT 1",[r],function(R,w){var I=w.rows.length?w.rows.item(0).value:null;I&&(I=p.serializer.deserialize(I)),u(I);},function(R,w){d(w);});});}).catch(d);});return M(f,i),f}a(Gr,"yr");function Wr(r,i){var a=this,f=new O(function(u,d){a.ready().then(function(){var p=a._dbInfo;p.db.transaction(function(_){me(_,p,"SELECT * FROM "+p.storeName,[],function(R,w){for(var I=w.rows,T=I.length,x=0;x<T;x++){var X=I.item(x),z=X.value;if(z&&(z=p.serializer.deserialize(z)),z=r(z,X.key,x+1),z!==void 0){u(z);return}}u();},function(R,w){d(w);});});}).catch(d);});return M(f,i),f}a(Wr,"pr");function Ft(r,i,a,f){var u=this;r=G(r);var d=new O(function(p,_){u.ready().then(function(){i===void 0&&(i=null);var R=i,w=u._dbInfo;w.serializer.serialize(i,function(I,T){T?_(T):w.db.transaction(function(x){me(x,w,"INSERT OR REPLACE INTO "+w.storeName+" (key, value) VALUES (?, ?)",[r,I],function(){p(R);},function(X,z){_(z);});},function(x){if(x.code===x.QUOTA_ERR){if(f>0){p(Ft.apply(u,[r,R,a,f-1]));return}_(x);}});});}).catch(_);});return M(d,a),d}a(Ft,"Ge");function qr(r,i,a){return Ft.apply(this,[r,i,a,1])}a(qr,"gr");function zr(r,i){var a=this;r=G(r);var f=new O(function(u,d){a.ready().then(function(){var p=a._dbInfo;p.db.transaction(function(_){me(_,p,"DELETE FROM "+p.storeName+" WHERE key = ?",[r],function(){u();},function(R,w){d(w);});});}).catch(d);});return M(f,i),f}a(zr,"br");function Hr(r){var i=this,a=new O(function(f,u){i.ready().then(function(){var d=i._dbInfo;d.db.transaction(function(p){me(p,d,"DELETE FROM "+d.storeName,[],function(){f();},function(_,R){u(R);});});}).catch(u);});return M(a,r),a}a(Hr,"_r");function Xr(r){var i=this,a=new O(function(f,u){i.ready().then(function(){var d=i._dbInfo;d.db.transaction(function(p){me(p,d,"SELECT COUNT(key) as c FROM "+d.storeName,[],function(_,R){var w=R.rows.item(0).c;f(w);},function(_,R){u(R);});});}).catch(u);});return M(a,r),a}a(Xr,"wr");function Kr(r,i){var a=this,f=new O(function(u,d){a.ready().then(function(){var p=a._dbInfo;p.db.transaction(function(_){me(_,p,"SELECT key FROM "+p.storeName+" WHERE id = ? LIMIT 1",[r+1],function(R,w){var I=w.rows.length?w.rows.item(0).key:null;u(I);},function(R,w){d(w);});});}).catch(d);});return M(f,i),f}a(Kr,"Er");function Vr(r){var i=this,a=new O(function(f,u){i.ready().then(function(){var d=i._dbInfo;d.db.transaction(function(p){me(p,d,"SELECT key FROM "+d.storeName,[],function(_,R){for(var w=[],I=0;I<R.rows.length;I++)w.push(R.rows.item(I).key);f(w);},function(_,R){u(R);});});}).catch(u);});return M(a,r),a}a(Vr,"Ir");function Yr(r){return new O(function(i,a){r.transaction(function(f){f.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(u,d){for(var p=[],_=0;_<d.rows.length;_++)p.push(d.rows.item(_).name);i({db:r,storeNames:p});},function(u,d){a(d);});},function(f){a(f);});})}a(Yr,"Sr");function Jr(r,i){i=Y.apply(this,arguments);var a$1=this.config();r=typeof r!="function"&&r||{},r.name||(r.name=r.name||a$1.name,r.storeName=r.storeName||a$1.storeName);var f=this,u;return r.name?u=new O(function(d){var p;r.name===a$1.name?p=f._dbInfo.db:p=openDatabase(r.name,"","",0),r.storeName?d({db:p,storeNames:[r.storeName]}):d(Yr(p));}).then(function(d){return new O(function(p,_){d.db.transaction(function(R){function w(X){return new O(function(z,Z){R.executeSql("DROP TABLE IF EXISTS "+X,[],function(){z();},function(V,ie){Z(ie);});})}a(w,"l");for(var I=[],T=0,x=d.storeNames.length;T<x;T++)I.push(w(d.storeNames[T]));O.all(I).then(function(){p();}).catch(function(X){_(X);});},function(R){_(R);});})}):u=O.reject("Invalid arguments"),M(u,i),u}a(Jr,"Ar");var Qr={_driver:"webSQLStorage",_initStorage:Br,_support:kr(),iterate:Wr,getItem:Gr,setItem:qr,removeItem:zr,clear:Hr,length:Xr,key:Kr,keys:Vr,dropInstance:Jr};function Zr(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return !1}}a(Zr,"Dr");function Bt(r,i){var a=r.name+"/";return r.storeName!==i.storeName&&(a+=r.storeName+"/"),a}a(Bt,"je");function en(){var r="_localforage_support_test";try{return localStorage.setItem(r,!0),localStorage.removeItem(r),!1}catch{return !0}}a(en,"Nr");function tn(){return !en()||localStorage.length>0}a(tn,"Tr");function rn(r){var i=this,a={};if(r)for(var f in r)a[f]=r[f];return a.keyPrefix=Bt(r,i._defaultConfig),tn()?(i._dbInfo=a,a.serializer=ut,O.resolve()):O.reject()}a(rn,"Br");function nn(r){var i=this,a=i.ready().then(function(){for(var f=i._dbInfo.keyPrefix,u=localStorage.length-1;u>=0;u--){var d=localStorage.key(u);d.indexOf(f)===0&&localStorage.removeItem(d);}});return M(a,r),a}a(nn,"xr");function on(r,i){var a=this;r=G(r);var f=a.ready().then(function(){var u=a._dbInfo,d=localStorage.getItem(u.keyPrefix+r);return d&&(d=u.serializer.deserialize(d)),d});return M(f,i),f}a(on,"Or");function an(r,i){var a=this,f=a.ready().then(function(){for(var u=a._dbInfo,d=u.keyPrefix,p=d.length,_=localStorage.length,R=1,w=0;w<_;w++){var I=localStorage.key(w);if(I.indexOf(d)===0){var T=localStorage.getItem(I);if(T&&(T=u.serializer.deserialize(T)),T=r(T,I.substring(p),R++),T!==void 0)return T}}});return M(f,i),f}a(an,"Cr");function sn(r,i){var a=this,f=a.ready().then(function(){var u=a._dbInfo,d;try{d=localStorage.key(r);}catch{d=null;}return d&&(d=d.substring(u.keyPrefix.length)),d});return M(f,i),f}a(sn,"Lr");function cn(r){var i=this,a=i.ready().then(function(){for(var f=i._dbInfo,u=localStorage.length,d=[],p=0;p<u;p++){var _=localStorage.key(p);_.indexOf(f.keyPrefix)===0&&d.push(_.substring(f.keyPrefix.length));}return d});return M(a,r),a}a(cn,"Pr");function un(r){var i=this,a=i.keys().then(function(f){return f.length});return M(a,r),a}a(un,"Mr");function ln(r,i){var a=this;r=G(r);var f=a.ready().then(function(){var u=a._dbInfo;localStorage.removeItem(u.keyPrefix+r);});return M(f,i),f}a(ln,"Fr");function fn(r,i,a){var f=this;r=G(r);var u=f.ready().then(function(){i===void 0&&(i=null);var d=i;return new O(function(p,_){var R=f._dbInfo;R.serializer.serialize(i,function(w,I){if(I)_(I);else try{localStorage.setItem(R.keyPrefix+r,w),p(d);}catch(T){(T.name==="QuotaExceededError"||T.name==="NS_ERROR_DOM_QUOTA_REACHED")&&_(T),_(T);}});})});return M(u,a),u}a(fn,"Ur");function dn(r,i){if(i=Y.apply(this,arguments),r=typeof r!="function"&&r||{},!r.name){var a=this.config();r.name=r.name||a.name,r.storeName=r.storeName||a.storeName;}var f=this,u;return r.name?u=new O(function(d){r.storeName?d(Bt(r,f._defaultConfig)):d(r.name+"/");}).then(function(d){for(var p=localStorage.length-1;p>=0;p--){var _=localStorage.key(p);_.indexOf(d)===0&&localStorage.removeItem(_);}}):u=O.reject("Invalid arguments"),M(u,i),u}a(dn,"Yr");var hn={_driver:"localStorageWrapper",_initStorage:rn,_support:Zr(),iterate:an,getItem:on,setItem:fn,removeItem:ln,clear:nn,length:un,key:sn,keys:cn,dropInstance:dn},pn=a(function(r,i){return r===i||typeof r=="number"&&typeof i=="number"&&isNaN(r)&&isNaN(i)},"Wr"),mn=a(function(r,i){for(var a=r.length,f=0;f<a;){if(pn(r[f],i))return !0;f++;}return !1},"Kr"),Gt=Array.isArray||function(r){return Object.prototype.toString.call(r)==="[object Array]"},$e={},Wt={},Oe={INDEXEDDB:Dr,WEBSQL:Qr,LOCALSTORAGE:hn},vn=[Oe.INDEXEDDB._driver,Oe.WEBSQL._driver,Oe.LOCALSTORAGE._driver],He=["dropInstance"],lt=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(He),gn={description:"",driver:vn.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function yn(r,i){r[i]=function(){var a=arguments;return r.ready().then(function(){return r[i].apply(r,a)})};}a(yn,"Gr");function ft(){for(var r=1;r<arguments.length;r++){var i=arguments[r];if(i)for(var a in i)i.hasOwnProperty(a)&&(Gt(i[a])?arguments[0][a]=i[a].slice():arguments[0][a]=i[a]);}return arguments[0]}a(ft,"Se");var En=function(){function r(i){g(this,r);for(var a in Oe)if(Oe.hasOwnProperty(a)){var f=Oe[a],u=f._driver;this[a]=u,$e[u]||this.defineDriver(f);}this._defaultConfig=ft({},gn),this._config=ft({},this._defaultConfig,i),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){});}return a(r,"e"),r.prototype.config=function(i){if((typeof i>"u"?"undefined":y(i))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var a in i){if(a==="storeName"&&(i[a]=i[a].replace(/\W/g,"_")),a==="version"&&typeof i[a]!="number")return new Error("Database version must be a number.");this._config[a]=i[a];}return "driver"in i&&i.driver?this.setDriver(this._config.driver):!0}else return typeof i=="string"?this._config[i]:this._config},r.prototype.defineDriver=function(i,a$1,f){var u=new O(function(d,p){try{var _=i._driver,R=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!i._driver){p(R);return}for(var w=lt.concat("_initStorage"),I=0,T=w.length;I<T;I++){var x=w[I],X=!mn(He,x);if((X||i[x])&&typeof i[x]!="function"){p(R);return}}var z=a(function(){for(var V=function(In){return function(){var bn=new Error("Method "+In+" is not implemented by the current driver"),qt=O.reject(bn);return M(qt,arguments[arguments.length-1]),qt}},ie=0,dt=He.length;ie<dt;ie++){var ht=He[ie];i[ht]||(i[ht]=V(ht));}},"V");z();var Z=a(function(V){$e[_]&&console.info("Redefining LocalForage driver: "+_),$e[_]=i,Wt[_]=V,d();},"W");"_support"in i?i._support&&typeof i._support=="function"?i._support().then(Z,p):Z(!!i._support):Z(!0);}catch(V){p(V);}});return L(u,a$1,f),u},r.prototype.driver=function(){return this._driver||null},r.prototype.getDriver=function(i,a,f){var u=$e[i]?O.resolve($e[i]):O.reject(new Error("Driver not found."));return L(u,a,f),u},r.prototype.getSerializer=function(i){var a=O.resolve(ut);return L(a,i),a},r.prototype.ready=function(i){var a=this,f=a._driverSet.then(function(){return a._ready===null&&(a._ready=a._initDriver()),a._ready});return L(f,i,i),f},r.prototype.setDriver=function(i,a$1,f){var u=this;Gt(i)||(i=[i]);var d=this._getSupportedDrivers(i);function p(){u._config.driver=u.driver();}a(p,"u");function _(I){return u._extend(I),p(),u._ready=u._initStorage(u._config),u._ready}a(_,"c");function R(I){return function(){var T=0;function x(){for(;T<I.length;){var X=I[T];return T++,u._dbInfo=null,u._ready=null,u.getDriver(X).then(_).catch(x)}p();var z=new Error("No available storage method found.");return u._driverSet=O.reject(z),u._driverSet}return a(x,"T"),x()}}a(R,"l");var w=this._driverSet!==null?this._driverSet.catch(function(){return O.resolve()}):O.resolve();return this._driverSet=w.then(function(){var I=d[0];return u._dbInfo=null,u._ready=null,u.getDriver(I).then(function(T){u._driver=T._driver,p(),u._wrapLibraryMethodsWithReady(),u._initDriver=R(d);})}).catch(function(){p();var I=new Error("No available storage method found.");return u._driverSet=O.reject(I),u._driverSet}),L(this._driverSet,a$1,f),this._driverSet},r.prototype.supports=function(i){return !!Wt[i]},r.prototype._extend=function(i){ft(this,i);},r.prototype._getSupportedDrivers=function(i){for(var a=[],f=0,u=i.length;f<u;f++){var d=i[f];this.supports(d)&&a.push(d);}return a},r.prototype._wrapLibraryMethodsWithReady=function(){for(var i=0,a=lt.length;i<a;i++)yn(this,lt[i]);},r.prototype.createInstance=function(i){return new r(i)},r}(),_n=new En;b.exports=_n;},{3:3}]},{},[4])(4)});}),Ri=Sr((e,t)=>{(function(n,s){typeof e=="object"&&typeof t<"u"?s(e):typeof define=="function"&&define.amd?define("localforage-driver-memory",["exports"],s):s(n.LocalforageDriverMemory={});})(typeof self<"u"?self:e,function(n){var s="localforage-driver-memory";function l(h){var E=typeof Symbol=="function"&&h[Symbol.iterator],N=0;return E?E.call(h):{next:function(){return h&&N>=h.length&&(h=void 0),{value:h&&h[N++],done:!h}}}}a(l,"O");function c(h,E){h=h||[],E=E||{};try{return new Blob(h,E)}catch(j){if(j.name!=="TypeError")throw j;for(var N=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,$=new N,P=0;P<h.length;P+=1)$.append(h[P]);return $.getBlob(E.type)}}a(c,"L");var b=/^~~local_forage_type~([^~]+)~/,v=9,y=v+4,g=Object.prototype.toString;function m(h){var E=h.length*.75,N=h.length;h[h.length-1]==="="&&(E--,h[h.length-2]==="="&&E--);for(var $=new ArrayBuffer(E),P=new Uint8Array($),j=0,B=0;j<N;j+=4){var ee="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(h[j]),Re="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(h[j+1]),Ie="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(h[j+2]),Te="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(h[j+3]);P[B++]=ee<<2|Re>>4,P[B++]=(Re&15)<<4|Ie>>2,P[B++]=(Ie&3)<<6|Te&63;}return $}a(m,"S");function S(h){for(var E=new Uint8Array(h),N="",$=0;$<E.length;$+=3)N+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[E[$]>>2],N+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(E[$]&3)<<4|E[$+1]>>4],N+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(E[$+1]&15)<<2|E[$+2]>>6],N+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[E[$+2]&63];return E.length%3===2?N=N.substring(0,N.length-1)+"=":E.length%3===1&&(N=N.substring(0,N.length-2)+"=="),N}a(S,"P");function D(h,E){var N="";if(h&&(N=g.call(h)),h&&(N==="[object ArrayBuffer]"||h.buffer&&g.call(h.buffer)==="[object ArrayBuffer]")){var $=void 0,P="__lfsc__:";h instanceof ArrayBuffer?($=h,P+="arbf"):($=h.buffer,N==="[object Int8Array]"?P+="si08":N==="[object Uint8Array]"?P+="ui08":N==="[object Uint8ClampedArray]"?P+="uic8":N==="[object Int16Array]"?P+="si16":N==="[object Uint16Array]"?P+="ur16":N==="[object Int32Array]"?P+="si32":N==="[object Uint32Array]"?P+="ui32":N==="[object Float32Array]"?P+="fl32":N==="[object Float64Array]"?P+="fl64":E(new Error("Failed to get type for BinaryArray"))),E(P+S($));}else if(N==="[object Blob]"){var j=new FileReader;j.onload=function(){var B="~~local_forage_type~"+h.type+"~"+S(this.result);E("__lfsc__:blob"+B);},j.readAsArrayBuffer(h);}else try{E(JSON.stringify(h));}catch(B){console.error("Couldn't convert value into a JSON string: ",h),E(null,B);}}a(D,"K");function F(h){if(h.substring(0,v)!=="__lfsc__:")return JSON.parse(h);var E=h.substring(y),N=h.substring(v,y),$;if(N==="blob"&&b.test(E)){var P=E.match(b);$=P[1],E=E.substring(P[0].length);}var j=m(E);switch(N){case"arbf":return j;case"blob":return c([j],{type:$});case"si08":return new Int8Array(j);case"ui08":return new Uint8Array(j);case"uic8":return new Uint8ClampedArray(j);case"si16":return new Int16Array(j);case"ur16":return new Uint16Array(j);case"si32":return new Int32Array(j);case"ui32":return new Uint32Array(j);case"fl32":return new Float32Array(j);case"fl64":return new Float64Array(j);default:throw new Error("Unkown type: "+N)}}a(F,"Z");function O(h){var E,N;if(h===null||typeof h!="object"||"isActiveClone"in h)return h;var $=h instanceof Date?new Date(h):h.constructor();try{for(var P=l(Object.keys(h)),j=P.next();!j.done;j=P.next()){var B=j.value;Object.prototype.hasOwnProperty.call(h,B)&&(h.isActiveClone=null,$[B]=O(h[B]),delete h.isActiveClone);}}catch(ee){E={error:ee};}finally{try{j&&!j.done&&(N=P.return)&&N.call(P);}finally{if(E)throw E.error}}return $}a(O,"m");function M(h,E){return (h.name||E.name)+"/"+(h.storeName||E.storeName)+"/"}a(M,"w");function L(h,E){E&&h.then(function(N){E(null,N);},function(N){E(N);});}a(L,"N");function G(){for(var h=[],E=0;E<arguments.length;E++)h[E]=arguments[E];if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}a(G,"z");function Y(h,E){var N=this;if(E=G.apply(this,arguments),h=typeof h!="function"&&h||{},!h.name){var $=this.config();h.name=h.name||$.name,h.storeName=h.storeName||$.storeName;}var P;return h.name?P=new Promise(function(j){h.storeName?j(M(h,N._defaultConfig)):j(h.name+"/");}):P=Promise.reject("Invalid arguments"),{promise:P,callback:E}}a(Y,"q");function C(h){return typeof h!="string"&&(console.warn(h+" used as a key, but it is not a string."),h=String(h)),h}a(C,"F");var le={bufferToString:S,deserialize:F,serialize:D,stringToBuffer:m},W={},we=function(){function h(E){this.kp=E,this.data={};}return a(h,"a"),h.resolve=function(E){return W[E]||(W[E]=new h(E)),W[E]},h.prototype.clear=function(){this.data={};},h.prototype.drop=function(){this.clear(),delete W[this.kp];},h.prototype.get=function(E){return this.data[E]},h.prototype.key=function(E){return this.keys()[E]},h.prototype.keys=function(){return Object.keys(this.data)},h.prototype.rm=function(E){delete this.data[E];},h.prototype.set=function(E,N){this.data[E]=N;},h}();function de(h){var E=h?O(h):{},N=M(E,this._defaultConfig),$=we.resolve(N);return this._dbInfo=E,this._dbInfo.serializer=le,this._dbInfo.keyPrefix=N,this._dbInfo.mStore=$,Promise.resolve()}a(de,"re");function A(h){var E=this,N=this.ready().then(function(){E._dbInfo.mStore.clear();});return L(N,h),N}a(A,"h");function U(h,E){var N=Y.apply(this,arguments),$=N.promise,P=N.callback,j=$.then(function(B){we.resolve(B).drop();});return L(j,P),$}a(U,"R");function k(h,E){var N=this;h=C(h);var $=this.ready().then(function(){var P=N._dbInfo.mStore.get(h);return P==null?null:N._dbInfo.serializer.deserialize(P)});return L($,E),$}a(k,"I");function q(h,E){var N=this,$=this.ready().then(function(){for(var P=N._dbInfo.mStore,j=P.keys(),B=0;B<j.length;B++){var ee=P.get(j[B]);if(ee&&(ee=N._dbInfo.serializer.deserialize(ee)),ee=h(ee,j[B],B+1),ee!==void 0)return ee}});return L($,E),$}a(q,"B");function Q(h,E){var N=this,$=this.ready().then(function(){var P;try{P=N._dbInfo.mStore.key(h),P===void 0&&(P=null);}catch{P=null;}return P});return L($,E),$}a(Q,"H");function oe(h){var E=this,N=this.ready().then(function(){return E._dbInfo.mStore.keys()});return L(N,h),N}a(oe,"j");function se(h){var E=this.keys().then(function(N){return N.length});return L(E,h),E}a(se,"J");function ce(h,E){var N=this;h=C(h);var $=this.ready().then(function(){N._dbInfo.mStore.rm(h);});return L($,E),$}a(ce,"$");function fe(h,E,N){var $=this;h=C(h);var P=this.ready().then(function(){E===void 0&&(E=null);var j=E;return new Promise(function(B,ee){$._dbInfo.serializer.serialize(E,function(Re,Ie){if(Ie)ee(Ie);else try{$._dbInfo.mStore.set(h,Re),B(j);}catch(Te){ee(Te);}});})});return L(P,N),P}a(fe,"ee");var _e=!0;n._support=_e,n._driver=s,n._initStorage=de,n.clear=A,n.dropInstance=U,n.getItem=k,n.iterate=q,n.key=Q,n.keys=oe,n.length=se,n.removeItem=ce,n.setItem=fe,Object.defineProperty(n,"__esModule",{value:!0});});}),Rt=Ar(wi()),Nr=Ar(Ri()),Oi={display:"none",position:"fixed",top:"0",right:"0",width:"100%",height:"100%",borderRadius:"0",border:"none",zIndex:"2147483647"};function Ni(e){for(let[t,n]of Object.entries(Oi))e.style[t]=n;}a(Ni,"ut");function Si(e){let t=[].slice.call(document.querySelectorAll(".magic-iframe"));return Boolean(t.find(n=>n.src.includes(e)))}a(Si,"st");var Ai=a(class extends Or{constructor(){super(...arguments),this.activeElement=null;}init(){this.test="hello",this.iframe=new Promise(e=>{let t=a(()=>{if(Si(encodeURIComponent(this.parameters)))dr().log();else {let n=document.createElement("iframe");n.classList.add("magic-iframe"),n.dataset.magicIframeLabel=Be(this.endpoint).host,n.title="Secure Modal",n.src=Be(`/send?params=${encodeURIComponent(this.parameters)}`,this.endpoint).href,Ni(n),document.body.appendChild(n),e(n);}},"O");["loaded","interactive","complete"].includes(document.readyState)?t():window.addEventListener("load",t,!1);}),window.addEventListener("message",e=>{var t;if(e.origin===this.endpoint&&e.data&&e.data.msgType&&this.messageHandlers.size){e.data.response=(t=e.data.response)!=null?t:{};for(let n of this.messageHandlers.values())n(e);}});}showOverlay(){return ot(this,null,function*(){let e=yield this.iframe;e.style.display="block",this.activeElement=document.activeElement,e.focus();})}hideOverlay(){return ot(this,null,function*(){var e;let t=yield this.iframe;t.style.display="none",(e=this.activeElement)!=null&&e.focus&&this.activeElement.focus(),this.activeElement=null;})}_post(e){return ot(this,null,function*(){let t=yield this.iframe;if(t&&t.contentWindow)t.contentWindow.postMessage(e,this.endpoint);else throw fr()})}},"Te"),ca=lr(wt,{platform:"web",sdkName:"magic-sdk",version:"8.1.1",defaultEndpoint:"https://auth.magic.link/",ViewController:Ai,configureStorage:()=>ot(void 0,null,function*(){let e=Rt.default.createInstance({name:"MagicAuthLocalStorageDB",storeName:"MagicAuthLocalStorage"});return yield e.defineDriver(Nr),yield e.setDriver([Rt.default.INDEXEDDB,Rt.default.LOCALSTORAGE,Nr._driver]),e})});

export { wn as EthChainType, Le as Extension, Et as ExtensionError, vt as ExtensionWarning, ca as Magic, ge as MagicIncomingWindowMessage, Ne as MagicOutgoingWindowMessage, K as MagicPayloadMethod, Ue as RPCError, Ce as RPCErrorCode, ye as SDKError, ve as SDKErrorCode, rt as SDKWarning, Pe as SDKWarningCode, yr as isPromiEvent };
//# sourceMappingURL=es-FSDZED33.mjs.map