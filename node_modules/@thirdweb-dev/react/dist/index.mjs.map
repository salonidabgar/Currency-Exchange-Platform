{"version":3,"sources":["../src/connectors/gnosis-safe.ts","../src/connectors/magic.ts","../src/constants/chain.ts","../src/contexts/thirdweb-auth.tsx","../src/contexts/thirdweb-config.tsx","../src/hooks/useSigner.ts","../src/Provider.tsx","../src/utils/cache-keys.ts","../src/hooks/auth/useLogin.ts","../src/hooks/auth/useLogout.ts","../src/hooks/auth/useUser.ts","../src/hooks/contracts/useBuiltinContract.ts","../src/hooks/contracts/useEditionDrop.ts","../src/hooks/contracts/useEdition.ts","../src/hooks/contracts/useNFTDrop.ts","../src/hooks/contracts/useMarketplace.ts","../src/hooks/contracts/useNFTCollection.ts","../src/hooks/contracts/usePack.ts","../src/hooks/contracts/useToken.ts","../src/hooks/contracts/useTokenDrop.ts","../src/hooks/contracts/useVote.ts","../src/hooks/contracts/useSplit.ts","../src/hooks/contracts/useMultiwrap.ts","../src/hooks/contracts/useSignatureDrop.ts","../src/hooks/useConnect.ts","../src/hooks/useDisconnect.ts","../src/hooks/useAddress.ts","../src/hooks/useReadonlySDK.ts","../src/utils/isMobile.ts","../src/hooks/connectors/useMetamask.ts","../src/hooks/connectors/useWalletConnect.ts","../src/hooks/connectors/useWalletLink.ts","../src/hooks/connectors/useGnosis.ts","../src/hooks/connectors/useMagic.ts","../src/hooks/useChainId.ts","../src/hooks/useNetworkMismatch.ts","../src/hooks/useNetwork.ts","../src/index.ts","../src/constants/ipfs.ts","../src/utils/ipfs.ts","../src/utils/media.ts","../src/utils/react.ts","../src/components/Icons.tsx","../src/components/MediaRenderer.tsx","../src/components/NftMedia.tsx","../src/hooks/query-utils/useQueryWithNetwork.ts","../src/hooks/async/contracts.ts","../src/hooks/async/nft.ts","../src/hooks/async/drop.ts","../src/hooks/async/marketplace.ts","../src/hooks/async/token.ts","../src/hooks/async/claim-conditions.ts","../src/hooks/async/wallet.ts","../src/hooks/async/contract-settings.ts","../src/hooks/async/roles.ts"],"names":["ChainId","ethers","utils","invariant","Connector","normalizeChainId","CHAIN_ID_TO_GNOSIS_SERVER_URL","Mainnet","Avalanche","Polygon","Goerli","Rinkeby","__IS_SERVER__","window","GnosisSafeConnector","id","ready","name","constructor","config","_a","chains","filter","c","options","undefined","connect","safeSigner","createSafeSigner","account","getAccount","provider","getProvider","getChainId","chain","unsupported","isChainUnsupported","_b","_c","signer","previousConnector","getSigner","safeAddress","safeChainId","signerChainId","serverUrl","safeEthersAdapters","safeCoreSdk","safeEthersLib","Promise","all","ethAdapter","default","safe","create","service","SafeService","SafeEthersSigner","disconnect","getAddress","isAuthorized","onAccountsChanged","accounts","length","emit","chainId","onChainChanged","onDisconnect","setConfiguration","connector","providers","LOCAL_STORAGE_KEY","MagicConnector","getConfiguration","localStorage","getItem","configuration","JSON","parse","doNotAutoConnect","isAutoConnect","apiKey","rpcUrls","showUI","then","m","magic","Magic","auth","loginWithMagicLink","on","e","removeListener","switchChain","network","rpcUrl","find","Web3Provider","rpcProvider","some","x","setItem","stringify","removeItem","NATIVE_TOKENS","mainnet","nativeCurrency","blockExplorers","url","rinkeby","testnet","goerli","polygonMainnet","polygonTestnetMumbai","Mumbai","avalanche","avalancheFujiTestnet","AvalancheFujiTestnet","fantom","Fantom","fantomTestnet","FantomTestnet","optimism","Optimism","optimismTestnet","OptimismTestnet","arbitrum","Arbitrum","arbitrumTestnet","ArbitrumTestnet","defaultSupportedChains","Object","values","React","createContext","useContext","useMemo","ThirdwebAuthConfigContext","ThirdwebAuthConfigProvider","__name","value","children","authConfig","authUrl","replace","Provider","useThirdwebAuthConfig","defaultChainRpc","ThirdwebConfigContext","rpcUrlMap","supportedChains","ThirdwebConfigProvider","useThirdwebConfigContext","Signer","useEffect","useRef","useAccount","useNetwork","useSigner","useWagmiSigner","_d","_e","_getSignerPromise","address","data","previousAddress","usePrevious","previousChainId","current","finally","isSigner","ref","QueryClient","QueryClientProvider","ThirdwebSDK","getProviderForNetwork","WagmiProvider","useProvider","CoinbaseWalletConnector","InjectedConnector","WalletConnectConnector","_extends","defaultdAppMeta","defaultWalletConnectors","ThirdwebProvider","sdkOptions","chainRpc","map","walletConnectors","dAppMeta","desiredChainId","storageInterface","queryClient","autoConnect","_supporrtedChains","sc","_rpcUrlMap","reduce","prev","curr","wagmiProps","walletConnectClientMeta","icons","logoUrl","description","walletLinkClientMeta","appName","appLogoUrl","darkMode","isDarkMode","connectorStorageKey","connectors","shimDisconnect","shimChainChangedDisconnect","rpc","clientMeta","qrcode","jsonRpcUrl","readonlySettings","console","error","sdkOptionsWithDefaults","ThirdwebSDKProviderWagmiWrapper","props","ThirdwebSDKProvider","ThirdwebSDKContext","queryClientWithDefault","sdk","_sdk","_chainId","updateSignerOrProvider","ctxValue","_inProvider","client","useSDKContext","ctx","useSDK","useDesiredChainId","useActiveChainId","constants","TW_CACHE_KEY_PREFIX","createCachekey","input","createContractCacheKey","contractAddress","AddressZero","createCacheKeyWithNetwork","cacheKeys","active","concat","invalidateContractAndBalances","invalidateQueries","user","wallet","balance","walletAddress","tokenAddress","contract","type","compilerMetadata","typeAndCompilerMetadata","metadata","extractFunctions","call","functionName","args","events","getEvents","eventName","getAllEvents","nft","get","tokenId","balanceOf","owner","query","params","totalCirculatingSupply","totalCount","owned","drop","getAllUnclaimed","totalUnclaimedSupply","totalClaimedSupply","token","totalSupply","marketplace","getListing","listingId","getAllListings","getActiveListings","getBidBufferBps","auction","getWinningBid","getWinner","extensions","claimConditions","getActive","getAll","getClaimIneligibilityReasons","sales","getRecipient","royalties","getDefaultRoyaltyInfo","platformFees","roles","role","useQueryClient","useLogin","URLSearchParams","location","search","onError","decodeURI","login","cfg","payload","domain","encodedPayload","encodeURIComponent","btoa","encodedRedirectTo","redirectTo","loginRedirect","toString","href","useLogout","logout","useQuery","useUser","isLoading","fetch","json","useBuiltinContract","contractType","getBuiltInContract","useEditionDrop","useEdition","useNFTDrop","useMarketplace","useNFTCollection","usePack","useToken","useTokenDrop","useVote","useSplit","useMultiwrap","useSignatureDrop","useConnect","useWagmiConnect","useDisconnect","optsWithDefaults","reconnectAfterGnosis","err","useAddress","useReadonlySDK","readonlyRpcUrl","detect","detectEnv","userAgent","isAndroid","os","detectOS","toLowerCase","includes","isIOS","navigator","maxTouchPoints","env","isMobile","useMetamask","loading","reject","isMetaMaskInjected","ethereum","isMetaMask","shouldUseWalletConnect","injectedConnector","walletConnectConnector","uri","host","pathname","warn","open","resolve","Error","useWalletConnect","useCoinbaseWallet","useWalletLink","useGnosis","previousConnectorChain","isAddress","useMagic","useChainId","useNetworkMismatch","activeChainId","useWagmiNetwork","defaultChains","defaultL2Chains","IpfsStorage","DEFAULT_IPFS_GATEWAY","DEFAULT_IPFS_RESOLVER_OPTIONS","gatewayUrl","mime","resolveIpfsUri","startsWith","resolveMimeType","mimeType","getType","res","method","ok","headers","has","video","supportsVideoType","document","createElement","canPlayType","shouldRenderVideoTag","audio","supportsAudioType","shouldRenderAudioTag","mergeRefs","refs","forEach","CarbonDocumentUnknown","svg","width","height","viewBox","circle","cx","cy","r","fill","path","d","CarbonDocumentAudio","CarbonPauseFilled","CarbonPlayFilledAlt","useState","useDimensions","PlayButton","onClick","isPlaying","isHovering","setIsHovering","onMouseEnter","onMouseLeave","onMouseDown","onMouseUp","button","style","position","bottom","right","transform","maxWidth","minWidth","aspectRatio","zIndex","backgroundColor","color","display","placeItems","borderRadius","border","cursor","boxShadow","VideoPlayer","forwardRef","src","alt","poster","requireInteraction","controls","restProps","videoRef","playing","setPlaying","muted","setMuted","play","pause","currentTime","div","loop","playsInline","preload","onCanPlay","objectFit","transition","opacity","img","pointerEvents","top","left","AudioPlayer","audioRef","visibility","IframePlayer","observe","elWidth","LinkPlayer","iframe","flexDirection","gap","alignItems","flexWrap","a","rel","textDecoration","target","MediaRenderer","mergedStyle","videoOrImageSrc","useResolvedMediaType","possiblePosterSrc","resolvedUrl","resolvedMimType","enabled","ThirdwebNftMedia","animation_url","image","useQueryWithNetwork","queryKey","queryFn","mergedOptions","useMutation","CONTRACTS_MAP","SmartContract","fetchContractType","resolveContractType","fetchContractCompilerMetadata","getPublisher","fetchCompilerMetadataFromAddress","fetchContractTypeAndCompilerMetadata","fetchQuery","staleTime","Infinity","getContractAbi","contractAbi","abi","getContractFromCombinedTypeAndCompilerMetadata","getContractFromAbi","useContractAbi","contractTypeAndCompilerMetadata","useContractTypeAndCompilerMetadata","useContractType","useContractCompilerMetadata","useContract","useContractMetadata","useContractFunctions","publishedMetadata","useContractData","useContractCall","callParams","onSettled","useAllContractEvents","subscribe","queryEnabled","cacheKey","listenToAllEvents","contractEvent","setQueryData","oldData","findIndex","transaction","transactionHash","logIndex","queryFilter","refetchOnWindowFocus","refetchOnMount","refetchOnReconnect","useContractEvents","Erc721","Erc1155","BigNumber","convertResponseToNFTType","supply","convertResponseToNFTTypeArray","useNFT","from","useNFTs","queryParams","keepPreviousData","useTotalCirculatingSupply","useTotalCount","useOwnedNFTs","ownerWalletAddress","useNFTBalance","useMintNFT","to","mint","useMintNFTSupply","additionalSupplyTo","additionalSupply","useTransferNFT","transfer","amount","useAirdropNFT","addresses","airdrop","useBurnNFT","burn","tokens","useUnclaimedNFTs","useClaimedNFTs","useUnclaimedNFTSupply","useClaimedNFTSupply","getTotalCount","useClaimNFT","claimTo","quantity","checkERC20Allowance","useLazyMint","onProgress","lazyMint","metadatas","ListingType","useListing","useListings","useActiveListings","useWinningBid","useAuctionWinner","winner","message","useBidBuffer","useCreateDirectListing","direct","createListing","useCreateAuctionListing","useMakeBid","makeBid","bid","useBuyNow","Direct","buyoutListing","buyAmount","buyForWallet","useTokenSupply","useTokenBalance","useMintToken","useClaimToken","useTransferToken","useTransferBatchToken","transferBatch","convertedData","toAddress","useBurnToken","useActiveClaimCondition","useClaimConditions","useClaimIneligibilityReasons","UserWallet","useBalance","walletSDK","retry","usePrimarySaleRecipient","useUpdatePrimarySaleRecipient","newRecipient","setRecipient","useRoyaltySettings","useUpdateRoyaltySettings","updatePayload","setDefaultRoyaltyInfo","usePlatformFees","useUpdatePlatformFees","set","useMetadata","useUpdateMetadata","update","useAllRoleMembers","useRoleMembers","useIsAddressRole","contractHasRoles","useSetAllRoleMembers","rolesWithAddresses","setAll","useGrantRole","grant","useRevokeRole","revoke"],"mappings":"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","sourcesContent":["import { ChainId } from \"@thirdweb-dev/sdk/dist/browser\";\nimport { Signer, ethers, utils } from \"ethers\";\nimport invariant from \"tiny-invariant\";\nimport { Chain, Connector, ConnectorData, normalizeChainId } from \"wagmi\";\n\nconst CHAIN_ID_TO_GNOSIS_SERVER_URL = {\n  [ChainId.Mainnet]: \"https://safe-transaction.mainnet.gnosis.io\",\n  [ChainId.Avalanche]: \"https://safe-transaction.avalanche.gnosis.io\",\n  [ChainId.Polygon]: \"https://safe-transaction.polygon.gnosis.io\",\n  [ChainId.Goerli]: \"https://safe-transaction.goerli.gnosis.io\",\n  [ChainId.Rinkeby]: \"https://safe-transaction.rinkeby.gnosis.io\",\n};\n\nexport interface GnosisConnectorArguments {\n  safeAddress: string;\n  safeChainId: number;\n}\n\nconst __IS_SERVER__ = typeof window === \"undefined\";\n\nexport class GnosisSafeConnector extends Connector {\n  id = \"gnosis\";\n  ready = __IS_SERVER__;\n  name = \"Gnosis Safe\";\n  // config\n  public previousConnector?: Connector<any>;\n  private config?: GnosisConnectorArguments;\n  private safeSigner?: Signer;\n\n  constructor(config: { chains?: Chain[] }) {\n    // filter out any chains that gnosis doesnt support before passing to connector\n    config.chains = config.chains?.filter(\n      (c) => c.id in CHAIN_ID_TO_GNOSIS_SERVER_URL,\n    );\n    super({ ...config, options: undefined });\n\n    if (!__IS_SERVER__) {\n      this.ready = true;\n    }\n  }\n\n  async connect(): Promise<ConnectorData<any>> {\n    this.safeSigner = await this.createSafeSigner();\n    const account = await this.getAccount();\n    const provider = await this.getProvider();\n    const id = await this.getChainId();\n    return {\n      account,\n      provider,\n      chain: { id, unsupported: this.isChainUnsupported(id) },\n    };\n  }\n\n  private async createSafeSigner() {\n    const signer = await this.previousConnector?.getSigner();\n    const safeAddress = this.config?.safeAddress;\n    const safeChainId = this.config\n      ?.safeChainId as keyof typeof CHAIN_ID_TO_GNOSIS_SERVER_URL;\n    invariant(\n      signer,\n      \"cannot create Gnosis Safe signer without a personal signer\",\n    );\n    const signerChainId = await signer.getChainId();\n    invariant(\n      signerChainId === safeChainId,\n      \"chainId of personal signer has to match safe chainId\",\n    );\n    invariant(\n      safeAddress,\n      \"safeConfig.safeAddress is required, did you forget to call setSafeConfig?\",\n    );\n    invariant(\n      safeChainId,\n      \"safeConfig.safeChainId is required, did you forget to call setSafeConfig?\",\n    );\n    const serverUrl = CHAIN_ID_TO_GNOSIS_SERVER_URL[safeChainId];\n    invariant(serverUrl, \"Chain not supported\");\n\n    const [safeEthersAdapters, safeCoreSdk, safeEthersLib] = await Promise.all([\n      import(\"@gnosis.pm/safe-ethers-adapters\"),\n      import(\"@gnosis.pm/safe-core-sdk\"),\n      import(\"@gnosis.pm/safe-ethers-lib\"),\n    ]);\n\n    // @ts-expect-error - this is a hack to get the default export\n    const ethAdapter = new safeEthersLib.default.default({ ethers, signer });\n    // @ts-expect-error - this is a hack to get the default export\n    const safe = await safeCoreSdk.default.default.create({\n      ethAdapter,\n      safeAddress,\n    });\n    const service = new safeEthersAdapters.SafeService(serverUrl);\n    return new safeEthersAdapters.SafeEthersSigner(\n      safe,\n      service,\n      signer.provider,\n    );\n  }\n\n  async disconnect(): Promise<void> {\n    this.config = undefined;\n    this.safeSigner = undefined;\n    this.previousConnector = undefined;\n    return undefined;\n  }\n\n  async getAccount(): Promise<string> {\n    const signer = await this.getSigner();\n    return await signer.getAddress();\n  }\n\n  async getChainId(): Promise<number> {\n    return (await this.getSigner()).getChainId();\n  }\n\n  async getProvider() {\n    return (await this.getSigner()).provider;\n  }\n\n  async getSigner(): Promise<Signer> {\n    if (!this.safeSigner) {\n      this.safeSigner = await this.createSafeSigner();\n    }\n    return this.safeSigner;\n  }\n\n  async isAuthorized(): Promise<boolean> {\n    try {\n      const account = await this.getAccount();\n      return !!account;\n    } catch {\n      return false;\n    }\n  }\n\n  protected onAccountsChanged(accounts: string[]) {\n    if (accounts.length === 0) {\n      this.emit(\"disconnect\");\n    } else {\n      this.emit(\"change\", { account: utils.getAddress(accounts[0]) });\n    }\n  }\n\n  protected override isChainUnsupported(chainId: number) {\n    return this.config?.safeChainId\n      ? chainId === this.config.safeChainId\n      : false;\n  }\n\n  protected onChainChanged(chainId: string | number) {\n    const id = normalizeChainId(chainId);\n    const unsupported = this.isChainUnsupported(id);\n    this.emit(\"change\", { chain: { id, unsupported } });\n  }\n\n  protected onDisconnect() {\n    this.emit(\"disconnect\");\n  }\n\n  public setConfiguration(\n    connector: Connector<any>,\n    config: GnosisConnectorArguments,\n  ) {\n    this.previousConnector = connector;\n    this.config = config;\n  }\n}\n","import { providers, utils } from \"ethers\";\nimport type {\n  LoginWithMagicLinkConfiguration,\n  Magic as MagicInstance,\n  MagicSDKAdditionalConfiguration,\n} from \"magic-sdk\";\nimport invariant from \"tiny-invariant\";\nimport { Chain, Connector, normalizeChainId } from \"wagmi\";\n\nexport interface MagicConnectorArguments\n  extends MagicSDKAdditionalConfiguration {\n  apiKey: string;\n  doNotAutoConnect?: boolean;\n  rpcUrls: Record<number, string>;\n}\n\nconst __IS_SERVER__ = typeof window === \"undefined\";\n\nconst LOCAL_STORAGE_KEY = \"--magic-link:configuration\";\n\nexport class MagicConnector extends Connector {\n  readonly id = \"magic\";\n  readonly name = \"Magic\";\n  readonly ready = __IS_SERVER__;\n\n  override options: MagicConnectorArguments;\n  private configuration?: LoginWithMagicLinkConfiguration;\n  public magic?: MagicInstance;\n\n  getConfiguration() {\n    if (__IS_SERVER__) {\n      return undefined;\n    }\n\n    const config = window.localStorage.getItem(LOCAL_STORAGE_KEY);\n    if (config) {\n      this.configuration = JSON.parse(config);\n    }\n    return this.configuration;\n  }\n\n  constructor(config: { chains?: Chain[]; options: MagicConnectorArguments }) {\n    super({ ...config, options: config?.options });\n    this.options = config.options;\n\n    if (!__IS_SERVER__) {\n      this.ready = true;\n      if (this.options.doNotAutoConnect || !this.getConfiguration()) {\n        return;\n      }\n      this.connect(true);\n    }\n  }\n\n  async connect(isAutoConnect?: true) {\n    const { apiKey, doNotAutoConnect, rpcUrls, ...options } = this.options;\n    const configuration = this.getConfiguration();\n\n    try {\n      invariant(\n        configuration,\n        \"did you forget to set the configuration via: setConfiguration()?\",\n      );\n      if (isAutoConnect) {\n        configuration.showUI = false;\n      }\n\n      return import(\"magic-sdk\").then(async (m) => {\n        this.magic = new m.Magic(apiKey, options);\n\n        await this.magic.auth.loginWithMagicLink(configuration);\n        const provider = this.getProvider();\n        if (provider.on) {\n          provider.on(\"accountsChanged\", this.onAccountsChanged);\n          provider.on(\"chainChanged\", this.onChainChanged);\n          provider.on(\"disconnect\", this.onDisconnect);\n        }\n        const account = await this.getAccount();\n        const id = await this.getChainId();\n        return {\n          account,\n          provider,\n          chain: { id, unsupported: this.isChainUnsupported(id) },\n        };\n      });\n    } catch (e) {\n      if (!isAutoConnect) {\n        throw e;\n      }\n      return {\n        account: undefined,\n        provider: undefined,\n        chain: undefined,\n      };\n    }\n  }\n  async disconnect() {\n    const provider = this.getProvider();\n    if (provider?.removeListener) {\n      provider.removeListener(\"accountsChanged\", this.onAccountsChanged);\n      provider.removeListener(\"chainChanged\", this.onChainChanged);\n      provider.removeListener(\"disconnect\", this.onDisconnect);\n    }\n    this.setConfiguration(undefined);\n  }\n\n  override async switchChain(chainId: number) {\n    invariant(!this.isChainUnsupported(chainId), \"chain is not supported\");\n    const provider = this.getProvider();\n    if (provider?.removeListener) {\n      provider.removeListener(\"accountsChanged\", this.onAccountsChanged);\n      provider.removeListener(\"chainChanged\", this.onChainChanged);\n      provider.removeListener(\"disconnect\", this.onDisconnect);\n    }\n\n    this.options.network = {\n      chainId,\n      rpcUrl: this.options.rpcUrls[chainId],\n    };\n    await this.connect();\n    this.onChainChanged(chainId);\n    return this.chains.find((c) => c.id === chainId);\n  }\n\n  async getAccount() {\n    const signer = await this.getSigner();\n    return await signer.getAddress();\n  }\n  async getChainId() {\n    const signer = await this.getSigner();\n    return await signer.getChainId();\n  }\n  getProvider() {\n    invariant(this.magic, \"connector is not initialized\");\n    return new providers.Web3Provider(\n      this.magic.rpcProvider as unknown as providers.ExternalProvider,\n    );\n  }\n  async getSigner() {\n    if (!this.magic) {\n      await this.connect();\n    }\n    return this.getProvider().getSigner();\n  }\n  async isAuthorized() {\n    try {\n      const account = await this.getAccount();\n      return !!account;\n    } catch {\n      return false;\n    }\n  }\n\n  protected onAccountsChanged(accounts: string[]) {\n    if (accounts.length === 0) {\n      this.emit(\"disconnect\");\n    } else {\n      this.emit(\"change\", { account: utils.getAddress(accounts[0]) });\n    }\n  }\n\n  protected override isChainUnsupported(chainId: number) {\n    return !this.chains.some((x) => x.id === chainId);\n  }\n\n  protected onChainChanged(chainId: string | number) {\n    const id = normalizeChainId(chainId);\n    const unsupported = this.isChainUnsupported(id);\n    this.emit(\"change\", { chain: { id, unsupported } });\n  }\n\n  protected onDisconnect() {\n    this.emit(\"disconnect\");\n  }\n\n  public setConfiguration(configuration?: LoginWithMagicLinkConfiguration) {\n    if (configuration) {\n      this.configuration = configuration;\n      window.localStorage.setItem(\n        LOCAL_STORAGE_KEY,\n        JSON.stringify(configuration),\n      );\n    } else {\n      this.configuration = undefined;\n      window.localStorage.removeItem(LOCAL_STORAGE_KEY);\n    }\n  }\n}\n","import { NATIVE_TOKENS } from \"@thirdweb-dev/sdk\";\nimport { ChainId } from \"@thirdweb-dev/sdk/dist/browser\";\nimport type { Chain as WagmiChain } from \"wagmi\";\n\nexport type Chain = WagmiChain;\nconst chain: Record<string, Chain> = {\n  mainnet: {\n    id: ChainId.Mainnet,\n    name: \"Ethereum Mainnet\",\n    nativeCurrency: NATIVE_TOKENS[ChainId.Mainnet],\n    rpcUrls: [\"https://mainnet.infura.io/v3/9aa3d95b3bc440fa88ea12eaa4456161\"],\n    blockExplorers: [\n      {\n        name: \"Etherscan\",\n        url: \"https://etherscan.io\",\n      },\n    ],\n  },\n  rinkeby: {\n    id: ChainId.Rinkeby,\n    name: \"Rinkeby\",\n    nativeCurrency: NATIVE_TOKENS[ChainId.Rinkeby],\n    rpcUrls: [\"https://rinkeby.infura.io/v3/9aa3d95b3bc440fa88ea12eaa4456161\"],\n    blockExplorers: [\n      {\n        name: \"Etherscan\",\n        url: \"https://rinkeby.etherscan.io\",\n      },\n    ],\n    testnet: true,\n  },\n  goerli: {\n    id: ChainId.Goerli,\n    name: \"Goerli\",\n    nativeCurrency: NATIVE_TOKENS[ChainId.Goerli],\n    rpcUrls: [\"https://goerli.infura.io/v3/9aa3d95b3bc440fa88ea12eaa4456161\"],\n    blockExplorers: [\n      {\n        name: \"Etherscan\",\n        url: \"https://goerli.etherscan.io\",\n      },\n    ],\n    testnet: true,\n  },\n  polygonMainnet: {\n    id: ChainId.Polygon,\n    name: \"Polygon Mainnet\",\n    nativeCurrency: NATIVE_TOKENS[ChainId.Polygon],\n    rpcUrls: [\n      \"https://polygon-rpc.com\",\n      \"https://rpc-mainnet.matic.network\",\n      \"https://matic-mainnet.chainstacklabs.com\",\n      \"https://rpc-mainnet.maticvigil.com\",\n      \"https://rpc-mainnet.matic.quiknode.pro\",\n      \"https://matic-mainnet-full-rpc.bwarelabs.com\",\n    ],\n    blockExplorers: [\n      {\n        name: \"Polygonscan\",\n        url: \"https://polygonscan.com\",\n      },\n    ],\n  },\n  polygonTestnetMumbai: {\n    id: ChainId.Mumbai,\n    name: \"Mumbai\",\n    nativeCurrency: NATIVE_TOKENS[ChainId.Mumbai],\n    rpcUrls: [\n      \"https://matic-mumbai.chainstacklabs.com\",\n      \"https://rpc-mumbai.maticvigil.com\",\n      \"https://matic-testnet-archive-rpc.bwarelabs.com\",\n    ],\n    blockExplorers: [\n      {\n        name: \"PolygonScan\",\n        url: \"https://mumbai.polygonscan.com\",\n      },\n    ],\n    testnet: true,\n  },\n  avalanche: {\n    id: ChainId.Avalanche,\n    name: \"Avalanche\",\n    nativeCurrency: NATIVE_TOKENS[ChainId.Avalanche],\n    rpcUrls: [\n      \"https://api.avax.network/ext/bc/C/rpc\",\n      \"https://rpc.ankr.com/avalanche\",\n    ],\n    blockExplorers: [\n      {\n        name: \"SnowTrace\",\n        url: \"https://snowtrace.io/\",\n      },\n    ],\n    testnet: false,\n  },\n  avalancheFujiTestnet: {\n    id: ChainId.AvalancheFujiTestnet,\n    name: \"Avalanche Fuji Testnet\",\n    nativeCurrency: NATIVE_TOKENS[ChainId.AvalancheFujiTestnet],\n    rpcUrls: [\"https://api.avax-test.network/ext/bc/C/rpc\"],\n    blockExplorers: [\n      {\n        name: \"SnowTrace\",\n        url: \"https://testnet.snowtrace.io/\",\n      },\n    ],\n    testnet: true,\n  },\n  fantom: {\n    id: ChainId.Fantom,\n    name: \"Fantom Opera\",\n    nativeCurrency: NATIVE_TOKENS[ChainId.Fantom],\n    rpcUrls: [\"https://rpc.ftm.tools\"],\n    blockExplorers: [\n      {\n        name: \"FTMscan\",\n        url: \"https://ftmscan.com/\",\n      },\n    ],\n    testnet: false,\n  },\n  fantomTestnet: {\n    id: ChainId.FantomTestnet,\n    name: \"Fantom Testnet\",\n    nativeCurrency: NATIVE_TOKENS[ChainId.FantomTestnet],\n    rpcUrls: [\"https://rpc.testnet.fantom.network\"],\n    blockExplorers: [\n      {\n        name: \"FTMscan\",\n        url: \"https://testnet.ftmscan.com/\",\n      },\n    ],\n    testnet: false,\n  },\n  optimism: {\n    id: ChainId.Optimism,\n    name: \"Optimism\",\n    nativeCurrency: NATIVE_TOKENS[ChainId.Optimism],\n    rpcUrls: [\"https://mainnet.optimism.io\"],\n    blockExplorers: [\n      {\n        name: \"Etherscan\",\n        url: \"https://optimistic.etherscan.io/\",\n      },\n    ],\n    testnet: false,\n  },\n  optimismTestnet: {\n    id: ChainId.OptimismTestnet,\n    name: \"Optimism Kovan\",\n    nativeCurrency: NATIVE_TOKENS[ChainId.OptimismTestnet],\n    rpcUrls: [\"https://kovan.optimism.io\"],\n    blockExplorers: [\n      {\n        name: \"Etherscan\",\n        url: \"https://kovan-optimistic.etherscan.io/\",\n      },\n    ],\n    testnet: true,\n  },\n  arbitrum: {\n    id: ChainId.Arbitrum,\n    name: \"Arbitrum One\",\n    nativeCurrency: NATIVE_TOKENS[ChainId.Arbitrum],\n    rpcUrls: [\"https://arb1.arbitrum.io/rpc\"],\n    blockExplorers: [\n      {\n        name: \"Arbiscan\",\n        url: \"https://arbiscan.io/\",\n      },\n    ],\n    testnet: false,\n  },\n  arbitrumTestnet: {\n    id: ChainId.ArbitrumTestnet,\n    name: \"Arbitrum Rinkeby\",\n    nativeCurrency: NATIVE_TOKENS[ChainId.ArbitrumTestnet],\n    rpcUrls: [\"https://rinkeby.arbitrum.io/rpc\"],\n    blockExplorers: [\n      {\n        name: \"Arbiscan\",\n        url: \"https://testnet.arbiscan.io/\",\n      },\n    ],\n    testnet: true,\n  },\n};\n\nexport const defaultSupportedChains = Object.values(chain) as Chain[];\n\nexport type SupportedChainId = typeof defaultSupportedChains[number][\"id\"];\n\nexport type SupportedChain = SupportedChainId | Chain;\n","import React, {\n  PropsWithChildren,\n  createContext,\n  useContext,\n  useMemo,\n} from \"react\";\n\n/**\n * The configuration to use the react SDK with an [auth](https://portal.thirdweb.com/auth) server.\n *\n * @beta\n */\nexport interface ThirdwebAuthConfig {\n  /**\n   * The backend URL of the authentication endoints. For example, if your endpoints are\n   * at `/api/auth/login`, `/api/auth/logout`, etc. then this should be set to `/api/auth`.\n   */\n  authUrl: string;\n\n  /**\n   * The frontend domain used to generate the login payload.\n   * This domain should match the domain used on your auth backend.\n   */\n  domain: string;\n\n  /**\n   * The URL to redirect to after a succesful login.\n   */\n  loginRedirect?: string;\n}\n\nconst ThirdwebAuthConfigContext = createContext<ThirdwebAuthConfig | undefined>(\n  undefined,\n);\n\nexport const ThirdwebAuthConfigProvider: React.FC<\n  PropsWithChildren<{ value?: ThirdwebAuthConfig }>\n> = ({ value, children }) => {\n  // Remove trailing slash from URL if present\n  const authConfig = useMemo(\n    () =>\n      value\n        ? {\n            ...value,\n            authUrl: value.authUrl.replace(/\\/$/, \"\"),\n          }\n        : undefined,\n    [value],\n  );\n  return (\n    <ThirdwebAuthConfigContext.Provider value={authConfig}>\n      {children}\n    </ThirdwebAuthConfigContext.Provider>\n  );\n};\n\nexport function useThirdwebAuthConfig() {\n  return useContext(ThirdwebAuthConfigContext);\n}\n","import {\n  Chain,\n  SupportedChainId,\n  defaultSupportedChains,\n} from \"../constants/chain\";\nimport { ChainId } from \"@thirdweb-dev/sdk/dist/browser\";\nimport React, { PropsWithChildren, createContext, useContext } from \"react\";\n\ninterface ThirdwebConfigContext {\n  rpcUrlMap: Record<SupportedChainId | number, string>;\n  supportedChains: Chain[];\n}\n\nexport const defaultChainRpc: Record<SupportedChainId | number, string> = {\n  [ChainId.Mainnet]: \"mainnet\",\n  [ChainId.Rinkeby]: \"rinkeby\",\n  [ChainId.Goerli]: \"goerli\",\n  [ChainId.Polygon]: \"polygon\",\n  [ChainId.Mumbai]: \"mumbai\",\n  [ChainId.Fantom]: \"fantom\",\n  [ChainId.Avalanche]: \"avalanche\",\n};\n\nconst ThirdwebConfigContext = createContext<ThirdwebConfigContext>({\n  rpcUrlMap: defaultChainRpc,\n  supportedChains: defaultSupportedChains,\n});\n\nexport const ThirdwebConfigProvider: React.FC<\n  PropsWithChildren<{\n    value: ThirdwebConfigContext;\n  }>\n> = ({ value, children }) => (\n  <ThirdwebConfigContext.Provider value={value}>\n    {children}\n  </ThirdwebConfigContext.Provider>\n);\n\nexport function useThirdwebConfigContext() {\n  return useContext(ThirdwebConfigContext);\n}\n","import { Signer } from \"ethers\";\nimport { useEffect, useRef } from \"react\";\nimport { useAccount, useNetwork, useSigner as useWagmiSigner } from \"wagmi\";\n\n/**\n *\n * @internal\n */\nexport function useSigner() {\n  const [signer, getSigner] = useWagmiSigner();\n  const [account] = useAccount();\n  const [network] = useNetwork();\n\n  const _getSignerPromise = useRef<ReturnType<typeof getSigner> | null>(null);\n\n  const address = account.data?.address;\n  const chainId = network.data.chain?.id;\n\n  const previousAddress = usePrevious(account.data?.address);\n  const previousChainId = usePrevious(network.data?.chain?.id);\n\n  useEffect(() => {\n    if (address !== previousAddress || chainId !== previousChainId) {\n      if (!_getSignerPromise.current) {\n        return;\n      } else {\n        _getSignerPromise.current = getSigner().finally(() => {\n          _getSignerPromise.current = null;\n        });\n      }\n    }\n  }, [address, chainId, previousAddress, previousChainId]);\n\n  return Signer.isSigner(signer.data) ? signer.data : undefined;\n}\n\nfunction usePrevious<TVal>(value: TVal): TVal | undefined {\n  // The ref object is a generic container whose current property is mutable ...\n  // ... and can hold any value, similar to an instance property on a class\n  const ref = useRef<TVal>();\n  // Store current value in ref\n  useEffect(() => {\n    ref.current = value;\n  }, [value]); // Only re-run if value changes\n  // Return previous value (happens before update in useEffect above)\n  return ref.current;\n}\n","import {\n  GnosisConnectorArguments,\n  GnosisSafeConnector,\n} from \"./connectors/gnosis-safe\";\nimport { MagicConnector, MagicConnectorArguments } from \"./connectors/magic\";\nimport {\n  Chain,\n  SupportedChain,\n  defaultSupportedChains,\n} from \"./constants/chain\";\nimport {\n  ThirdwebAuthConfig,\n  ThirdwebAuthConfigProvider,\n} from \"./contexts/thirdweb-auth\";\nimport {\n  ThirdwebConfigProvider,\n  defaultChainRpc,\n} from \"./contexts/thirdweb-config\";\nimport { useSigner } from \"./hooks/useSigner\";\nimport { QueryClient, QueryClientProvider } from \"@tanstack/react-query\";\nimport {\n  ChainOrRpc,\n  IStorage,\n  SDKOptions,\n  SUPPORTED_CHAIN_ID,\n  SignerOrProvider,\n  ThirdwebSDK,\n  getProviderForNetwork,\n} from \"@thirdweb-dev/sdk/dist/browser\";\nimport { SDKOptionsOutput } from \"@thirdweb-dev/sdk/dist/src/schema\";\nimport { Signer } from \"ethers\";\nimport React, { createContext, useEffect, useMemo } from \"react\";\nimport invariant from \"tiny-invariant\";\nimport {\n  WagmiProvider,\n  ProviderProps as WagmiproviderProps,\n  useProvider,\n} from \"wagmi\";\nimport { CoinbaseWalletConnector } from \"wagmi/connectors/coinbaseWallet\";\nimport { InjectedConnector } from \"wagmi/connectors/injected\";\nimport { WalletConnectConnector } from \"wagmi/connectors/walletConnect\";\n\n/**\n * @internal\n */\nexport type InjectedConnectorType =\n  | \"injected\"\n  | \"metamask\"\n  | { name: \"injected\" | \"metamask\"; options?: InjectedConnector[\"options\"] };\n\n/**\n * @internal\n */\nexport type WalletConnectConnectorType =\n  | \"walletConnect\"\n  | { name: \"walletConnect\"; options: WalletConnectConnector[\"options\"] };\n\n/**\n * @internal\n */\nexport type WalletLinkConnectorType =\n  | \"walletLink\"\n  | \"coinbase\"\n  | {\n      name: \"walletLink\" | \"coinbase\";\n      options: CoinbaseWalletConnector[\"options\"];\n    };\n\n/**\n * @internal\n */\nexport type MagicConnectorType =\n  | \"magic\"\n  | {\n      name: \"magic\";\n      options: Omit<MagicConnectorArguments, \"network\">;\n    };\n\n/**\n * @internal\n */\nexport type GnosisConnectorType =\n  | \"gnosis\"\n  | {\n      name: \"gnosis\";\n      options: GnosisConnectorArguments;\n    };\n\n/**\n * @internal\n */\nexport type WalletConnector =\n  | InjectedConnectorType\n  | WalletConnectConnectorType\n  | WalletLinkConnectorType\n  | MagicConnectorType\n  | GnosisConnectorType;\n\n/**\n * @internal\n */\nexport type ChainRpc<TSupportedChain extends SupportedChain> = Record<\n  TSupportedChain extends Chain ? TSupportedChain[\"id\"] : TSupportedChain,\n  string\n>;\n/**\n * the metadata to pass to wallet connection dialog (may show up during the wallet-connection process)\n * @remarks this is only used for wallet connect and wallet link, metamask does not support it\n * @public\n */\nexport interface DAppMetaData {\n  /**\n   * the name of your app\n   */\n  name: string;\n  /**\n   * optional - a description of your app\n   */\n  description?: string;\n  /**\n   * optional - a url that points to a logo (or favicon) of your app\n   */\n  logoUrl?: string;\n  /**\n   * optional - the url where your app is hosted\n   */\n  url?: string;\n  /**\n   * optional - whether to show the connect dialog in darkmode or not\n   */\n  isDarkMode?: boolean;\n}\n\n/**\n * The possible props for the ThirdwebProvider.\n */\nexport interface ThirdwebProviderProps<\n  TSupportedChain extends SupportedChain = SupportedChain,\n> {\n  /**\n   * The {@link SDKOptions | Thirdweb SDK Options} to pass to the thirdweb SDK\n   * comes with sensible defaults\n   */\n  sdkOptions?: SDKOptions;\n  /**\n   * An array of chainIds or {@link Chain} objects that the dApp supports\n   * If not provided, all chains supported by the SDK will be supported by default\n   */\n  supportedChains?: TSupportedChain[];\n  /**\n   * An array of connector types (strings) or wallet connector objects that the dApp supports\n   * If not provided, will default to metamask (injected), wallet connect and walletlink (coinbase wallet) with sensible defaults\n   */\n  walletConnectors?: WalletConnector[];\n  /**\n   * A partial map of chainIds to rpc urls to use for certain chains\n   * If not provided, will default to the rpcUrls of the chain objects for the supported chains\n   */\n  chainRpc?: Partial<ChainRpc<TSupportedChain>>;\n  /**\n   * Metadata to pass to wallet connect and walletlink wallet connect. (Used to show *which* dApp is being connected to in mobile wallets that support it)\n   * Defaults to just the name being passed as `thirdweb powered dApp`.\n   */\n  dAppMeta?: DAppMetaData;\n  /**\n   * The chainId that your dApp is running on.\n   * While this *can* be `undefined` it is required to be passed. Passing `undefined` will cause no SDK to be instantiated.\n   * When passing a chainId, it **must** be part of the `supportedChains` array.\n   */\n  desiredChainId: TSupportedChain extends Chain\n    ? TSupportedChain[\"id\"]\n    : TSupportedChain | undefined;\n\n  /**\n   * The configuration used for thirdweb auth usage. Enables users to login\n   * to backends with their wallet.\n   * @beta\n   */\n  authConfig?: ThirdwebAuthConfig;\n\n  /**\n   * The storage interface to use with the sdk.\n   */\n  storageInterface?: IStorage;\n\n  /**\n   * The react-query client to use. (Defaults to a default client.)\n   * @beta\n   */\n  queryClient?: QueryClient;\n\n  /**\n   * Whether or not to attempt auto-connect to a wallet.\n   */\n  autoConnect?: boolean;\n}\n\n// SDK handles this under the hood for us\n\nconst defaultdAppMeta: DAppMetaData = {\n  name: \"thirdweb powered dApp\",\n};\n\nconst defaultWalletConnectors: Required<\n  ThirdwebProviderProps[\"walletConnectors\"]\n> = [\"metamask\", \"walletConnect\", \"walletLink\"];\n\n/**\n *\n * The `<ThirdwebProvider />` component lets you control what networks you want users to connect to, what types of wallets can connect to your app, and the settings for the [Typescript SDK](https://docs.thirdweb.com/typescript).\n *\n * @example\n * You can wrap your application with the provider as follows:\n *\n * ```jsx title=\"App.jsx\"\n * import { ThirdwebProvider, ChainId } from \"@thirdweb-dev/react\";\n *\n * const App = () => {\n *   return (\n *     <ThirdwebProvider desiredChainId={ChainId.Mainnet}>\n *       <YourApp />\n *     </ThirdwebProvider>\n *   );\n * };\n * ```\n *\n * @public\n *\n */\nexport const ThirdwebProvider = <\n  TSupportedChain extends SupportedChain = SupportedChain,\n>({\n  sdkOptions,\n  chainRpc = defaultChainRpc,\n  supportedChains = defaultSupportedChains.map(\n    (c) => c.id,\n  ) as TSupportedChain[],\n  walletConnectors = defaultWalletConnectors,\n  dAppMeta = defaultdAppMeta,\n  desiredChainId,\n  authConfig,\n  storageInterface,\n  queryClient,\n  autoConnect = true,\n  children,\n}: React.PropsWithChildren<ThirdwebProviderProps<TSupportedChain>>) => {\n  // construct the wagmi options\n\n  const _supporrtedChains = useMemo(() => {\n    return supportedChains\n      .map((c) => {\n        if (typeof c === \"number\") {\n          return defaultSupportedChains.find((sc) => sc.id === c);\n        }\n        return c as Chain;\n      })\n      .filter((c) => c !== undefined) as Chain[];\n  }, [supportedChains]);\n\n  const _rpcUrlMap = useMemo(() => {\n    return _supporrtedChains.reduce((prev, curr) => {\n      prev[curr.id] =\n        curr.id in chainRpc\n          ? (getProviderForNetwork(\n              chainRpc[curr.id as keyof ChainRpc<TSupportedChain>] ||\n                curr.rpcUrls[0],\n            ) as string)\n          : curr.rpcUrls[0];\n      return prev;\n    }, {} as Record<number, string>);\n  }, [chainRpc, _supporrtedChains]);\n\n  const wagmiProps: WagmiproviderProps = useMemo(() => {\n    const walletConnectClientMeta = {\n      name: dAppMeta.name,\n      url: dAppMeta.url || \"\",\n      icons: [dAppMeta.logoUrl || \"\"],\n      description: dAppMeta.description || \"\",\n    };\n\n    const walletLinkClientMeta = {\n      appName: dAppMeta.name,\n      appLogoUrl: dAppMeta.logoUrl,\n      darkMode: dAppMeta.isDarkMode,\n    };\n\n    return {\n      autoConnect,\n      connectorStorageKey: \"tw:provider:connectors\",\n      connectors: ({ chainId }: { chainId?: number }) => {\n        return walletConnectors\n          .map((connector) => {\n            // injected connector\n            if (\n              (typeof connector === \"string\" &&\n                (connector === \"injected\" || connector === \"metamask\")) ||\n              (typeof connector === \"object\" &&\n                (connector.name === \"injected\" ||\n                  connector.name === \"metamask\"))\n            ) {\n              return new InjectedConnector({\n                options:\n                  typeof connector === \"string\"\n                    ? { shimDisconnect: true, shimChainChangedDisconnect: true }\n                    : connector.options,\n                chains: _supporrtedChains,\n              });\n            }\n            if (\n              (typeof connector === \"string\" &&\n                connector === \"walletConnect\") ||\n              (typeof connector === \"object\" &&\n                connector.name === \"walletConnect\")\n            ) {\n              return new WalletConnectConnector({\n                options:\n                  typeof connector === \"string\"\n                    ? {\n                        chainId,\n                        rpc: _rpcUrlMap,\n                        clientMeta: walletConnectClientMeta,\n                        qrcode: true,\n                      }\n                    : {\n                        chainId,\n                        rpc: _rpcUrlMap,\n                        clientMeta: walletConnectClientMeta,\n                        qrcode: true,\n                        ...connector.options,\n                      },\n                chains: _supporrtedChains,\n              });\n            }\n            if (\n              (typeof connector === \"string\" &&\n                (connector === \"coinbase\" || connector === \"walletLink\")) ||\n              (typeof connector === \"object\" &&\n                (connector.name === \"coinbase\" ||\n                  connector.name === \"walletLink\"))\n            ) {\n              const jsonRpcUrl = _rpcUrlMap[chainId || desiredChainId || 1];\n              return new CoinbaseWalletConnector({\n                chains: _supporrtedChains,\n                options:\n                  typeof connector === \"string\"\n                    ? {\n                        ...walletLinkClientMeta,\n                        jsonRpcUrl,\n                      }\n                    : {\n                        ...walletLinkClientMeta,\n                        jsonRpcUrl,\n                        ...connector.options,\n                      },\n              });\n            }\n            if (typeof connector === \"object\" && connector.name === \"magic\") {\n              const jsonRpcUrl = _rpcUrlMap[chainId || desiredChainId || 1];\n              return new MagicConnector({\n                chains: _supporrtedChains,\n                options: {\n                  ...connector.options,\n                  network: { rpcUrl: jsonRpcUrl, chainId: desiredChainId || 1 },\n                  rpcUrls: _rpcUrlMap,\n                },\n              });\n            }\n            if (\n              (typeof connector === \"string\" && connector === \"gnosis\") ||\n              (typeof connector === \"object\" && connector.name === \"gnosis\")\n            ) {\n              return new GnosisSafeConnector({\n                chains: _supporrtedChains,\n              });\n            }\n            return null;\n          })\n          .filter((c) => c !== null);\n      },\n    } as WagmiproviderProps;\n  }, [walletConnectors, _supporrtedChains, dAppMeta]);\n\n  const readonlySettings: SDKOptionsOutput[\"readonlySettings\"] = useMemo(() => {\n    if (\n      sdkOptions?.readonlySettings?.rpcUrl &&\n      sdkOptions?.readonlySettings?.chainId\n    ) {\n      return sdkOptions.readonlySettings;\n    }\n    if (!desiredChainId) {\n      return undefined;\n    }\n    let rpcUrl = _rpcUrlMap[desiredChainId as keyof typeof _rpcUrlMap];\n    try {\n      rpcUrl = getProviderForNetwork(rpcUrl) as string;\n    } catch (e) {\n      console.error(\n        `failed to configure rpc url for chain: \"${desiredChainId}\". Did you forget to pass \"desiredChainId\" to the <ThirdwebProvider /> component?`,\n      );\n      // cannot set readonly without a valid rpc url\n      return undefined;\n    }\n    return {\n      chainId: desiredChainId,\n      rpcUrl,\n    };\n  }, [_rpcUrlMap, desiredChainId]);\n\n  const sdkOptionsWithDefaults = useMemo(() => {\n    const opts: SDKOptions = sdkOptions;\n    return {\n      ...opts,\n      readonlySettings,\n    };\n  }, [sdkOptions, readonlySettings]);\n\n  return (\n    <ThirdwebConfigProvider\n      value={{\n        rpcUrlMap: _rpcUrlMap,\n        supportedChains: _supporrtedChains,\n      }}\n    >\n      <WagmiProvider {...wagmiProps}>\n        <ThirdwebSDKProviderWagmiWrapper\n          queryClient={queryClient}\n          desiredChainId={desiredChainId}\n          sdkOptions={sdkOptionsWithDefaults}\n          storageInterface={storageInterface}\n          authConfig={authConfig}\n        >\n          {children}\n        </ThirdwebSDKProviderWagmiWrapper>\n      </WagmiProvider>\n    </ThirdwebConfigProvider>\n  );\n};\n\nexport interface ThirdwebSDKProviderWagmiWrapper\n  extends Pick<\n    ThirdwebProviderProps,\n    \"desiredChainId\" | \"sdkOptions\" | \"storageInterface\" | \"authConfig\"\n  > {\n  signer?: Signer;\n  provider: ChainOrRpc | SignerOrProvider;\n  queryClient?: QueryClient;\n}\n\nconst ThirdwebSDKProviderWagmiWrapper: React.FC<\n  React.PropsWithChildren<\n    Omit<ThirdwebSDKProviderWagmiWrapper, \"signer\" | \"provider\">\n  >\n> = ({ children, ...props }) => {\n  const provider = useProvider();\n  const signer = useSigner();\n  return (\n    <ThirdwebSDKProvider signer={signer} provider={provider} {...props}>\n      {children}\n    </ThirdwebSDKProvider>\n  );\n};\n\ninterface SDKContext {\n  sdk?: ThirdwebSDK;\n  _inProvider?: true;\n  desiredChainId: number;\n}\n\nconst ThirdwebSDKContext = createContext<SDKContext>({ desiredChainId: -1 });\n\nexport interface ThirdwebSDKProviderProps\n  extends Omit<ThirdwebSDKProviderWagmiWrapper, \"queryClient\"> {\n  queryClient?: QueryClient;\n}\n\n/**\n * A barebones wrapper around the Thirdweb SDK.\n *\n * You can use this in order to be able to pass a provider & signer directly to the SDK.\n *\n * @remarks Utilizing this provider will mean hooks for wallet management are not available, if you need those please use the {@link ThirdwebProvider} instead.\n *\n * @beta\n */\nexport const ThirdwebSDKProvider: React.FC<\n  React.PropsWithChildren<ThirdwebSDKProviderProps>\n> = ({\n  sdkOptions,\n  desiredChainId,\n  storageInterface,\n  provider,\n  signer,\n  queryClient,\n  authConfig,\n  children,\n}) => {\n  const queryClientWithDefault: QueryClient = useMemo(() => {\n    return queryClient ? queryClient : new QueryClient();\n  }, [queryClient]);\n\n  const sdk = useMemo(() => {\n    if (!desiredChainId || typeof window === \"undefined\") {\n      return undefined;\n    }\n    const _sdk = new ThirdwebSDK(provider, sdkOptions, storageInterface);\n    (_sdk as any)._chainId = desiredChainId;\n    return _sdk;\n  }, [provider, sdkOptions, storageInterface, desiredChainId]);\n\n  useEffect(() => {\n    if (signer && sdk && (sdk as any)._chainId === desiredChainId) {\n      sdk.updateSignerOrProvider(signer);\n    }\n  }, [signer, sdk, desiredChainId]);\n\n  const ctxValue = useMemo(\n    () => ({\n      sdk,\n      desiredChainId: desiredChainId || -1,\n      _inProvider: true as const,\n    }),\n    [sdk],\n  );\n\n  return (\n    <ThirdwebAuthConfigProvider value={authConfig}>\n      <QueryClientProvider client={queryClientWithDefault}>\n        <ThirdwebSDKContext.Provider value={ctxValue}>\n          {children}\n        </ThirdwebSDKContext.Provider>\n      </QueryClientProvider>\n    </ThirdwebAuthConfigProvider>\n  );\n};\n\n/**\n * @internal\n */\nfunction useSDKContext(): SDKContext {\n  const ctx = React.useContext(ThirdwebSDKContext);\n  invariant(\n    ctx._inProvider,\n    \"useSDK must be called from within a ThirdwebProvider, did you forget to wrap your app in a <ThirdwebProvider />?\",\n  );\n  return ctx;\n}\n\n/**\n *\n * @returns {@link ThirdwebSDK}\n * Access the instance of the thirdweb SDK created by the ThirdwebProvider\n * to call methods using the connected wallet on the desiredChainId.\n * @example\n * ```javascript\n * const sdk = useSDK();\n * ```\n */\nexport function useSDK(): ThirdwebSDK | undefined {\n  const { sdk } = useSDKContext();\n  return sdk;\n}\n\n/**\n * @internal\n */\nexport function useDesiredChainId(): number {\n  const { desiredChainId } = useSDKContext();\n  return desiredChainId;\n}\n\n/**\n * @internal\n */\nexport function useActiveChainId(): SUPPORTED_CHAIN_ID | undefined {\n  const sdk = useSDK();\n  return (sdk as any)?._chainId;\n}\n","import { SupportedChainId } from \"../constants/chain\";\nimport { ContractAddress, RequiredParam, WalletAddress } from \"../types\";\nimport { QueryClient, QueryKey } from \"@tanstack/react-query\";\nimport type {\n  MarketplaceFilter,\n  QueryAllParams,\n  SUPPORTED_CHAIN_ID,\n} from \"@thirdweb-dev/sdk/dist/browser\";\nimport { BigNumberish, constants } from \"ethers\";\n\nconst TW_CACHE_KEY_PREFIX = \"tw-cache\";\n\n/**\n * @internal\n */\nfunction createCachekey(input: QueryKey): QueryKey {\n  if (input[0] === TW_CACHE_KEY_PREFIX) {\n    return input;\n  }\n  return [TW_CACHE_KEY_PREFIX, ...input];\n}\n\n/**\n * @internal\n */\nexport function createContractCacheKey(\n  contractAddress: string = constants.AddressZero,\n  input: QueryKey = [],\n): QueryKey {\n  return createCachekey([\"contract\", contractAddress, ...input]);\n}\n\n/**\n @internal\n */\nexport function createCacheKeyWithNetwork(\n  input: QueryKey,\n  chainId: RequiredParam<SUPPORTED_CHAIN_ID>,\n): QueryKey {\n  return cacheKeys.network.active(chainId).concat(input);\n}\n\n/**\n * @internal\n */\nexport function invalidateContractAndBalances(\n  queryClient: QueryClient,\n  contractAddress: RequiredParam<ContractAddress>,\n  chainId: RequiredParam<SUPPORTED_CHAIN_ID>,\n): Promise<unknown> {\n  return Promise.all([\n    queryClient.invalidateQueries(\n      createCacheKeyWithNetwork(\n        createContractCacheKey(contractAddress),\n        chainId,\n      ),\n    ),\n    queryClient.invalidateQueries(\n      createCacheKeyWithNetwork(createCachekey([\"balance\"]), chainId),\n    ),\n  ]);\n}\n\n/**\n @internal\n */\nexport const cacheKeys = {\n  auth: {\n    user: () => createCachekey([\"user\"]),\n  },\n  network: {\n    active: (chainId: RequiredParam<SUPPORTED_CHAIN_ID>) =>\n      createCachekey([\"chainId\", chainId]),\n  },\n  wallet: {\n    balance: (\n      chainId: SupportedChainId,\n      walletAddress: RequiredParam<WalletAddress>,\n      tokenAddress?: ContractAddress,\n    ) =>\n      createCacheKeyWithNetwork(\n        createCachekey([\"balance\", { walletAddress, tokenAddress }]),\n        chainId,\n      ),\n  },\n  contract: {\n    type: (contractAddress: RequiredParam<ContractAddress>) =>\n      createContractCacheKey(contractAddress, [\"contract-type\"]),\n    compilerMetadata: (contractAddress: RequiredParam<ContractAddress>) =>\n      createContractCacheKey(contractAddress, [\"publish-metadata\"]),\n    typeAndCompilerMetadata: (\n      contractAddress: RequiredParam<ContractAddress>,\n    ) =>\n      createContractCacheKey(contractAddress, [\"contract-type-and-metadata\"]),\n    metadata: (contractAddress: RequiredParam<ContractAddress>) =>\n      createContractCacheKey(contractAddress, [\"metadata\"]),\n    extractFunctions: (contractAddress: RequiredParam<ContractAddress>) =>\n      createContractCacheKey(contractAddress, [\"extractFunctions\"]),\n    call: (\n      contractAddress: RequiredParam<ContractAddress>,\n      functionName: RequiredParam<string>,\n      args: unknown[],\n    ) => createContractCacheKey(contractAddress, [\"call\", functionName, args]),\n\n    events: {\n      getEvents: (\n        contractAddress: RequiredParam<ContractAddress>,\n        eventName: string,\n      ) =>\n        createContractCacheKey(contractAddress, [\n          \"events\",\n          \"getEvents\",\n          { eventName },\n        ]),\n      getAllEvents: (contractAddress: RequiredParam<ContractAddress>) =>\n        createContractCacheKey(contractAddress, [\"events\", \"getAllEvents\"]),\n    },\n\n    // specific contract types\n    nft: {\n      get: (\n        contractAddress: RequiredParam<ContractAddress>,\n        tokenId: RequiredParam<BigNumberish>,\n      ) => createContractCacheKey(contractAddress, [\"get\", { tokenId }]),\n      balanceOf: (\n        contractAddress: RequiredParam<ContractAddress>,\n        owner: RequiredParam<WalletAddress>,\n        tokenId: RequiredParam<BigNumberish>,\n      ) =>\n        createContractCacheKey(contractAddress, [\n          \"balanceOf\",\n          { owner, tokenId },\n        ]),\n      query: {\n        all: (\n          contractAddress: RequiredParam<ContractAddress>,\n          params?: QueryAllParams,\n        ) =>\n          createContractCacheKey(\n            contractAddress,\n            params ? [\"query\", \"all\", params] : [\"query\", \"all\"],\n          ),\n        totalCirculatingSupply: (\n          contractAddress: RequiredParam<ContractAddress>,\n        ) =>\n          createContractCacheKey(contractAddress, [\n            \"query\",\n            \"totalCirculatingSupply\",\n          ]),\n        totalCount: (contractAddress: RequiredParam<ContractAddress>) =>\n          createContractCacheKey(contractAddress, [\"query\", \"totalCount\"]),\n        owned: {\n          all: (\n            contractAddress: RequiredParam<ContractAddress>,\n            owner: RequiredParam<WalletAddress>,\n          ) =>\n            createContractCacheKey(contractAddress, [\n              \"query\",\n              \"owned\",\n              \"all\",\n              owner,\n            ]),\n        },\n      },\n      drop: {\n        getAllUnclaimed: (\n          contractAddress: RequiredParam<ContractAddress>,\n          params?: QueryAllParams,\n        ) =>\n          createContractCacheKey(\n            contractAddress,\n            params ? [\"getAllUnclaimed\", params] : [\"getAllUnclaimed\"],\n          ),\n        totalUnclaimedSupply: (\n          contractAddress: RequiredParam<ContractAddress>,\n        ) => createContractCacheKey(contractAddress, [\"totalUnclaimedSupply\"]),\n        totalClaimedSupply: (contractAddress: RequiredParam<ContractAddress>) =>\n          createContractCacheKey(contractAddress, [\"totalClaimedSupply\"]),\n      },\n    },\n\n    token: {\n      totalSupply: (contractAddress: RequiredParam<ContractAddress>) =>\n        createContractCacheKey(contractAddress, [\"totalSupply\"]),\n      balanceOf: (\n        contractAddress: RequiredParam<ContractAddress>,\n        walletAddress: RequiredParam<ContractAddress>,\n      ) =>\n        createContractCacheKey(contractAddress, [\n          \"balanceOf\",\n          { walletAddress },\n        ]),\n    },\n    marketplace: {\n      getListing: (\n        contractAddress: RequiredParam<ContractAddress>,\n        listingId: RequiredParam<BigNumberish>,\n      ) =>\n        createContractCacheKey(contractAddress, [\"getListing\", { listingId }]),\n      getAllListings: (\n        contractAddress: RequiredParam<ContractAddress>,\n        params?: MarketplaceFilter,\n      ) =>\n        createContractCacheKey(\n          contractAddress,\n          params ? [\"getAllListings\", params] : [\"getAllListings\"],\n        ),\n      getActiveListings: (\n        contractAddress: RequiredParam<ContractAddress>,\n        params?: MarketplaceFilter,\n      ) =>\n        createContractCacheKey(\n          contractAddress,\n          params ? [\"getActiveListings\", params] : [\"getActiveListings\"],\n        ),\n      getBidBufferBps: (contractAddress: RequiredParam<ContractAddress>) =>\n        createContractCacheKey(contractAddress, [\"getBidBufferBps\"]),\n\n      auction: {\n        getWinningBid: (\n          contractAddress: RequiredParam<ContractAddress>,\n          listingId: RequiredParam<BigNumberish>,\n        ) =>\n          createContractCacheKey(contractAddress, [\n            \"auction\",\n            \"getWinningBid\",\n            { listingId },\n          ]),\n        getWinner: (\n          contractAddress: RequiredParam<ContractAddress>,\n          listingId: RequiredParam<BigNumberish>,\n        ) =>\n          createContractCacheKey(contractAddress, [\n            \"auction\",\n            \"getWinner\",\n            { listingId },\n          ]),\n      },\n    },\n  },\n  // extensions\n  extensions: {\n    claimConditions: {\n      getActive: (\n        contractAddress: RequiredParam<ContractAddress>,\n        tokenId?: BigNumberish,\n      ) =>\n        createContractCacheKey(\n          contractAddress,\n          tokenId\n            ? [\"claimConditions\", \"getActive\", { tokenId }]\n            : [\"claimConditions\", \"getActive\"],\n        ),\n      getAll: (\n        contractAddress: RequiredParam<ContractAddress>,\n        tokenId?: BigNumberish,\n      ) =>\n        createContractCacheKey(\n          contractAddress,\n          tokenId\n            ? [\"claimConditions\", \"getAll\", { tokenId }]\n            : [\"claimConditions\", \"getAll\"],\n        ),\n      getClaimIneligibilityReasons: (\n        contractAddress: RequiredParam<ContractAddress>,\n        params: { walletAddress?: WalletAddress; quantity: string | number },\n        tokenId?: BigNumberish,\n      ) =>\n        createContractCacheKey(\n          contractAddress,\n          tokenId\n            ? [\n                \"claimConditions\",\n                \"getIneligibilityReasons\",\n                { tokenId },\n                params,\n              ]\n            : [\"claimConditions\", \"getIneligibilityReasons\", params],\n        ),\n    },\n\n    // primary sale contracts\n    sales: {\n      getRecipient: (contractAddress: RequiredParam<ContractAddress>) =>\n        createContractCacheKey(contractAddress, [\"sales\"]),\n    },\n    // royalties\n    royalties: {\n      getDefaultRoyaltyInfo: (\n        contractAddress: RequiredParam<ContractAddress>,\n      ) => createContractCacheKey(contractAddress, [\"royalties\"]),\n    },\n    // platform fees\n    platformFees: {\n      get: (contractAddress: RequiredParam<ContractAddress>) =>\n        createContractCacheKey(contractAddress, [\"platformFees\"]),\n    },\n    // contract metadata\n    metadata: {\n      get: (contractAddress: RequiredParam<ContractAddress>) =>\n        createContractCacheKey(contractAddress, [\"metadata\"]),\n    },\n    roles: {\n      getAll: (contractAddress: RequiredParam<ContractAddress>) =>\n        createContractCacheKey(contractAddress, [\"roles\"]),\n      get: (contractAddress: RequiredParam<ContractAddress>, role: string) =>\n        createContractCacheKey(contractAddress, [\"roles\", { role }]),\n    },\n  },\n} as const;\n","import { useSDK } from \"../../Provider\";\nimport { useThirdwebAuthConfig } from \"../../contexts/thirdweb-auth\";\nimport { cacheKeys } from \"../../utils/cache-keys\";\nimport { useQueryClient } from \"@tanstack/react-query\";\nimport { LoginOptions } from \"@thirdweb-dev/sdk/dist/src/schema\";\nimport React from \"react\";\nimport invariant from \"tiny-invariant\";\n\nexport interface LoginConfig {\n  /**\n   * The URL to redirect to on login.\n   */\n  redirectTo?: string;\n  /**\n   * Function to run on error.\n   */\n  onError?: (error: string) => void;\n}\n\n/**\n * Hook to securely login to a backend with the connected wallet. The backend\n * authentication URL must be configured on the ThirdwebProvider.\n *\n * @param config - Configuration for the login.\n * @returns - A function to invoke to login with the connected wallet.\n *\n * @beta\n */\nexport function useLogin(config?: LoginConfig) {\n  const sdk = useSDK();\n  const queryClient = useQueryClient();\n  const authConfig = useThirdwebAuthConfig();\n\n  React.useEffect(() => {\n    const queryParams = new URLSearchParams(window.location.search);\n    const error = queryParams.get(\"error\");\n\n    if (error && config?.onError) {\n      // If there is an error, parse it and trigger the onError callback\n      config.onError(decodeURI(error));\n    }\n  }, [config?.onError]);\n\n  async function login(cfg?: LoginOptions) {\n    invariant(\n      authConfig,\n      \"Please specify an authConfig in the ThirdwebProvider\",\n    );\n    const payload = await sdk?.auth.login(authConfig.domain, cfg);\n\n    const encodedPayload = encodeURIComponent(btoa(JSON.stringify(payload)));\n    const encodedRedirectTo = encodeURIComponent(\n      config?.redirectTo ||\n        authConfig.loginRedirect ||\n        window.location.toString(),\n    );\n\n    queryClient.invalidateQueries(cacheKeys.auth.user());\n\n    // Redirect to the login URL with the encoded payload\n    window.location.href = `${authConfig.authUrl}/login?payload=${encodedPayload}&redirect=${encodedRedirectTo}`;\n  }\n\n  return login;\n}\n","import { useThirdwebAuthConfig } from \"../../contexts/thirdweb-auth\";\nimport { cacheKeys } from \"../../utils/cache-keys\";\nimport { useQueryClient } from \"@tanstack/react-query\";\nimport invariant from \"tiny-invariant\";\n\n/**\n * Hook to logout the connected wallet from the backend.\n * The backend logout URL must be configured on the ThirdwebProvider.\n *\n * @returns - A function to invoke to logout.\n *\n * @beta\n */\nexport function useLogout() {\n  const queryClient = useQueryClient();\n  const authConfig = useThirdwebAuthConfig();\n\n  function logout() {\n    invariant(\n      authConfig,\n      \"Please specify an authConfig in the ThirdwebProvider\",\n    );\n    queryClient.invalidateQueries(cacheKeys.auth.user());\n    window.location.href = `${authConfig.authUrl}/logout`;\n  }\n\n  return logout;\n}\n","import { useThirdwebAuthConfig } from \"../../contexts/thirdweb-auth\";\nimport { cacheKeys } from \"../../utils/cache-keys\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport invariant from \"tiny-invariant\";\n\ninterface ThirdwebAuthUser {\n  address: string;\n}\n\n/**\n * Hook to get the currently logged in user.\n *\n * @returns - The currently logged in user or null if not logged in, as well as a loading state.\n *\n * @beta\n */\nexport function useUser() {\n  const authConfig = useThirdwebAuthConfig();\n\n  const { data: user, isLoading } = useQuery(\n    cacheKeys.auth.user(),\n    async () => {\n      invariant(\n        authConfig,\n        \"Please specify an authConfig in the ThirdwebProvider\",\n      );\n      const res = await fetch(`${authConfig.authUrl}/user`);\n      return (await res.json()) as ThirdwebAuthUser;\n    },\n  );\n\n  return { user, isLoading };\n}\n","import { useSDK } from \"../../Provider\";\nimport {\n  ContractForContractType,\n  ContractType,\n} from \"@thirdweb-dev/sdk/dist/browser\";\n\n/**\n * @internal\n * @param contractType - the contract type\n * @param contractAddress - the contract address\n * @returns the instance of the contract for the given type and address\n */\nexport function useBuiltinContract<TContractType extends ContractType>(\n  contractType?: TContractType,\n  contractAddress?: string,\n): ContractForContractType<TContractType> | undefined {\n  const sdk = useSDK();\n  if (!sdk || !contractAddress || !contractType) {\n    return undefined;\n  }\n  return sdk.getBuiltInContract(contractAddress, contractType);\n}\n","import { useBuiltinContract } from \"./useBuiltinContract\";\nimport { EditionDrop } from \"@thirdweb-dev/sdk/dist/browser\";\n\n/**\n * Hook for getting an instance of an `EditionDrop` contract. This conract is used to interface with ERC1155 compliant NFTs that can be lazily minted.\n * @param contractAddress - the address of the Edition Drop contract, found in your thirdweb dashboard\n *\n * @example\n * ```javascript\n * import { useEditionDrop } from '@thirdweb-dev/react'\n *\n * export default function Component() {\n *   const editionDrop = useEditionDrop(\"<YOUR-CONTRACT-ADDRESS>\")\n *\n *   // Now you can use the edition drop contract in the rest of the component\n *\n *   // For example, this function will let the connected wallet claim a new NFT\n *   async function claim(tokenId, quantity) {\n *     await editionDrop.claim(tokenId, quantity)\n *   }\n *\n *   ...\n * }\n * ```\n * @public\n */\nexport function useEditionDrop(\n  contractAddress?: string,\n): EditionDrop | undefined {\n  return useBuiltinContract(\"edition-drop\", contractAddress);\n}\n","import { useBuiltinContract } from \"./useBuiltinContract\";\nimport { Edition } from \"@thirdweb-dev/sdk/dist/browser\";\n\n/**\n * Hook for getting an instance of an `Edition` contract. This contract is used to interface with ERC1155 compliant NFTs.\n * @param contractAddress - the address of the Edition contract, found in your thirdweb dashboard\n *\n * @example\n * ```javascript\n * import { useEdition } from '@thirdweb-dev/react'\n *\n * export default function Component() {\n *   const edition = useEdition(\"<YOUR-CONTRACT-ADDRESS>\")\n *\n *   // Now you can use the edition contract in the rest of the component\n *\n *   // For example, this function will return all the NFTs on this contract\n *   async function getNFTs() {\n *     const nfts = await edition.getAll()\n *     return nfts\n *   }\n *\n *   ...\n * }\n * ```\n * @public\n */\nexport function useEdition(contractAddress?: string): Edition | undefined {\n  return useBuiltinContract(\"edition\", contractAddress);\n}\n","import { useBuiltinContract } from \"./useBuiltinContract\";\nimport { NFTDrop } from \"@thirdweb-dev/sdk/dist/browser\";\n\n/**\n * Hook for getting an instance of an `NFTDrop` contract. This contract is meant to interface with ERC721 compliant NFTs that can be lazily minted.\n * @param contractAddress - the address of the NFT Drop contract, found in your thirdweb dashboard\n *\n * @example\n * ```javascript\n * import { useNFTDrop } from '@thirdweb-dev/react'\n *\n * export default function Component() {\n *   const nftDrop = useNFTDrop(\"<YOUR-CONTRACT-ADDRESS>\")\n *\n *   // Now you can use the nft drop contract in the rest of the component\n *\n *   // For example, this function will let the connected wallet claim a new NFT\n *   async function claim(quantity) {\n *     await nftDrop.claim(quantity)\n *   }\n *\n *   ...\n * }\n * ```\n * @public\n */\nexport function useNFTDrop(contractAddress?: string): NFTDrop | undefined {\n  return useBuiltinContract(\"nft-drop\", contractAddress);\n}\n","import { useBuiltinContract } from \"./useBuiltinContract\";\nimport { Marketplace } from \"@thirdweb-dev/sdk/dist/browser\";\n\n/**\n * Hook for getting an instance of a `Marketplace` contract. This contract is used to support marketplace for purchase and sale of on-chain assets.\n * @param contractAddress - the address of the Marketplace contract, found in your thirdweb dashboard\n *\n * @example\n * ```javascript\n * import { useMarketplace } from '@thirdweb-dev/react'\n *\n * export default function Component() {\n *   const marketplace = useMarketplace(\"<YOUR-CONTRACT-ADDRESS>\")\n *\n *   // Now you can use the marketplace contract in the rest of the component\n *\n *   // For example, this function will return all the listings on the marketplace\n *   async function getListings() {\n *     const listings = await marketplace.getAll()\n *     return listings\n *   }\n *\n *   ...\n * }\n * ```\n * @public\n */\nexport function useMarketplace(\n  contractAddress?: string,\n): Marketplace | undefined {\n  return useBuiltinContract(\"marketplace\", contractAddress);\n}\n","import { useBuiltinContract } from \"./useBuiltinContract\";\nimport { NFTCollection } from \"@thirdweb-dev/sdk/dist/browser\";\n\n/**\n * Hook for getting an instance of an `NFTCollection` contract. This contract is meant to interface with ERC721 compliant NFTs.\n * @param contractAddress - the address of the NFT Collection contract, found in your thirdweb dashboard\n *\n * @example\n * ```javascript\n * import { useNFTCollection } from '@thirdweb-dev/react'\n *\n * export default function Component() {\n *   const nftCollection = useNFTCollection(\"<YOUR-CONTRACT-ADDRESS>\")\n *\n *   // Now you can use the nftCollection contract in the rest of the component\n *\n *   // For example, this function will return all the NFTs on this contract\n *   async function getNFTs() {\n *     const nfts = await nftCollection.getAll()\n *     return nfts\n *   }\n *\n *   ...\n * }\n * ```\n * @public\n */\nexport function useNFTCollection(\n  contractAddress?: string,\n): NFTCollection | undefined {\n  return useBuiltinContract(\"nft-collection\", contractAddress);\n}\n","import { useBuiltinContract } from \"./useBuiltinContract\";\nimport { Pack } from \"@thirdweb-dev/sdk/dist/browser\";\n\n/**\n * Hook for getting an instance of a `Pack` contract. This contract supports the creation of on-chain luck-based lootboxes.\n * @param contractAddress - the address of the Pack contract, found in your thirdweb dashboard\n *\n * @example\n * ```javascript\n * import { usePack } from '@thirdweb-dev/react'\n *\n * export default function Component() {\n *   const pack = usePack(\"<YOUR-CONTRACT-ADDRESS>\")\n *\n *   // Now you can use the pack contract in the rest of the component\n *\n *   // For example, this function will get all the packs on this contract\n *   async function getPacks() {\n *     const packs = await pack.getAll()\n *     return packs\n *   }\n *\n *   ...\n * }\n * ```\n * @public\n */\nexport function usePack(contractAddress?: string): Pack | undefined {\n  return useBuiltinContract(\"pack\", contractAddress);\n}\n","import { useBuiltinContract } from \"./useBuiltinContract\";\nimport { Token } from \"@thirdweb-dev/sdk/dist/browser\";\n\n/**\n * Hook for getting an instance of an `Token` contract. This contract supports ERC20 compliant tokens.\n * @param contractAddress - the address of the Token contract, found in your thirdweb dashboard\n *\n * @example\n * ```javascript\n * import { useToken } from '@thirdweb-dev/react'\n *\n * export default function Component() {\n *   const token = useToken(\"<YOUR-CONTRACT-ADDRESS>\")\n *\n *   // Now you can use the token contract in the rest of the component\n *\n *   // For example, this function will get the connected wallets token balance\n *   async function balance() {\n *     const balance = await token.balance()\n *     return balance\n *   }\n *\n *   ...\n * }\n * ```\n * @public\n */\nexport function useToken(contractAddress?: string): Token | undefined {\n  return useBuiltinContract(\"token\", contractAddress);\n}\n","import { useBuiltinContract } from \"./useBuiltinContract\";\nimport { TokenDrop } from \"@thirdweb-dev/sdk/dist/browser\";\n\n/**\n * Returns a Token contract instance\n * @param contractAddress - the address of the Token contract, found in your thirdweb dashboard\n * @internal\n */\nexport function useTokenDrop(contractAddress?: string): TokenDrop | undefined {\n  return useBuiltinContract(\"token-drop\", contractAddress);\n}\n","import { useBuiltinContract } from \"./useBuiltinContract\";\nimport { Vote } from \"@thirdweb-dev/sdk/dist/browser\";\n\n/**\n * Hook for getting an instance of an `Vote` contract. This contract enables fully featured voting-based decentralized governance systems.\n * @param contractAddress - the address of the Vote contract, found in your thirdweb dashboard\n *\n * @example\n * ```javascript\n * import { useVote } from '@thirdweb-dev/react'\n *\n * export default function Component() {\n *   const vote = useVote(\"<YOUR-CONTRACT-ADDRESS>\")\n *\n *   // Now you can use the vote contract in the rest of the component\n *\n *   // For example, this function will get all the proposals on this contract\n *   async function getProposals() {\n *     const proposals = await vote.getAll()\n *     return proposals\n *   }\n *\n *   ...\n * }\n * ```\n * @public\n */\nexport function useVote(contractAddress?: string): Vote | undefined {\n  return useBuiltinContract(\"vote\", contractAddress);\n}\n","import { useBuiltinContract } from \"./useBuiltinContract\";\nimport { Split } from \"@thirdweb-dev/sdk/dist/browser\";\n\n/**\n * Hook for getting an instance of a `Split` contract. This contract supports fund distribution to multiple parties.\n * @param contractAddress - the address of the Split contract, found in your thirdweb dashboard\n *\n * @example\n * ```javascript\n * import { useSplit } from '@thirdweb-dev/react'\n *\n * export default function Component() {\n *   const split = useSplit(\"<YOUR-CONTRACT-ADDRESS>\")\n *\n *   // Now you can use the split contract in the rest of the component\n *\n *   // For example, this function will retrun all the receipients of the split\n *   async function getRecipients() {\n *     const recipients = await split.getAllRecipients()\n *     return recipients\n *   }\n *\n *   ...\n * }\n * ```\n * @public\n */\nexport function useSplit(contractAddress?: string): Split | undefined {\n  return useBuiltinContract(\"split\", contractAddress);\n}\n","import { useBuiltinContract } from \"./useBuiltinContract\";\nimport { Multiwrap } from \"@thirdweb-dev/sdk/dist/browser\";\n\n/**\n * Hook for getting an instance of an `Multiwrap` contract. This contract is an ERC721 in which you can wrap ERC721, ERC1155 and ERC20 tokens.\n * @param contractAddress - the address of the Multiwrap contract, found in your thirdweb dashboard\n *\n * @example\n * ```javascript\n * import { useMultiwrap } from '@thirdweb-dev/react'\n *\n * export default function Component() {\n *   const multiwrap = useMultiwrap(\"<YOUR-CONTRACT-ADDRESS>\")\n *\n *   // Now you can use the multiwrap contract in the rest of the component\n *\n *   // For example, this function will let the connected wallet wrap tokens\n *   async function wrap(tokensToWrap, wrappedNFTMetadata) {\n *     await multiwrap.wrap(tokensToWrap, wrappedNFTMetadata)\n *   }\n *\n *   ...\n * }\n * ```\n * @public\n */\nexport function useMultiwrap(contractAddress?: string): Multiwrap | undefined {\n  return useBuiltinContract(\"multiwrap\", contractAddress);\n}\n","import { useBuiltinContract } from \"./useBuiltinContract\";\nimport { SignatureDrop } from \"@thirdweb-dev/sdk/dist/browser\";\n\n/**\n * Hook for getting an instance of an `SignatureDrop` contract. This contract is meant to interface with ERC721 compliant NFTs that can be lazily minted.\n * @param contractAddress - the address of the NFT Drop contract, found in your thirdweb dashboard\n *\n * @example\n * ```javascript\n * import { useSignatureDrop } from '@thirdweb-dev/react'\n *\n * export default function Component() {\n *   const signatureDrop = useSignatureDrop(\"<YOUR-CONTRACT-ADDRESS>\")\n *\n *   // Now you can use the Signature drop contract in the rest of the component\n *\n *   // For example, this function will let the connected wallet claim a new NFT\n *   async function claim(quantity) {\n *     await signatureDrop.claim(quantity)\n *   }\n *\n *   ...\n * }\n * ```\n * @public\n */\nexport function useSignatureDrop(\n  contractAddress?: string,\n): SignatureDrop | undefined {\n  return useBuiltinContract(\"signature-drop\", contractAddress);\n}\n","import { useConnect as useWagmiConnect } from \"wagmi\";\n\n/**\n * for now just re-exported\n * @internal\n */\nexport function useConnect() {\n  return useWagmiConnect();\n}\n","import { GnosisSafeConnector } from \"../connectors/gnosis-safe\";\nimport { useConnect } from \"./useConnect\";\nimport { useAccount } from \"wagmi\";\n\n/**\n * Hook for disconnecting the currently connected wallet\n *\n * ```javascript\n * import { useDisconnect } from \"@thirdweb-dev/react\"\n * ```\n *\n *\n * @example\n * The following will enable users to disconnect their wallet from the page.\n * ```javascript\n * import { useDisconnect } from \"@thirdweb-dev/react\"\n *\n * const App = () => {\n *   const disconnect = useDisconnect()\n *\n *   return (\n *     <button onClick={disconnect}>\n *       Disconnect\n *     </button>\n *   )\n * }\n * ```\n *\n * Once users disconnect their wallet, the `useAddress`, `useChainId`, `useAccount`, and `useNetwork` hooks will no longer return values until a user connects their wallet again.\n *\n * @public\n */\nexport function useDisconnect(options?: { reconnectAfterGnosis?: boolean }) {\n  const optsWithDefaults = { ...{ reconnectAfterGnosis: true }, ...options };\n  const [, connect] = useConnect();\n  const [data, disconnect] = useAccount();\n\n  return async () => {\n    const previousConnector =\n      (data.data?.connector instanceof GnosisSafeConnector &&\n        data.data.connector.previousConnector) ||\n      undefined;\n    // if it's gnosis, just connect the previous connector\n    if (optsWithDefaults.reconnectAfterGnosis && previousConnector) {\n      try {\n        return await connect(previousConnector);\n      } catch (err) {\n        console.error(\"failed to re-connect to previous connector\", err);\n        // if it fails for whatever reason just disconnect\n        return disconnect();\n      }\n    }\n\n    return disconnect();\n  };\n}\n","import { useAccount } from \"wagmi\";\n\n/**\n * Hook for accessing the address of the connected wallet\n *\n * ```javascript\n * import { useAddress } from \"@thirdweb-dev/react\"\n * ```\n *\n *\n * @example\n * To get the address of the connected wallet, you can use the hook as follows:\n *\n * ```javascript\n * import { useAddress } from \"@thirdweb-dev/react\"\n *\n * const App = () => {\n *   const address = useAddress()\n *\n *   return <div>{address}</div>\n * }\n * ```\n *\n * The `address` variable will hold the address of the connected wallet if a user has connected using one of the supported wallet connection hooks.\n *\n * @public\n */\nexport function useAddress(): string | undefined {\n  const [account] = useAccount();\n  return account.data?.address;\n}\n","import {\n  IStorage,\n  SDKOptions,\n  ThirdwebSDK,\n} from \"@thirdweb-dev/sdk/dist/browser\";\nimport { useMemo } from \"react\";\n\n/**\n * @internal\n */\nexport function useReadonlySDK(\n  readonlyRpcUrl: string,\n  sdkOptions: SDKOptions,\n  storageInterface?: IStorage,\n): ThirdwebSDK {\n  return useMemo(() => {\n    return new ThirdwebSDK(\n      readonlyRpcUrl,\n      {\n        ...sdkOptions,\n        readonlySettings: {\n          ...sdkOptions?.readonlySettings,\n          rpcUrl: readonlyRpcUrl,\n        },\n      },\n      storageInterface,\n    );\n  }, [readonlyRpcUrl, sdkOptions]);\n}\n","import {\n  BotInfo,\n  BrowserInfo,\n  NodeInfo,\n  ReactNativeInfo,\n  SearchBotDeviceInfo,\n  detect,\n} from \"detect-browser\";\n\nfunction detectEnv(\n  userAgent?: string,\n):\n  | BrowserInfo\n  | BotInfo\n  | NodeInfo\n  | SearchBotDeviceInfo\n  | ReactNativeInfo\n  | null {\n  return detect(userAgent);\n}\n\n/**\n * @internal\n */\nexport function isAndroid(): boolean {\n  const os = detectOS();\n  return os ? os.toLowerCase().includes(\"android\") : false;\n}\n\n/**\n * @internal\n */\nexport function isIOS(): boolean {\n  const os = detectOS();\n  return os\n    ? os.toLowerCase().includes(\"ios\") ||\n        (os.toLowerCase().includes(\"mac\") && navigator.maxTouchPoints > 1)\n    : false;\n}\n\n/**\n * @internal\n */\nfunction detectOS() {\n  const env = detectEnv();\n  return env?.os ? env.os : undefined;\n}\n\n/**\n * @internal\n */\nexport function isMobile(): boolean {\n  const os = detectOS();\n  return os ? isAndroid() || isIOS() : false;\n}\n","import { isAndroid, isMobile } from \"../../utils/isMobile\";\nimport { useConnect } from \"../useConnect\";\nimport invariant from \"tiny-invariant\";\n\n/**\n * Hook for connecting to a Metamask wallet.\n *\n * ```javascript\n * import { useMetamask } from \"@thirdweb-dev/react\"\n * ```\n *\n *\n * @example\n * We can allow users to connect their metamask wallets as follows:\n * ```javascript\n * import { useMetamask } from \"@thirdweb-dev/react\"\n *\n * const App = () => {\n *   const connectWithMetamask = useMetamask()\n *\n *   return (\n *     <button onClick={connectWithMetamask}>\n *       Connect Metamask\n *     </button>\n *   )\n * }\n * ```\n * Here, we use the `useMetamask` hook to handle metamask connection.\n * When a user clicks the button, we'll call the `connectWithMetamask` function, which will prompt users to connect their metamask wallet.\n *\n * @public\n */\nexport function useMetamask() {\n  const [connectors, connect] = useConnect();\n  if (connectors.loading) {\n    return () => Promise.reject(\"Metamask connector not ready to be used, yet\");\n  }\n\n  const isMetaMaskInjected =\n    typeof window !== \"undefined\" && window.ethereum?.isMetaMask;\n\n  const shouldUseWalletConnect = isMobile() && !isMetaMaskInjected;\n\n  // injected connector\n  const injectedConnector = connectors.data.connectors.find(\n    (c) => c.id === \"injected\",\n  );\n  // walletConnect connector\n  const walletConnectConnector = connectors.data.connectors.find(\n    (c) => c.id === \"walletConnect\",\n  );\n\n  const connector =\n    (shouldUseWalletConnect ? walletConnectConnector : injectedConnector) ||\n    injectedConnector;\n\n  invariant(\n    connector,\n    \"No connector found, please make sure you provide the InjectedConnector to your <ThirdwebProvider />\",\n  );\n\n  return async () => {\n    // if we don't have an injected provider\n    if (!isMetaMaskInjected) {\n      // this is the fallback uri that should work no matter what\n      let uri = `https://metamask.app.link/dapp/${\n        window.location.host + window.location.pathname + window.location.search\n      }`;\n\n      // if we have walletconnect etc, we can try to use that\n      if (shouldUseWalletConnect && connector.id === \"walletConnect\") {\n        try {\n          uri = (await connector.getProvider()).connector.uri;\n          // if android we can use the uri straight\n          uri = isAndroid()\n            ? uri\n            : // otherwise we have to use /dapp link for now\n              `https://metamask.app.link/dapp/${\n                window.location.host +\n                window.location.pathname +\n                window.location.search\n              }`;\n        } catch (err) {\n          console.warn(\"failed to get provider.connector.uri\", err);\n        }\n      }\n      // open whatever uri we end up with in a new tab\n      window.open(uri, \"_blank\");\n\n      return Promise.resolve({\n        error: new Error(\"metamask not injected\"),\n      });\n    }\n\n    // otherwise we have MM avaiable, so we can just use it\n    return await connect(connector);\n  };\n}\n","import { useConnect } from \"../useConnect\";\nimport invariant from \"tiny-invariant\";\n\n/**\n * Hook for connecting to a mobile wallet with Wallet Connect\n *\n * ```javascript\n * import { useWalletConnect } from \"@thirdweb-dev/react\"\n * ```\n *\n *\n * @example\n * We can allows user to connect their mobile wallets as follows:\n * ```javascript\n * import { useWalletConnect } from \"@thirdweb-dev/react\"\n *\n * const App = () => {\n *   const connectWithWalletConnect = useWalletConnect()\n *\n *   return (\n *     <button onClick={connectWithWalletConnect}>\n *       Connect WalletConnect\n *     </button>\n *   )\n * }\n * ```\n *\n * When users click this button, a popup will appear on the screen prompting them to scan a QR code from their phone to connect their mobile wallets.\n * Once they scan the QR code from a wallet connect supported mobile wallet, their wallet will then be connected to the page as expected.\n *\n * @public\n */\nexport function useWalletConnect() {\n  const [connectors, connect] = useConnect();\n  if (connectors.loading) {\n    return () =>\n      Promise.reject(\"WalletConnect connector not ready to be used, yet\");\n  }\n  const connector = connectors.data.connectors.find(\n    (c) => c.id === \"walletConnect\",\n  );\n  invariant(\n    connector,\n    \"WalletConnect connector not found, please make sure it is provided to your <ThirdwebProvider />\",\n  );\n\n  return () => connect(connector);\n}\n","import { useConnect } from \"../useConnect\";\nimport invariant from \"tiny-invariant\";\n\n/**\n * Hook for connecting to a Coinbase wallet.\n *\n * ```javascript\n * import { useCoinbaseWallet } from \"@thirdweb-dev/react\"\n * ```\n *\n *\n * @example\n * We can allow users to connect with Coinbase Wallet as follows:\n * ```javascript\n * import { useCoinbaseWallet } from \"@thirdweb-dev/react\"\n *\n * const App = () => {\n *   const connectWithCoinbaseWallet = useCoinbaseWallet()\n *\n *   return (\n *     <button onClick={connectWithCoinbaseWallet}>\n *       Connect Coinbase Wallet\n *     </button>\n *   )\n * }\n * ```\n *\n * Upon clicking this button, users will be prompted with a popup asking them scan a QR code with their Coinbase Wallet.\n * Once they scan the QR code, their wallet will then be connected to the page as expected.\n *\n * @public\n */\nexport function useCoinbaseWallet() {\n  const [connectors, connect] = useConnect();\n  if (connectors.loading) {\n    return () => Promise.reject(\"Coinbase connector not ready to be used, yet\");\n  }\n  const connector = connectors.data.connectors.find(\n    (c) => c.id === \"coinbasewallet\",\n  );\n  invariant(\n    connector,\n    \"Coinbase connector not found, please make sure it is provided to your <ThirdwebProvider />\",\n  );\n\n  return () => connect(connector);\n}\n\n/**\n * Convienience hook for connecting to a wallet via WalletLink (coinbase wallet)\n * @returns a function that will prompt the user to connect their wallet via WalletLink (coinbase wallet)\n * @internal\n */\nexport function useWalletLink() {\n  return useCoinbaseWallet();\n}\n","import {\n  GnosisConnectorArguments,\n  GnosisSafeConnector,\n} from \"../../connectors/gnosis-safe\";\nimport { useConnect } from \"../useConnect\";\nimport { utils } from \"ethers\";\nimport invariant from \"tiny-invariant\";\n\n/**\n * Hook for connecting to a Gnosis Safe. This enables multisig wallets to connect to your application and sing transactions.\n *\n * ```javascript\n * import { useGnosis } from \"@thirdweb-dev/react\"\n * ```\n *\n *\n * @example\n * ```javascript\n * import { useGnosis } from \"@thirdweb-dev/react\"\n *\n * const App = () => {\n *   const connectWithGnosis = useGnosis()\n *\n *   return (\n *     <button onClick={() => connectWithGnosis({ safeAddress: \"0x...\", safeChainId: 1 })}>\n *       Connect Gnosis Safe\n *     </button>\n *   )\n * }\n * ```\n *\n * @public\n */\nexport function useGnosis() {\n  const [connectors, connect] = useConnect();\n  if (connectors.loading) {\n    return () => Promise.reject(\"Gnosis connector not ready to be used, yet\");\n  }\n  const connector = connectors.data.connectors.find((c) => c.id === \"gnosis\");\n  invariant(\n    connector,\n    \"Gnosis connector not found, please make sure it is provided to your <ThirdwebProvider />\",\n  );\n\n  return async (config: GnosisConnectorArguments) => {\n    const previousConnector = connectors.data.connector;\n    const previousConnectorChain = await previousConnector?.getChainId();\n    invariant(\n      !!previousConnector,\n      \"Cannot connect to Gnosis Safe without first being connected to a personal wallet.\",\n    );\n    invariant(\n      previousConnectorChain === config.safeChainId,\n      \"Gnosis safe chain id must match personal wallet chain id.\",\n    );\n    invariant(\n      utils.isAddress(config.safeAddress),\n      \"Gnosis safe address must be a valid address.\",\n    );\n    (connector as GnosisSafeConnector).setConfiguration(\n      previousConnector,\n      config,\n    );\n    return connect(connector);\n  };\n}\n","import { MagicConnector } from \"../../connectors/magic\";\nimport { useConnect } from \"../useConnect\";\nimport { LoginWithMagicLinkConfiguration } from \"magic-sdk\";\nimport invariant from \"tiny-invariant\";\n\n/**\n * Hook for connecting to an email wallet using magic link.\n * This enables users without their own wallets to connect to your application and sign transactions securely using their email.\n *\n * ```javascript\n * import { useMagic } from \"@thirdweb-dev/react\"\n * ```\n *\n *\n * @example\n * Before using this hook, you first need to set up the magic configuration in your `ThirdwebProvider`, including your magic API key.\n *\n * ```javascript\n * // Add the magic configuration object to your wallet connectors\n * const connectors = [\n *   \"metamask\",\n *   \"walletConnect\",\n *   \"walletLink\",\n *   {\n *     name: \"magic\",\n *     options: {\n *       apiKey: \"your-magic-api-key\",\n *     }\n *   }\n * ]\n *\n * // Add the above to the walletConnectors prop of your <ThirdwebProvider />\n * const Provider = ({ children }) => (\n *   return (\n *     <ThirdwebProvider\n *       walletConnectors={connectors}\n *       // Specify remaining parameters\n *       ...\n *     >\n *       {children}\n *     </ThirdwebProvider>\n *   )\n * }\n * ```\n *\n * In order to use the hook to connect users with magic link, you just need to provide the users email to the connect function.\n *\n * You can setup the hook with the following configuration:\n * ```javascript\n * import { useMagic } from \"@thirdweb-dev/react\"\n * import { useState } from \"react\"\n *\n * const LoginWithMagicLink = () => {\n *   const connectWithMagic = useMagic()\n *   const [email, setEmail] = useState()\n *\n *   return (\n *     <div>\n *       <input value={email} onChange={(e) => setEmail(e.target.value)} />\n *       <button onClick={() => connectWithMagic({ email })}>Login</button>\n *     </div>\n *   )\n * }\n * ```\n *\n * @public\n */\nexport function useMagic() {\n  const [connectors, connect] = useConnect();\n  if (connectors.loading) {\n    return () => Promise.reject(\"Magic connector not ready to be used, yet\");\n  }\n\n  const connector = connectors.data.connectors.find((c) => c.id === \"magic\");\n\n  invariant(\n    connector,\n    \"Magic connector not found, please make sure it is provided to your <ThirdwebProvider />\",\n  );\n\n  return (configuration: LoginWithMagicLinkConfiguration) => {\n    (connector as MagicConnector).setConfiguration(configuration);\n    return connect(connector);\n  };\n}\n","import { useNetwork } from \"wagmi\";\n\n/**\n * Hook for accessing the chain ID of the network the current wallet is connected to\n *\n * ```javascript\n * import { useChainId } from \"@thirdweb-dev/react\"\n * ```\n *\n * @example\n * You can get the chain ID of the connected wallet by using the hook as follows:\n * ```javascript\n * import { useChainId } from \"@thirdweb-dev/react\"\n *\n * const App = () => {\n *   const chainId = useChainId()\n *\n *   return <div>{chainId}</div>\n * }\n * ```\n * @public\n */\nexport function useChainId(): number | undefined {\n  return useNetwork()[\"0\"].data.chain?.id;\n}\n","import { useDesiredChainId } from \"../Provider\";\nimport { useChainId } from \"./useChainId\";\n\n/**\n * Hook for checking whether the connected wallet is on the correct network specified by the `desiredChainId` passed to the `<ThirdwebProvider />`.\n *\n * ```javascript\n * import { useNetworkMistmatch } from \"@thirdweb-dev/react\"\n * ```\n *\n * @returns `true` if the chainId of the connected wallet is different from the desired chainId passed into <ThirdwebProvider />\n *\n * @example\n * You can check if a users wallet is connected to the correct chain ID as follows:\n * ```javascript\n * import { useNetworkMismatch } from \"@thirdweb-dev/react\"\n *\n * const App = () => {\n *   const isMismatched = useNetworkMismatch()\n *\n *   return <div>{isMismatched}</div>\n * }\n * ```\n *\n * From here, you can prompt users to switch their network using the `useNetwork` hook.\n *\n * @public\n */\nexport function useNetworkMismatch() {\n  const desiredChainId = useDesiredChainId();\n  const activeChainId = useChainId();\n\n  if (desiredChainId === -1) {\n    // means no desiredChainId is set in the <ThirdwebProvider />, so we don't care about the network mismatch\n    return false;\n  }\n  if (!activeChainId) {\n    // means no wallet is connected yet, so we don't care about the network mismatch\n    return false;\n  }\n  // check if the chainIds are different\n  return desiredChainId !== activeChainId;\n}\n","import { useNetwork as useWagmiNetwork } from \"wagmi\";\n\n/**\n * Hook for getting metadata about the network the current wallet is connected to and switching networks\n *\n * @example\n * ```javascript\n * import { useNetwork, ChainId } from \"@thirdweb-dev/react\";\n *\n * const App = () => {\n *   const [, switchNetwork] = useNetwork();\n *\n *   return (\n *     <button onClick={() => switchNetwork(ChainId.Polygon)}>\n *        Switch Network\n *     </button>\n *   );\n * };\n```\n *\n * It's important to note that some wallet apps do not support programmatic network switching and switchNetwork will be undefined.\n * For those situations, you can typically switch networks in the wallet app this hook will still work.\n *\n * @public\n */\n\nexport function useNetwork() {\n  return useWagmiNetwork();\n}\n","// contract hooks\nexport * from \"./Provider\";\nexport * from \"./hooks/auth\";\nexport * from \"./hooks/contracts\";\nexport * from \"./hooks/useDisconnect\";\nexport * from \"./hooks/useConnect\";\nexport * from \"./hooks/useSigner\";\nexport * from \"./hooks/useAddress\";\nexport * from \"./hooks/useReadonlySDK\";\nexport * from \"./hooks/connectors/useMetamask\";\nexport * from \"./hooks/connectors/useWalletConnect\";\nexport * from \"./hooks/connectors/useWalletLink\";\nexport * from \"./hooks/connectors/useGnosis\";\nexport * from \"./hooks/connectors/useMagic\";\nexport * from \"./hooks/useChainId\";\nexport * from \"./hooks/useNetworkMismatch\";\nexport * from \"./hooks/useNetwork\";\n\n// re-exports\nexport { defaultChains, defaultL2Chains, useAccount, useProvider } from \"wagmi\";\nexport { ChainId, IpfsStorage } from \"@thirdweb-dev/sdk/dist/browser\";\n// ui components\nexport * from \"./components/MediaRenderer\";\nexport * from \"./components/NftMedia\";\n\n// async hooks\nexport * from \"./hooks/async/contracts\";\nexport * from \"./hooks/async/nft\";\nexport * from \"./hooks/async/drop\";\nexport * from \"./hooks/async/marketplace\";\nexport * from \"./hooks/async/token\";\nexport * from \"./hooks/async/claim-conditions\";\nexport * from \"./hooks/async/wallet\";\nexport * from \"./hooks/async/contract-settings\";\nexport * from \"./hooks/async/roles\";\n\n// types\nexport * from \"./types\";\nexport type { ThirdwebAuthConfig } from \"./contexts/thirdweb-auth\";\n","export const DEFAULT_IPFS_GATEWAY = \"https://gateway.ipfscdn.io/ipfs/\";\n\nexport interface IPFSResolverOptions {\n  gatewayUrl: string;\n}\n\nexport const DEFAULT_IPFS_RESOLVER_OPTIONS: IPFSResolverOptions = {\n  gatewayUrl: DEFAULT_IPFS_GATEWAY,\n};\n","import { DEFAULT_IPFS_RESOLVER_OPTIONS } from \"../constants/ipfs\";\nimport mime from \"mime/lite.js\";\n\nexport function resolveIpfsUri(\n  uri?: string,\n  options = DEFAULT_IPFS_RESOLVER_OPTIONS,\n) {\n  if (!uri) {\n    return undefined;\n  }\n  if (uri.startsWith(\"ipfs://\")) {\n    return uri.replace(\"ipfs://\", options.gatewayUrl);\n  }\n  return uri;\n}\n\nexport async function resolveMimeType(url?: string) {\n  if (!url) {\n    return undefined;\n  }\n  const mimeType = mime.getType(url);\n  if (mimeType) {\n    return mimeType;\n  }\n\n  const res = await fetch(url, {\n    method: \"HEAD\",\n  });\n  if (res.ok && res.headers.has(\"content-type\")) {\n    return res.headers.get(\"content-type\") ?? undefined;\n  }\n  // we failed to resolve the mime type, return null\n  return undefined;\n}\n","let video: HTMLVideoElement;\n\nfunction supportsVideoType(mimeType?: string) {\n  if (\n    typeof window === \"undefined\" ||\n    !mimeType ||\n    !mimeType.startsWith(\"video/\")\n  ) {\n    return \"\";\n  }\n\n  if (!video) {\n    video = document.createElement(\"video\");\n  }\n\n  return video.canPlayType(mimeType);\n}\n\nexport function shouldRenderVideoTag(mimeType?: string) {\n  return !!supportsVideoType(mimeType);\n}\n\nlet audio: HTMLAudioElement;\n\nfunction supportsAudioType(mimeType?: string) {\n  if (\n    typeof window === \"undefined\" ||\n    !mimeType ||\n    !mimeType.startsWith(\"audio/\")\n  ) {\n    return \"\";\n  }\n\n  if (!audio) {\n    audio = document.createElement(\"audio\");\n  }\n\n  return audio.canPlayType(mimeType);\n}\n\nexport function shouldRenderAudioTag(mimeType?: string) {\n  return !!supportsAudioType(mimeType);\n}\n","export function mergeRefs<T = any>(\n  refs: Array<React.MutableRefObject<T> | React.LegacyRef<T>>,\n): React.RefCallback<T> {\n  return (value) => {\n    refs.forEach((ref) => {\n      if (typeof ref === \"function\") {\n        ref(value);\n        // eslint-disable-next-line eqeqeq\n      } else if (ref != null) {\n        (ref as React.MutableRefObject<T | null>).current = value;\n      }\n    });\n  };\n}\n","import React, { SVGProps } from \"react\";\n\nexport const CarbonDocumentUnknown: React.VFC<SVGProps<SVGSVGElement>> = (\n  props,\n) => {\n  return (\n    <svg width=\"1em\" height=\"1em\" viewBox=\"0 0 32 32\" {...props}>\n      <circle cx=\"9\" cy=\"28.5\" r=\"1.5\" fill=\"currentColor\"></circle>\n      <path\n        fill=\"currentColor\"\n        d=\"M10 25H8v-4h2a2 2 0 0 0 0-4H8a2.002 2.002 0 0 0-2 2v.5H4V19a4.005 4.005 0 0 1 4-4h2a4 4 0 0 1 0 8Z\"\n      ></path>\n      <path\n        fill=\"currentColor\"\n        d=\"m27.7 9.3l-7-7A.908.908 0 0 0 20 2H10a2.006 2.006 0 0 0-2 2v8h2V4h8v6a2.006 2.006 0 0 0 2 2h6v16H14v2h12a2.006 2.006 0 0 0 2-2V10a.91.91 0 0 0-.3-.7ZM20 10V4.4l5.6 5.6Z\"\n      ></path>\n    </svg>\n  );\n};\n\nexport const CarbonDocumentAudio: React.VFC<SVGProps<SVGSVGElement>> = (\n  props,\n) => {\n  return (\n    <svg width=\"1em\" height=\"1em\" viewBox=\"0 0 32 32\" {...props}>\n      <path\n        fill=\"currentColor\"\n        d=\"M29 31a.999.999 0 0 1-.625-.22L23.65 27H20a1 1 0 0 1-1-1v-5a1 1 0 0 1 1-1h3.65l4.726-3.78A1 1 0 0 1 30 17v13a1 1 0 0 1-1 1Zm-8-6h3a1 1 0 0 1 .625.22L28 27.92v-8.84l-3.376 2.7A1 1 0 0 1 24 22h-3Z\"\n      ></path>\n      <path\n        fill=\"currentColor\"\n        d=\"M16 28H8V4h8v6a2.006 2.006 0 0 0 2 2h6v3h2v-5a.91.91 0 0 0-.3-.7l-7-7A.909.909 0 0 0 18 2H8a2.006 2.006 0 0 0-2 2v24a2.006 2.006 0 0 0 2 2h8Zm2-23.6l5.6 5.6H18Z\"\n      ></path>\n    </svg>\n  );\n};\n\nexport const CarbonPauseFilled: React.VFC<SVGProps<SVGSVGElement>> = (\n  props,\n) => {\n  return (\n    <svg width=\"1em\" height=\"1em\" viewBox=\"0 0 32 32\" {...props}>\n      <path\n        fill=\"currentColor\"\n        d=\"M12 6h-2a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h2a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2zm10 0h-2a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h2a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2z\"\n      ></path>\n    </svg>\n  );\n};\n\nexport const CarbonPlayFilledAlt: React.VFC<SVGProps<SVGSVGElement>> = (\n  props,\n) => {\n  return (\n    <svg width=\"1em\" height=\"1em\" viewBox=\"0 0 32 32\" {...props}>\n      <path\n        fill=\"currentColor\"\n        d=\"M7 28a1 1 0 0 1-1-1V5a1 1 0 0 1 1.482-.876l20 11a1 1 0 0 1 0 1.752l-20 11A1 1 0 0 1 7 28Z\"\n      ></path>\n    </svg>\n  );\n};\n","import { resolveIpfsUri, resolveMimeType } from \"../utils/ipfs\";\nimport { shouldRenderAudioTag, shouldRenderVideoTag } from \"../utils/media\";\nimport { mergeRefs } from \"../utils/react\";\nimport {\n  CarbonDocumentAudio,\n  CarbonDocumentUnknown,\n  CarbonPauseFilled,\n  CarbonPlayFilledAlt,\n} from \"./Icons\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport React, { useEffect, useMemo, useRef, useState } from \"react\";\nimport useDimensions from \"react-cool-dimensions\";\n\nexport interface SharedMediaProps {\n  className?: string;\n  style?: React.CSSProperties;\n  width?: HTMLIFrameElement[\"width\"];\n  height?: HTMLIFrameElement[\"height\"];\n  /**\n   * Require user interaction to play the media. (default false)\n   */\n  requireInteraction?: boolean;\n  /**\n   * Show the media controls (where applicable) (default false)\n   */\n  controls?: HTMLVideoElement[\"controls\"];\n}\n\n/**\n *\n * The props for the {@link MediaRenderer} component.\n * @public\n */\nexport interface MediaRendererProps extends SharedMediaProps {\n  /**\n   * The media source uri.\n   */\n  src?: string | null;\n  /**\n   * The alt text for the media.\n   */\n  alt?: string;\n  /**\n   * The media poster image uri. (if applicable)\n   */\n  poster?: string | null;\n}\n\ninterface PlayButtonProps {\n  onClick: () => void;\n  isPlaying: boolean;\n}\n\nconst PlayButton: React.VFC<PlayButtonProps> = ({ onClick, isPlaying }) => {\n  const [isHovering, setIsHovering] = useState(false);\n  const onMouseEnter = () => setIsHovering(true);\n  const onMouseLeave = () => setIsHovering(false);\n  const onMouseDown = () => setIsHovering(false);\n  const onMouseUp = () => setIsHovering(true);\n  return (\n    <button\n      style={{\n        position: \"absolute\",\n        bottom: 0,\n        right: 0,\n        transform: \"translate(-25%, -25%)\",\n        maxWidth: \"32px\",\n        width: \"8%\",\n        minWidth: \"24px\",\n        aspectRatio: \"1\",\n        zIndex: 3,\n        backgroundColor: \"#fff\",\n        color: \"rgb(138, 147, 155)\",\n        display: \"grid\",\n        placeItems: \"center\",\n        borderRadius: \"50%\",\n        border: \"1px solid rgb(229, 232, 235)\",\n        cursor: \"pointer\",\n        ...(isHovering\n          ? {\n              color: \"rgb(53, 56, 64)\",\n              boxShadow: \"rgb(4 17 29 / 25%) 0px 0px 8px 0px\",\n            }\n          : {}),\n      }}\n      onClick={onClick}\n      onMouseEnter={onMouseEnter}\n      onMouseLeave={onMouseLeave}\n      onMouseDown={onMouseDown}\n      onMouseUp={onMouseUp}\n    >\n      {!isPlaying ? (\n        <CarbonPlayFilledAlt style={{ width: \"66%\", height: \"66%\" }} />\n      ) : (\n        <CarbonPauseFilled style={{ width: \"66%\", height: \"66%\" }} />\n      )}\n    </button>\n  );\n};\n\nconst VideoPlayer = React.forwardRef<\n  HTMLVideoElement,\n  React.PropsWithChildren<MediaRendererProps>\n>(\n  (\n    {\n      src,\n      alt,\n      poster,\n      requireInteraction,\n      children,\n      style,\n      width,\n      height,\n      controls,\n      ...restProps\n    },\n    ref,\n  ) => {\n    const videoRef = useRef<HTMLVideoElement>(null);\n    const [playing, setPlaying] = useState(!requireInteraction);\n    const [muted, setMuted] = useState(true);\n\n    useEffect(() => {\n      if (videoRef.current) {\n        if (playing) {\n          videoRef.current.play();\n        } else {\n          videoRef.current.pause();\n          videoRef.current.currentTime = 0;\n        }\n      }\n    }, [playing]);\n\n    return (\n      <div style={{ position: \"relative\", ...style }} {...restProps}>\n        <video\n          ref={mergeRefs([videoRef, ref])}\n          src={src ?? undefined}\n          poster={poster ?? undefined}\n          loop\n          playsInline\n          muted={muted}\n          preload={poster ? \"metadata\" : \"auto\"}\n          onCanPlay={() => {\n            if (playing) {\n              videoRef.current?.play();\n            }\n          }}\n          width={width}\n          height={height}\n          controls={controls}\n          style={{\n            height: \"100%\",\n            width: \"100%\",\n            objectFit: \"contain\",\n            zIndex: 1,\n            transition: \"opacity .5s\",\n            opacity: !poster ? 1 : playing ? 1 : 0,\n          }}\n        />\n        {poster && (\n          <img\n            src={poster}\n            style={{\n              objectFit: \"contain\",\n              pointerEvents: \"none\",\n              position: \"absolute\",\n              width: \"100%\",\n              height: \"100%\",\n              zIndex: 2,\n              transition: \"opacity .5s\",\n              opacity: playing ? 0 : 1,\n              top: 0,\n              left: 0,\n              right: 0,\n              bottom: 0,\n            }}\n          />\n        )}\n        <PlayButton\n          onClick={() => {\n            setPlaying((prev) => !prev);\n            setMuted(false);\n          }}\n          isPlaying={playing}\n        />\n      </div>\n    );\n  },\n);\n\nconst AudioPlayer = React.forwardRef<\n  HTMLAudioElement,\n  React.PropsWithChildren<MediaRendererProps>\n>(\n  (\n    {\n      src,\n      alt,\n      poster,\n      requireInteraction,\n      children,\n      style,\n      height,\n      width,\n      controls,\n      ...restProps\n    },\n    ref,\n  ) => {\n    const audioRef = useRef<HTMLAudioElement>(null);\n    const [playing, setPlaying] = useState(false);\n    const [muted, setMuted] = useState(true);\n\n    useEffect(() => {\n      if (audioRef.current) {\n        if (playing) {\n          audioRef.current.play();\n        } else {\n          audioRef.current.pause();\n          audioRef.current.currentTime = 0;\n        }\n      }\n    }, [playing]);\n\n    return (\n      <div style={{ position: \"relative\", ...style }} {...restProps}>\n        {poster ? (\n          <img\n            height={height}\n            width={width}\n            src={poster}\n            style={{\n              height: \"100%\",\n              width: \"100%\",\n              pointerEvents: \"none\",\n              objectFit: \"contain\",\n            }}\n          />\n        ) : (\n          <div\n            style={{\n              width: \"100%\",\n              height: \"100%\",\n              display: \"grid\",\n              placeItems: \"center\",\n              pointerEvents: \"none\",\n              backgroundColor: \"#fff\",\n              color: \"rgb(138, 147, 155)\",\n            }}\n          >\n            <CarbonDocumentAudio style={{ height: \"64px\", width: \"64px\" }} />\n          </div>\n        )}\n\n        <PlayButton\n          onClick={() => {\n            setPlaying((prev) => !prev);\n            setMuted(false);\n          }}\n          isPlaying={playing}\n        />\n        <audio\n          ref={mergeRefs([audioRef, ref])}\n          src={src ?? undefined}\n          loop\n          playsInline\n          muted={muted}\n          style={{\n            position: \"absolute\",\n            opacity: 0,\n            pointerEvents: \"none\",\n            zIndex: -1,\n            visibility: \"hidden\",\n          }}\n        />\n      </div>\n    );\n  },\n);\n\nconst IframePlayer = React.forwardRef<\n  HTMLIFrameElement,\n  React.PropsWithChildren<MediaRendererProps>\n>(\n  (\n    {\n      src,\n      alt,\n      poster,\n      requireInteraction,\n      children,\n      style,\n      height,\n      width,\n      controls,\n      ...restProps\n    },\n    ref,\n  ) => {\n    const { observe, width: elWidth } = useDimensions<HTMLDivElement | null>();\n    const [playing, setPlaying] = useState(!requireInteraction);\n\n    if (elWidth < 300) {\n      return (\n        <div ref={observe}>\n          <LinkPlayer style={style} src={src} alt={alt} {...restProps} />\n        </div>\n      );\n    }\n\n    return (\n      <div\n        style={{ position: \"relative\", ...style }}\n        {...restProps}\n        ref={observe}\n      >\n        <iframe\n          src={playing ? src ?? undefined : undefined}\n          ref={ref}\n          style={{\n            objectFit: \"contain\",\n            zIndex: 1,\n            height: \"100%\",\n            width: \"100%\",\n            transition: \"opacity .5s\",\n            opacity: !poster ? 1 : playing ? 1 : 0,\n          }}\n        />\n        {poster && (\n          <img\n            src={poster}\n            style={{\n              objectFit: \"contain\",\n              pointerEvents: \"none\",\n              position: \"absolute\",\n              width: \"100%\",\n              height: \"100%\",\n              zIndex: 2,\n              transition: \"opacity .5s\",\n              opacity: playing ? 0 : 1,\n              top: 0,\n              left: 0,\n              right: 0,\n              bottom: 0,\n            }}\n          />\n        )}\n        <PlayButton\n          onClick={() => {\n            setPlaying((prev) => !prev);\n          }}\n          isPlaying={playing}\n        />\n      </div>\n    );\n  },\n);\nconst LinkPlayer = React.forwardRef<\n  HTMLAnchorElement,\n  React.PropsWithChildren<MediaRendererProps>\n>(\n  (\n    {\n      src,\n      alt,\n      poster,\n      requireInteraction,\n      children,\n      style,\n      height,\n      width,\n      controls,\n      ...restProps\n    },\n    ref,\n  ) => {\n    return (\n      <div style={{ position: \"relative\", ...style }} {...restProps}>\n        <div\n          style={{\n            width: \"100%\",\n            height: \"100%\",\n            display: \"grid\",\n            placeItems: \"center\",\n            backgroundColor: \"#fff\",\n            color: \"rgb(138, 147, 155)\",\n          }}\n        >\n          <div\n            style={{\n              display: \"flex\",\n              flexDirection: \"column\",\n              gap: \"8px\",\n              alignItems: \"center\",\n              flexWrap: \"nowrap\",\n            }}\n          >\n            <CarbonDocumentUnknown\n              style={{\n                maxWidth: \"128px\",\n                minWidth: \"48px\",\n                width: \"50%\",\n                aspectRatio: \"1\",\n              }}\n            />\n            <a\n              rel=\"noopener noreferrer\"\n              style={{\n                textDecoration: \"underline\",\n                color: \"rgb(138, 147, 155)\",\n              }}\n              href={src ?? undefined}\n              target=\"_blank\"\n              ref={ref as unknown as React.LegacyRef<HTMLAnchorElement>}\n            >\n              {alt || \"File\"}\n            </a>\n          </div>\n        </div>\n      </div>\n    );\n  },\n);\n\n/**\n * This component can be used to render any media type, including image, audio, video, and html files.\n * Its convenient for rendering NFT media files, as these can be a variety of different types.\n * The component falls back to a external link if the media type is not supported.\n *\n * Props: {@link MediaRendererProps}\n *\n * @example\n * We can take a video file hosted on IPFS and render it using this component as follows\n * ```jsx\n * const Component = () => {\n *   return <MediaRenderer\n *     src=\"ipfs://Qmb9ZV5yznE4C4YvyJe8DVFv1LSVkebdekY6HjLVaKmHZi\"\n *     alt=\"A mp4 video\"\n *   />\n * }\n * ```\n *\n * You can try switching out the `src` prop to different types of URLs and media types to explore the possibilities.\n */\nexport const MediaRenderer = React.forwardRef<\n  HTMLMediaElement,\n  React.PropsWithChildren<MediaRendererProps>\n>(\n  (\n    {\n      children,\n      src,\n      poster,\n      alt,\n      requireInteraction = false,\n      style,\n      ...restProps\n    },\n    ref,\n  ) => {\n    const mergedStyle: React.CSSProperties = { objectFit: \"contain\", ...style };\n    const videoOrImageSrc = useResolvedMediaType(src ?? undefined);\n    const possiblePosterSrc = useResolvedMediaType(poster ?? undefined);\n    if (!videoOrImageSrc.mimeType) {\n      return (\n        <img\n          style={mergedStyle}\n          {...restProps}\n          ref={ref as unknown as React.LegacyRef<HTMLImageElement>}\n        />\n      );\n    } else if (videoOrImageSrc.mimeType === \"text/html\") {\n      return (\n        <IframePlayer\n          style={mergedStyle}\n          src={videoOrImageSrc.url}\n          poster={possiblePosterSrc.url}\n          requireInteraction={requireInteraction}\n          {...restProps}\n        />\n      );\n    } else if (shouldRenderVideoTag(videoOrImageSrc.mimeType)) {\n      return (\n        <VideoPlayer\n          style={mergedStyle}\n          src={videoOrImageSrc.url}\n          poster={possiblePosterSrc.url}\n          requireInteraction={requireInteraction}\n          {...restProps}\n        />\n      );\n    } else if (shouldRenderAudioTag(videoOrImageSrc.mimeType)) {\n      return (\n        <AudioPlayer\n          style={mergedStyle}\n          src={videoOrImageSrc.url}\n          poster={possiblePosterSrc.url}\n          requireInteraction={requireInteraction}\n          {...restProps}\n        />\n      );\n    } else if (videoOrImageSrc.mimeType.startsWith(\"image/\")) {\n      return (\n        <img\n          style={mergedStyle}\n          src={videoOrImageSrc.url}\n          alt={alt}\n          ref={ref as unknown as React.LegacyRef<HTMLImageElement>}\n          {...restProps}\n        />\n      );\n    }\n    return (\n      <LinkPlayer\n        style={mergedStyle}\n        src={videoOrImageSrc.url}\n        alt={alt}\n        ref={ref as unknown as React.Ref<HTMLAnchorElement>}\n        {...restProps}\n      />\n    );\n  },\n);\n\nexport interface MediaType {\n  url?: string;\n  mimeType?: string;\n}\n\n/**\n * @param uri - the uri to resolve (can be a url or a ipfs://\\<cid\\>)\n * @returns the fully resolved url + mime type of the media\n *\n * @example\n * Usage with fully formed url:\n * ```jsx\n * const Component = () => {\n *   const resolved = useResolvedMediaType(\"https://example.com/video.mp4\");\n *   console.log(\"mime type\", resolved.data.mimeType);\n *   console.log(\"url\", resolved.data.url);\n *   return null;\n * }\n * ```\n *\n * Usage with ipfs cid:\n * ```jsx\n * const Component = () => {\n *   const resolved = useResolvedMediaType(\"ipfs://QmWATWQ7fVPP2EFGu71UkfnqhYXDYH566qy47CnJDgvsd\");\n *   console.log(\"mime type\", resolved.data.mimeType);\n *   console.log(\"url\", resolved.data.url);\n *   return null;\n * }\n * ```\n */\nexport function useResolvedMediaType(uri?: string) {\n  const resolvedUrl = useMemo(() => resolveIpfsUri(uri), [uri]);\n  const resolvedMimType = useQuery(\n    [\"mime-type\", resolvedUrl],\n    () => resolveMimeType(resolvedUrl),\n    {\n      enabled: !!resolvedUrl,\n    },\n  );\n\n  return {\n    url: resolvedUrl,\n    mimeType: resolvedMimType.data,\n  };\n}\n","import { MediaRenderer, SharedMediaProps } from \"./MediaRenderer\";\nimport { NFTMetadata } from \"@thirdweb-dev/sdk/dist/browser\";\nimport React from \"react\";\n\n/**\n * The props for the {@link ThirdwebNftMedia} component.\n */\nexport interface ThirdwebNftMediaProps extends SharedMediaProps {\n  /**\n   * The NFT metadata of the NFT returned by the thirdweb sdk.\n   */\n  metadata: NFTMetadata;\n}\n\n/**\n *\n * @example\n * ```jsx\n * import { ThirdwebNftMedia, useNFTCollection, useNFT } from \"@thirdweb-dev/react\";\n * export default function NFTCollectionRender() {\n *   const contract = useNFTCollection(<your-contract-address>);\n *   const { data: nft, isLoading } = useNFT(contract, 0);\n *\n *   return (\n *     <div>\n *       {!isLoading && nft ? (\n *         <ThirdwebNftMedia metadata={nft.metadata} />\n *       ) : (\n *         <p>Loading...</p>\n *       )}\n *     </div>\n *   );\n * }\n * ```\n *\n * Use this to get the primary sales recipient of your {@link SmartContract}\n * @param contract - an instance of a {@link SmartContract}\n * @returns the wallet address of the primary sales recipient\n * @beta\n */\nexport const ThirdwebNftMedia = React.forwardRef<\n  HTMLMediaElement,\n  ThirdwebNftMediaProps\n>(({ metadata, ...props }, ref) => {\n  return (\n    <MediaRenderer\n      src={metadata.animation_url || metadata.image}\n      poster={metadata.image}\n      alt={metadata.name}\n      ref={ref}\n      {...props}\n    />\n  );\n});\n","import { useActiveChainId } from \"../../Provider\";\nimport { createCacheKeyWithNetwork } from \"../../utils/cache-keys\";\nimport {\n  QueryFunction,\n  QueryKey,\n  UseQueryOptions,\n  UseQueryResult,\n  useQuery,\n} from \"@tanstack/react-query\";\n\n/** @internal */\nexport function useQueryWithNetwork<\n  TQueryFnData = unknown,\n  TError = unknown,\n  TData = TQueryFnData,\n  TQueryKey extends QueryKey = QueryKey,\n>(\n  queryKey: TQueryKey,\n  queryFn: QueryFunction<TQueryFnData, TQueryKey>,\n  options?: Omit<\n    UseQueryOptions<TQueryFnData, TError, TData, TQueryKey>,\n    \"queryKey\" | \"queryFn\"\n  >,\n): UseQueryResult<TData, TError> {\n  const activeChainId = useActiveChainId();\n\n  const mergedOptions: Omit<\n    UseQueryOptions<TQueryFnData, TError, TData, TQueryKey>,\n    \"queryKey\" | \"queryFn\"\n  > = {\n    ...options,\n    enabled: !!(activeChainId && options?.enabled),\n  };\n\n  return useQuery<TQueryFnData, TError, TData, TQueryKey>(\n    createCacheKeyWithNetwork(queryKey, activeChainId) as TQueryKey,\n    queryFn,\n    mergedOptions,\n  );\n}\n","import { useActiveChainId, useSDK } from \"../../Provider\";\nimport { ContractAddress, RequiredParam } from \"../../types\";\nimport {\n  cacheKeys,\n  createCacheKeyWithNetwork,\n  createContractCacheKey,\n} from \"../../utils/cache-keys\";\nimport { useQueryWithNetwork } from \"../query-utils/useQueryWithNetwork\";\nimport {\n  QueryClient,\n  useMutation,\n  useQuery,\n  useQueryClient,\n} from \"@tanstack/react-query\";\nimport type {\n  ContractEvent,\n  EventQueryFilter,\n  ThirdwebSDK,\n} from \"@thirdweb-dev/sdk/dist/browser\";\n// eslint-disable-next-line no-duplicate-imports\nimport { CONTRACTS_MAP, SmartContract } from \"@thirdweb-dev/sdk/dist/browser\";\nimport type {\n  CustomContractMetadata,\n  PublishedMetadata,\n} from \"@thirdweb-dev/sdk/dist/src/schema/contracts/custom\";\nimport { CallOverrides } from \"ethers\";\nimport { useEffect, useMemo } from \"react\";\nimport invariant from \"tiny-invariant\";\n\nasync function fetchContractType(\n  contractAddress: RequiredParam<string>,\n  sdk: RequiredParam<ThirdwebSDK>,\n) {\n  if (!contractAddress || !sdk) {\n    return;\n  }\n  try {\n    return await sdk.resolveContractType(contractAddress);\n  } catch (err) {\n    // expected error, return custom type instead\n    return \"custom\" as const;\n  }\n}\n\nasync function fetchContractCompilerMetadata(\n  contractAddress: RequiredParam<string>,\n  sdk: RequiredParam<ThirdwebSDK>,\n) {\n  if (!contractAddress || !sdk) {\n    return;\n  }\n\n  return await (\n    await sdk.getPublisher()\n  ).fetchCompilerMetadataFromAddress(contractAddress);\n}\nasync function fetchContractTypeAndCompilerMetadata(\n  queryClient: QueryClient,\n  contractAddress?: string,\n  sdk?: ThirdwebSDK,\n) {\n  if (!contractAddress || !sdk) {\n    return;\n  }\n  const contractType = await queryClient.fetchQuery(\n    createCacheKeyWithNetwork(\n      cacheKeys.contract.type(contractAddress),\n      (sdk as any)._chainId,\n    ),\n    () => fetchContractType(contractAddress, sdk),\n    // is immutable, so infinite stale time\n    { staleTime: Infinity },\n  );\n  if (contractType !== \"custom\") {\n    return {\n      contractType,\n      compilerMetadata: null,\n    };\n  }\n  const compilerMetadata = await queryClient.fetchQuery(\n    createCacheKeyWithNetwork(\n      cacheKeys.contract.compilerMetadata(contractAddress),\n      (sdk as any)._chainId,\n    ),\n    () => fetchContractCompilerMetadata(contractAddress, sdk),\n    // is immutable, so infinite stale time\n    { staleTime: Infinity },\n  );\n  return {\n    contractType,\n    compilerMetadata,\n  };\n}\n\nfunction getContractAbi(\n  input: RequiredParam<\n    Awaited<ReturnType<typeof fetchContractTypeAndCompilerMetadata>>\n  >,\n) {\n  if (!input || !input.contractType) {\n    return null;\n  }\n  let contractAbi: PublishedMetadata[\"abi\"] | null = null;\n  if (input.contractType !== \"custom\") {\n    contractAbi = CONTRACTS_MAP[input.contractType].contractAbi;\n  }\n  if (input.contractType === \"custom\" && input.compilerMetadata) {\n    contractAbi = input.compilerMetadata?.abi;\n  }\n\n  return contractAbi;\n}\n\nfunction getContractFromCombinedTypeAndCompilerMetadata(\n  contractAddress: RequiredParam<ContractAddress>,\n  input: RequiredParam<\n    Awaited<ReturnType<typeof fetchContractTypeAndCompilerMetadata>>\n  >,\n  sdk: RequiredParam<ThirdwebSDK>,\n) {\n  if (!input || !sdk || !contractAddress || !input.contractType) {\n    return null;\n  }\n\n  const contractAbi = getContractAbi(input);\n\n  invariant(\n    contractAbi,\n    `could not resolve any ABI for contract${contractAddress}`,\n  );\n  return sdk.getContractFromAbi(contractAddress, contractAbi);\n}\n\n/**\n *\n * @internal\n *\n * @param contractAddress - contract address\n * @returns the contract abi\n */\nexport function useContractAbi(\n  contractAddress: RequiredParam<ContractAddress>,\n) {\n  const sdk = useSDK();\n\n  const contractTypeAndCompilerMetadata =\n    useContractTypeAndCompilerMetadata(contractAddress);\n\n  if (\n    !contractAddress ||\n    !sdk ||\n    !contractTypeAndCompilerMetadata.data?.contractType\n  ) {\n    return {\n      ...contractTypeAndCompilerMetadata,\n      abi: null,\n    };\n  }\n\n  const abi = getContractAbi(contractTypeAndCompilerMetadata.data);\n  return { ...contractTypeAndCompilerMetadata, abi };\n}\n\n/**\n * Use this to get the contract type for a (built-in or custom) contract.\n *\n * @example\n * ```javascript\n * const { data: contractType, isLoading, error } = useContractType(\"{{contract_address}}\");\n * ```\n *\n * @param contractAddress - the address of the deployed contract\n * @returns a response object that includes the contract type of the contract\n * @beta\n */\nexport function useContractType(\n  contractAddress: RequiredParam<ContractAddress>,\n) {\n  const sdk = useSDK();\n  return useQueryWithNetwork(\n    cacheKeys.contract.type(contractAddress),\n    () => fetchContractType(contractAddress, sdk),\n    {\n      enabled: !!sdk && !!contractAddress,\n      // never stale, a contract's publish metadata is immutable\n      staleTime: Infinity,\n    },\n  );\n}\n\n/**\n * Use this to get the publish metadata for a deployed contract.\n *\n * @example\n * ```javascript\n * const { data: compilerMetadata, isLoading, error } = useContractCompilerMetadata(\"{{contract_address}}\");\n * ```\n *\n * @param contractAddress - the address of the deployed contract\n * @returns a response object that includes the published metadata (name, abi, bytecode) of the contract\n * @beta\n */\nexport function useContractCompilerMetadata(\n  contractAddress: RequiredParam<ContractAddress>,\n) {\n  const sdk = useSDK();\n  return useQueryWithNetwork(\n    cacheKeys.contract.compilerMetadata(contractAddress),\n    () => fetchContractCompilerMetadata(contractAddress, sdk),\n    {\n      enabled: !!sdk && !!contractAddress,\n      // never stale, a contract's publish metadata is immutable\n      staleTime: Infinity,\n    },\n  );\n}\n\n/**\n * @internal\n */\nfunction useContractTypeAndCompilerMetadata(\n  contractAddress: RequiredParam<ContractAddress>,\n) {\n  const sdk = useSDK();\n  const queryClient = useQueryClient();\n  return useQueryWithNetwork(\n    cacheKeys.contract.typeAndCompilerMetadata(contractAddress),\n    () =>\n      fetchContractTypeAndCompilerMetadata(queryClient, contractAddress, sdk),\n    {\n      enabled: !!sdk && !!contractAddress,\n      // combination of type and publish metadata is immutable\n      staleTime: Infinity,\n    },\n  );\n}\n\n/**\n * Use this resolve a contract address to a thirdweb (built-in / custom) contract instance.\n *\n * @example\n * ```javascript\n * const { contract, isLoading, error } = useContract(\"{{contract_address}}\");\n * ```\n *\n * @param contractAddress - the address of the deployed contract\n * @returns a response object that includes the contract once it is resolved\n * @beta\n */\nexport function useContract(contractAddress: RequiredParam<ContractAddress>) {\n  const sdk = useSDK();\n\n  const contractTypeAndCompilerMetadata =\n    useContractTypeAndCompilerMetadata(contractAddress);\n\n  if (\n    !contractAddress ||\n    !sdk ||\n    !contractTypeAndCompilerMetadata.data?.contractType\n  ) {\n    return {\n      ...contractTypeAndCompilerMetadata,\n      contract: null,\n    };\n  }\n\n  const contract = getContractFromCombinedTypeAndCompilerMetadata(\n    contractAddress,\n    contractTypeAndCompilerMetadata.data,\n    sdk,\n  );\n  return { ...contractTypeAndCompilerMetadata, contract };\n}\n\n/**\n * Use this to get the contract metadata for a (built-in or custom) contract.\n *\n * @example\n * ```javascript\n * const { data: contractMetadata, isLoading, error } = useContractMetadata(\"{{contract_address}}\");\n * ```\n *\n * @param contractAddress - the address of the deployed contract\n * @returns a response object that includes the contract metadata of the deployed contract\n * @beta\n */\nexport function useContractMetadata(\n  contractAddress: RequiredParam<ContractAddress>,\n) {\n  const sdk = useSDK();\n  const queryClient = useQueryClient();\n  const activeChainId = useActiveChainId();\n  return useQueryWithNetwork(\n    cacheKeys.contract.metadata(contractAddress),\n    async () => {\n      const typeAndCompilerMetadata = await queryClient.fetchQuery(\n        createCacheKeyWithNetwork(\n          cacheKeys.contract.typeAndCompilerMetadata(contractAddress),\n          activeChainId,\n        ),\n        () =>\n          fetchContractTypeAndCompilerMetadata(\n            queryClient,\n            contractAddress,\n            sdk,\n          ),\n        // is immutable, so infinite stale time\n        { staleTime: Infinity },\n      );\n      const contract = getContractFromCombinedTypeAndCompilerMetadata(\n        contractAddress,\n        typeAndCompilerMetadata,\n        sdk,\n      );\n      invariant(contract?.metadata?.get, \"contract metadata is not available\");\n      return (await contract.metadata.get()) as CustomContractMetadata;\n    },\n    {\n      enabled: !!contractAddress || !!sdk,\n    },\n  );\n}\n\n/**\n @internal\n */\nexport function useContractFunctions(\n  contractAddress: RequiredParam<ContractAddress>,\n) {\n  const sdk = useSDK();\n  const queryClient = useQueryClient();\n  const activeChainId = useActiveChainId();\n  return useQueryWithNetwork(\n    cacheKeys.contract.extractFunctions(contractAddress),\n    async () => {\n      const typeAndCompilerMetadata = await queryClient.fetchQuery(\n        createCacheKeyWithNetwork(\n          cacheKeys.contract.typeAndCompilerMetadata(contractAddress),\n          activeChainId,\n        ),\n        () =>\n          fetchContractTypeAndCompilerMetadata(\n            queryClient,\n            contractAddress,\n            sdk,\n          ),\n        // is immutable, so infinite stale time\n        { staleTime: Infinity },\n      );\n      const contract = getContractFromCombinedTypeAndCompilerMetadata(\n        contractAddress,\n        typeAndCompilerMetadata,\n        sdk,\n      );\n      if (contract instanceof SmartContract) {\n        return contract.publishedMetadata.extractFunctions();\n      }\n      return null;\n    },\n    {\n      enabled: !!contractAddress || !!sdk,\n      // functions are based on publish metadata (abi), so this is immutable\n      staleTime: Infinity,\n    },\n  );\n}\n\n/**\n * Use this to get data from a contract read-function call.\n *\n * @example\n * ```javascript\n * const { contract } = useContract(\"{{contract_address}}\");\n * const { data, isLoading, error } = useContractData(contract, \"functionName\", ...args);\n *```\n *\n * @param contract - the contract instance of the contract to call a function on\n * @param functionName - the name of the function to call\n * @param args - The arguments to pass to the function (if any), with optional call arguments as the last parameter\n * @returns a response object that includes the data returned by the function call\n *\n * @beta\n */\nexport function useContractData(\n  contract: RequiredParam<ReturnType<typeof useContract>[\"contract\"]>,\n  functionName: RequiredParam<string>,\n  ...args: unknown[] | [...unknown[], CallOverrides]\n) {\n  const contractAddress = contract?.getAddress();\n  return useQueryWithNetwork(\n    cacheKeys.contract.call(contractAddress, functionName, args),\n    () => {\n      invariant(contract, \"contract must be defined\");\n      invariant(functionName, \"function name must be provided\");\n      return contract.call(functionName, ...args);\n    },\n    {\n      enabled: !!contract && !!functionName,\n    },\n  );\n}\n\n/**\n * Use this to get a function to make a write call to your contract\n *\n * @example\n * ```javascript\n * const { contract } = useContract(\"{{contract_address}}\");\n * const { mutate: myFunction, isLoading, error } = useContractCall(contract, \"myFunction\");\n *\n * // the function can be called as follows:\n * // myFunction([\"param 1\", \"param 2\", ...])\n *```\n *\n * @param contract - the contract instance of the contract to call a function on\n * @param functionName - the name of the function to call\n * @returns a response object that includes the write function to call\n *\n * @beta\n */\nexport function useContractCall(\n  contract: RequiredParam<ReturnType<typeof useContract>[\"contract\"]>,\n  functionName: RequiredParam<string>,\n) {\n  const activeChainId = useActiveChainId();\n  const contractAddress = contract?.getAddress();\n  const queryClient = useQueryClient();\n\n  return useMutation(\n    async (callParams?: unknown[] | [...unknown[], CallOverrides]) => {\n      invariant(contract, \"contract must be defined\");\n      invariant(functionName, \"function name must be provided\");\n      if (!callParams?.length) {\n        return contract.call(functionName);\n      }\n      return contract.call(functionName, ...callParams);\n    },\n    {\n      onSettled: () =>\n        queryClient.invalidateQueries(\n          createCacheKeyWithNetwork(\n            createContractCacheKey(contractAddress),\n            activeChainId,\n          ),\n        ),\n    },\n  );\n}\n\n/**\n * Use this to query (and subscribe) to all events on a contract.\n *\n * @param contract - the contract instance of the contract to call a function on\n * @param options - options incldues the filters ({@link QueryAllEvents}) for the query as well as if you want to subscribe to real-time updates (default: true)\n * @returns a response object that includes the contract events\n * @beta\n */\nexport function useAllContractEvents(\n  contract: RequiredParam<ReturnType<typeof useContract>[\"contract\"]>,\n  options: { queryFilter?: EventQueryFilter; subscribe?: boolean } = {\n    subscribe: true,\n  },\n) {\n  const contractAddress = contract?.getAddress();\n  const queryEnabled = !!contract;\n  const queryClient = useQueryClient();\n  const activeChainId = useActiveChainId();\n\n  const cacheKey = useMemo(\n    () =>\n      createCacheKeyWithNetwork(\n        cacheKeys.contract.events.getAllEvents(contractAddress),\n        activeChainId,\n      ),\n    [contractAddress],\n  );\n  useEffect(() => {\n    // if we're not subscribing or query is not enabled yet we can early exit\n    if (!options.subscribe || !queryEnabled || !contract) {\n      return;\n    }\n\n    const cleanupListener = contract.events.listenToAllEvents(\n      (contractEvent) => {\n        // insert new event to the front of the array (no duplicates, though)\n        queryClient.setQueryData(\n          cacheKey,\n          (oldData: ContractEvent[] | undefined) => {\n            if (!oldData) {\n              return [contractEvent];\n            }\n            const eventIsNotAlreadyInEventsList =\n              oldData.findIndex(\n                (e) =>\n                  e.transaction.transactionHash ===\n                    contractEvent.transaction.transactionHash &&\n                  e.transaction.logIndex === contractEvent.transaction.logIndex,\n              ) === -1;\n            if (eventIsNotAlreadyInEventsList) {\n              return [contractEvent, ...oldData];\n            }\n            return oldData;\n          },\n        );\n      },\n    );\n    // cleanup listener on unmount\n    return cleanupListener;\n  }, [queryEnabled, options.subscribe, cacheKey]);\n\n  return useQuery(\n    cacheKey,\n    () => {\n      invariant(contract, \"contract must be defined\");\n      return contract.events.getAllEvents(options.queryFilter);\n    },\n    {\n      enabled: queryEnabled,\n      // we do not need to re-fetch if we're subscribing\n      refetchOnWindowFocus: !options.subscribe,\n      refetchOnMount: true,\n      refetchOnReconnect: true,\n    },\n  );\n}\n\n/**\n * Use this to query (and subscribe) to a specific event on a contract.\n *\n * @param contract - the contract instance of the contract to call a function on\n * @param options - options incldues the filters ({@link QueryAllEvents}) for the query as well as if you want to subscribe to real-time updates (default: true)\n * @returns a response object that includes the contract events\n * @beta\n */\nexport function useContractEvents(\n  contract: RequiredParam<ReturnType<typeof useContract>[\"contract\"]>,\n  eventName: string,\n  options: { queryFilter?: EventQueryFilter; subscribe?: boolean } = {\n    subscribe: true,\n  },\n) {\n  const contractAddress = contract?.getAddress();\n  const queryEnabled = !!contract && !!eventName;\n  const queryClient = useQueryClient();\n  const activeChainId = useActiveChainId();\n\n  const cacheKey = useMemo(\n    () =>\n      createCacheKeyWithNetwork(\n        cacheKeys.contract.events.getAllEvents(contractAddress),\n        activeChainId,\n      ),\n    [contractAddress],\n  );\n  useEffect(() => {\n    // if we're not subscribing or query is not enabled yet we can early exit\n    if (!options.subscribe || !queryEnabled || !contract || !eventName) {\n      return;\n    }\n\n    const cleanupListener = contract.events.listenToAllEvents(\n      (contractEvent) => {\n        // insert new event to the front of the array (no duplicates, though)\n        queryClient.setQueryData(\n          cacheKey,\n          (oldData: ContractEvent[] | undefined) => {\n            if (!oldData) {\n              return [contractEvent];\n            }\n            const eventIsNotAlreadyInEventsList =\n              oldData.findIndex(\n                (e) =>\n                  e.transaction.transactionHash ===\n                    contractEvent.transaction.transactionHash &&\n                  e.transaction.logIndex === contractEvent.transaction.logIndex,\n              ) === -1;\n            if (eventIsNotAlreadyInEventsList) {\n              return [contractEvent, ...oldData];\n            }\n            return oldData;\n          },\n        );\n      },\n    );\n    // cleanup listener on unmount\n    return cleanupListener;\n  }, [queryEnabled, options.subscribe, cacheKey, eventName]);\n\n  return useQuery(\n    cacheKey,\n    () => {\n      invariant(contract, \"contract must be defined\");\n      return contract.events.getEvents(eventName, options.queryFilter);\n    },\n    {\n      enabled: queryEnabled,\n      // we do not need to re-fetch if we're subscribing\n      refetchOnWindowFocus: !options.subscribe,\n      refetchOnMount: true,\n      refetchOnReconnect: true,\n    },\n  );\n}\n","import { useActiveChainId } from \"../../Provider\";\nimport {\n  AirdropNFTParams,\n  BurnNFTParams,\n  MintNFTParams,\n  MintNFTReturnType,\n  MintNFTSupplyParams,\n  NFT,\n  NFTContract,\n  RequiredParam,\n  TransferNFTParams,\n  WalletAddress,\n  useNFTBalanceParams,\n  useTotalCirculatingSupplyParams,\n} from \"../../types\";\nimport {\n  cacheKeys,\n  invalidateContractAndBalances,\n} from \"../../utils/cache-keys\";\nimport { useQueryWithNetwork } from \"../query-utils/useQueryWithNetwork\";\nimport { useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport {\n  Erc721,\n  Erc1155,\n  QueryAllParams,\n} from \"@thirdweb-dev/sdk/dist/browser\";\nimport { BigNumber, BigNumberish } from \"ethers\";\nimport invariant from \"tiny-invariant\";\n\n/**\n * @internal\n */\nfunction convertResponseToNFTType(\n  contract: NFTContract,\n  metadata: Awaited<ReturnType<typeof contract[\"get\"]>>,\n): NFT<typeof contract> {\n  if (contract instanceof Erc721) {\n    return {\n      type: \"ERC721\",\n      supply: 1,\n      owner: \"\",\n      ...metadata,\n    } as NFT<Erc721>;\n  }\n  return {\n    type: \"ERC1155\",\n    supply: 0,\n    owner: \"\",\n    ...metadata,\n  } as NFT<Erc1155>;\n}\n\n/**\n * @internal\n */\nfunction convertResponseToNFTTypeArray(\n  contract: NFTContract,\n  metadata: Awaited<ReturnType<typeof contract[\"get\"]>>[],\n): NFT<typeof contract>[] {\n  return metadata.map((m) => convertResponseToNFTType(contract, m));\n}\n/** **********************/\n/**     READ  HOOKS     **/\n/** **********************/\n\n/**\n * Use this to get an individual NFT token of your {@link NFTContract}.\n *\n * @example\n * ```javascript\n * const nftDrop = useNFTDrop(<ContractAddress>);\n * const { data: nft, isLoading, error } = useNFT(nftDrop, <tokenId>);\n * ```\n * @example\n * ```javascript\n * const { contract } = useContract(<ContractAddress>);\n * const { data: nft, isLoading, error } = useNFT(contract?.nft, <tokenId>);\n * ```\n *\n * @param contract - an instance of a {@link NFTContract}\n * @param tokenId - the tokenId to look up\n * @returns a response object that includes the metadata for the given tokenId\n * @beta\n */\nexport function useNFT<TContract extends NFTContract>(\n  contract: RequiredParam<TContract>,\n  tokenId: RequiredParam<BigNumberish>,\n) {\n  const contractAddress = contract?.getAddress();\n\n  return useQueryWithNetwork<NFT<TContract>>(\n    cacheKeys.contract.nft.get(contractAddress, tokenId),\n    async () => {\n      invariant(contract, \"No Contract instance provided\");\n      invariant(contract.get, \"Contract instance does not support get\");\n\n      return convertResponseToNFTType(\n        contract,\n        await contract.get(BigNumber.from(tokenId || 0)),\n      );\n    },\n    {\n      enabled: !!contract && tokenId !== undefined,\n    },\n  );\n}\n\n/**\n * Use this to get a list of NFT tokens of your {@link NFTContract}.\n *\n * @example\n * ```javascript\n * const nftDrop = useNFTDrop(<ContractAddress>);\n * const { data: nfts, isLoading, error } = useNFTs(nftDrop, { start: 0, count: 100 });\n * ```\n * @example\n * ```javascript\n * const { contract } = useContract(<ContractAddress>);\n * const { data: nfts, isLoading, error } = useNFTs(contract?.nft, { start: 0, count: 100 });\n * ```\n *\n * @param contract - an instance of a {@link NFTContract}\n * @param queryParams - query params to pass to the query for the sake of pagination\n * @returns a response object that includes an array of NFTs\n * @beta\n */\nexport function useNFTs<TContract extends NFTContract>(\n  contract: RequiredParam<TContract>,\n  queryParams?: QueryAllParams,\n) {\n  const contractAddress = contract?.getAddress();\n  return useQueryWithNetwork<NFT<TContract>[]>(\n    cacheKeys.contract.nft.query.all(contractAddress, queryParams),\n    async () => {\n      invariant(contract, \"No Contract instance provided\");\n      invariant(\n        contract.query?.all,\n        \"Contract instance does not support query.all\",\n      );\n\n      return convertResponseToNFTTypeArray(\n        contract,\n        await contract.query.all(queryParams),\n      );\n    },\n    {\n      enabled: !!contract || !contractAddress,\n      keepPreviousData: true,\n    },\n  );\n}\n\n/**\n * Use this to get a the total (minted) supply of your {@link NFTContract}.\n *\n *  * @example\n * ```javascript\n * const nftDrop = useNFTDrop(<ContractAddress>);\n * const { data: totalSupply, isLoading, error } = useNFTSupply(nftDrop);\n * ```\n * @example\n * ```javascript\n * const { contract } = useContract(<ContractAddress>);\n * const { data: totalSupply, isLoading, error } = useNFTSupply(contract?.nft);\n * ```\n *\n * @param contract - an instance of a {@link NFTContract}\n * @returns a response object that incudes the total minted supply\n * @beta\n */\nexport function useTotalCirculatingSupply<TContract extends NFTContract>(\n  ...[contract, tokenId]: useTotalCirculatingSupplyParams<TContract>\n) {\n  const contractAddress = contract?.getAddress();\n  return useQueryWithNetwork(\n    cacheKeys.contract.nft.query.totalCirculatingSupply(contractAddress),\n    () => {\n      invariant(contract, \"No Contract instance provided\");\n      if (contract instanceof Erc721) {\n        invariant(\n          contract?.query?.totalCirculatingSupply,\n          \"Contract instance does not support query.totalCirculatingSupply\",\n        );\n        return contract.query.totalCirculatingSupply();\n      }\n      invariant(\n        contract.query?.totalCirculatingSupply,\n        \"Contract instance does not support query.getTotalCount\",\n      );\n      invariant(tokenId, \"No tokenId provided\");\n      return contract.query.totalCirculatingSupply(tokenId);\n    },\n    {\n      enabled: !!contract,\n    },\n  );\n}\n\n/**\n * Use this to get a the number of tokens in your {@link NFTContract}.\n *\n * @remarks The `total count` and `total supply` are the same for {@link ERC721} based contracts.\n * For {@link ERC1155} the `total count` is the number of NFTs that exist on the contract, **not** the sum of all supply of each token. (Since ERC1155 can have multiple owners per token.)\n *\n * @example\n * ```javascript\n * const nftDrop = useNFTDrop(<ContractAddress>);\n * const { data: totalCount, isLoading, error } = useTotalCount(nftDrop);\n * ```\n * @example\n * ```javascript\n * const { contract } = useContract(<ContractAddress>);\n * const { data: totalCount, isLoading, error } = useTotalCount(contract?.nft);\n * ```\n *\n * @param contract - an instance of a {@link NFTContract}\n * @returns a response object that incudes the total number of tokens in the contract\n * @beta\n */\nexport function useTotalCount(contract: RequiredParam<NFTContract>) {\n  const contractAddress = contract?.getAddress();\n  return useQueryWithNetwork(\n    cacheKeys.contract.nft.query.totalCount(contractAddress),\n    () => {\n      invariant(contract, \"No Contract instance provided\");\n      if (contract instanceof Erc721) {\n        invariant(\n          contract?.query?.totalCirculatingSupply,\n          \"Contract instance does not support query.totalCirculatingSupply\",\n        );\n        return contract.query.totalCirculatingSupply();\n      }\n      invariant(\n        contract.query?.totalCount,\n        \"Contract instance does not support query.totalCount\",\n      );\n      return contract.query.totalCount();\n    },\n    {\n      enabled: !!contract,\n    },\n  );\n}\n\n/**\n * Use this to get a the owned NFTs for a specific {@link NFTContract} and wallet address.\n *\n * @example\n * ```javascript\n * const nftDrop = useNFTDrop(<ContractAddress>);\n * const { data: ownedNFTs, isLoading, error } = useOwnedNFTs(nftDrop, <OwnerWalletAddress>);\n * ```\n * @example\n * ```javascript\n * const { contract } = useContract(<ContractAddress>);\n * const { data: ownedNFTs, isLoading, error } = useOwnedNFTs(contract?.nft, <OwnerWalletAddress>);\n * ```\n *\n * @param contract - an instance of a {@link NFTContract}\n * @param ownerWalletAddress - the wallet adress to get owned tokens for\n * @returns a response object that includes the list of owned tokens\n * @beta\n */\nexport function useOwnedNFTs<TContract extends NFTContract>(\n  contract: RequiredParam<TContract>,\n  ownerWalletAddress: RequiredParam<WalletAddress>,\n) {\n  const contractAddress = contract?.getAddress();\n  return useQueryWithNetwork<NFT<TContract>[]>(\n    cacheKeys.contract.nft.query.owned.all(contractAddress, ownerWalletAddress),\n    async () => {\n      invariant(contract, \"No Contract instance provided\");\n      if (contract instanceof Erc721) {\n        invariant(\n          contract.query?.owned?.all,\n          \"Contract instance does not support query.owned.all\",\n        );\n        return convertResponseToNFTTypeArray(\n          contract,\n          await contract.query.owned.all(ownerWalletAddress),\n        );\n      }\n      invariant(\n        contract.query?.owned,\n        \"Contract instance does not support query.owned\",\n      );\n      return convertResponseToNFTTypeArray(\n        contract,\n        await contract.query.owned(ownerWalletAddress),\n      );\n    },\n    {\n      enabled: !!contract && !!ownerWalletAddress,\n    },\n  );\n}\n\n/**\n * Use this to get a the total balance of a {@link NFTContract} and wallet address.\n *\n *  @example\n * ```javascript\n * const nftDrop = useNFTDrop(<ContractAddress>);\n * const { data: ownerBalance, isLoading, error } = useNFTBalance(nftDrop, <OwnerWalletAddress>);\n * ```\n * @example\n * ```javascript\n * const { contract } = useContract(<ContractAddress>);\n * const { data: ownerBalance, isLoading, error } = useNFTBalance(contract?.nft, <OwnerWalletAddress>);\n * ```\n *\n * @param contract - an instance of a {@link NFTContract}\n * @param ownerWalletAddress - the wallet adress to check the balance of\n * @returns a response object that includes the total balance of the owner\n * @beta\n */\nexport function useNFTBalance<TContract extends NFTContract>(\n  ...[contract, ownerWalletAddress, tokenId]: useNFTBalanceParams<TContract>\n) {\n  const contractAddress = contract?.getAddress();\n  return useQueryWithNetwork(\n    cacheKeys.contract.nft.balanceOf(\n      contractAddress,\n      ownerWalletAddress,\n      tokenId,\n    ),\n    () => {\n      invariant(contract, \"No Contract instance provided\");\n      invariant(\n        contract.balanceOf,\n        \"Contract instance does not support balanceOf\",\n      );\n      invariant(ownerWalletAddress, \"No owner wallet address provided\");\n      if (contract instanceof Erc1155) {\n        invariant(tokenId, \"No tokenId provided\");\n        return contract.balanceOf(ownerWalletAddress, tokenId);\n      }\n      return contract.balanceOf(ownerWalletAddress);\n    },\n    {\n      enabled: !!contract && !!ownerWalletAddress,\n    },\n  );\n}\n\n/** **********************/\n/**     WRITE HOOKS     **/\n/** **********************/\n\n/**\n * Use this to mint a new NFT on your {@link NFTContract}\n *\n * @example\n * ```jsx\n * const Component = () => {\n *   const nftDrop = useNFTDrop(<ContractAddress>);\n *   const {\n *     mutate: mintNft,\n *     isLoading,\n *     error,\n *   } = useMintNFT(nftDrop);\n *\n *   if (error) {\n *     console.error(\"failed to mint nft\", error);\n *   }\n *\n *   return (\n *     <button\n *       disabled={isLoading}\n *       onClick={() => mintNft({ name: \"My awesome NFT!\", to: \"0x...\" })}\n *     >\n *       Mint!\n *     </button>\n *   );\n * };\n * ```\n * @example\n * ```jsx\n * const Component = () => {\n *   const { contract } = useContract(<ContractAddress>);\n *   const {\n *     mutate: mintNft,\n *     isLoading,\n *     error,\n *   } = useMintNFT(contract?.nft);\n *\n *   if (error) {\n *     console.error(\"failed to mint nft\", error);\n *   }\n *\n *   return (\n *     <button\n *       disabled={isLoading}\n *       onClick={() => mintNft({ name: \"My awesome NFT!\", to: \"0x...\" })}\n *     >\n *       Mint!\n *     </button>\n *   );\n * };\n * ```\n *\n * @param contract - an instance of a {@link NFTContract}\n * @returns a mutation object that can be used to mint a new NFT token to the connected wallet\n * @beta\n */\nexport function useMintNFT<TContract extends NFTContract>(\n  contract: RequiredParam<TContract>,\n) {\n  const activeChainId = useActiveChainId();\n  const contractAddress = contract?.getAddress();\n  const queryClient = useQueryClient();\n\n  return useMutation(\n    async (data: MintNFTParams<TContract>) => {\n      invariant(data.to, 'No \"to\" address provided');\n      invariant(contract?.mint?.to, \"contract does not support mint.to\");\n      if (contract instanceof Erc1155) {\n        invariant(\"supply\" in data, \"supply not provided\");\n        const { to, metadata, supply } = data;\n        return (await contract.mint.to(to, {\n          metadata,\n          supply: BigNumber.from(supply || 1),\n        })) as MintNFTReturnType<TContract>;\n      }\n      return (await contract.mint.to(\n        data.to,\n        data.metadata,\n      )) as MintNFTReturnType<TContract>;\n    },\n    {\n      onSettled: () =>\n        invalidateContractAndBalances(\n          queryClient,\n          contractAddress,\n          activeChainId,\n        ),\n    },\n  );\n}\n\n/**\n * Use this to mint a new NFT on your {@link NFTContract}\n *\n * @example\n * ```jsx\n * const Component = () => {\n *   const nftDrop = useNFTDrop(<ContractAddress>);\n *   const {\n *     mutate: mintNftSupply,\n *     isLoading,\n *     error,\n *   } = useMintNFTSupply(nftDrop);\n *\n *   if (error) {\n *     console.error(\"failed to mint additional supply\", error);\n *   }\n *\n *   return (\n *     <button\n *       disabled={isLoading}\n *       onClick={() => mintNftSupply({ tokenId: 0, additionalSupply: 100, to: \"0x...\"})}\n *     >\n *       Mint Additional Supply!\n *     </button>\n *   );\n * };\n * ```\n * @example\n * ```jsx\n * const Component = () => {\n *   const { contract } = useContract(<ContractAddress>);\n *   const {\n *     mutate: mintNftSupply,\n *     isLoading,\n *     error,\n *   } = useMintNFTSupply(contract?.nft);\n *\n *   if (error) {\n *     console.error(\"failed to mint additional supply\", error);\n *   }\n *\n *   return (\n *     <button\n *       disabled={isLoading}\n *       onClick={() => mintNftSupply({ tokenId: 0, additionalSupply: 100, to: \"0x...\"})}\n *     >\n *       Mint Additional Supply!\n *     </button>\n *   );\n * };\n * ```\n *\n * @param contract - an instance of a {@link Erc1155}\n * @returns a mutation object that can be used to mint a more supply of a token id to the provided wallet\n * @beta\n */\nexport function useMintNFTSupply(contract: Erc1155) {\n  const activeChainId = useActiveChainId();\n  const contractAddress = contract?.getAddress();\n  const queryClient = useQueryClient();\n\n  return useMutation(\n    async (data: MintNFTSupplyParams) => {\n      invariant(data.to, 'No \"to\" address provided');\n      invariant(\n        contract?.mint?.additionalSupplyTo,\n        \"contract does not support mint.additionalSupplyTo\",\n      );\n\n      invariant(\"tokenId\" in data, \"tokenId not provided\");\n      invariant(\"additionalSupply\" in data, \"additionalSupply not provided\");\n      const { to, tokenId, additionalSupply } = data;\n      return await contract.mint.additionalSupplyTo(\n        to,\n        tokenId,\n        additionalSupply,\n      );\n    },\n    {\n      onSettled: () =>\n        invalidateContractAndBalances(\n          queryClient,\n          contractAddress,\n          activeChainId,\n        ),\n    },\n  );\n}\n\n/**\n * Use this to transfer tokens on your {@link NFTContract}\n *\n * @example\n * ```jsx\n * const Component = () => {\n *   const nftDrop = useNFTDrop(<ContractAddress>);\n *   const {\n *     mutate: transferNFT,\n *     isLoading,\n *     error,\n *   } = useTransferNFT(nftDrop);\n *\n *   if (error) {\n *     console.error(\"failed to transfer nft\", error);\n *   }\n *\n *   return (\n *     <button\n *       disabled={isLoading}\n *       onClick={() => transferNFT({ to: \"0x...\", tokenId: 2 })}\n *     >\n *       Transfer NFT!\n *     </button>\n *   );\n * };\n * ```\n * @example\n * ```jsx\n * const Component = () => {\n *   const { contract } = useContract(<ContractAddress>);\n *   const {\n *     mutate: transferNFT,\n *     isLoading,\n *     error,\n *   } = useTransferNFT(contract?.nft);\n *\n *   if (error) {\n *     console.error(\"failed to transfer nft\", error);\n *   }\n *\n *   return (\n *     <button\n *       disabled={isLoading}\n *       onClick={() => transferNFT({ to: \"0x...\", tokenId: 2 })}\n *     >\n *       Transfer\n *     </button>\n *   );\n * };\n * ```\n *\n * @param contract - an instance of a {@link NFTContract}\n * @returns a mutation object that can be used to transfer NFTs\n * @beta\n */\nexport function useTransferNFT<TContract extends NFTContract>(\n  contract: RequiredParam<TContract>,\n) {\n  const activeChainId = useActiveChainId();\n  const contractAddress = contract?.getAddress();\n  const queryClient = useQueryClient();\n\n  return useMutation(\n    (data: TransferNFTParams<TContract>) => {\n      invariant(contract?.transfer, \"contract does not support transfer\");\n      if (contract instanceof Erc1155) {\n        invariant(\"amount\" in data, \"amount not provided\");\n        return contract.transfer(data.to, data.tokenId, data.amount);\n      }\n\n      return contract.transfer(data.to, data.tokenId);\n    },\n    {\n      onSettled: () =>\n        invalidateContractAndBalances(\n          queryClient,\n          contractAddress,\n          activeChainId,\n        ),\n    },\n  );\n}\n\n/**\n * Use this to transfer tokens on your {@link Erc1155}\n *\n * @example\n * ```jsx\n * const Component = () => {\n *   const editionDrop = useEditionDrop(<ContractAddress>);\n *   const {\n *     mutate: airdropNFT,\n *     isLoading,\n *     error,\n *   } = useAirdropNFT(editionDrop);\n *\n *   if (error) {\n *     console.error(\"failed to transfer batch NFTs\", error);\n *   }\n *\n *   return (\n *     <button\n *       disabled={isLoading}\n *       onClick={() => airdropNFT({\n *          tokenId: 2,\n *          addresses: [{ address: \"0x...\", quantity: 2 }, { address: \"0x...\", quantity: 4 } }]\n *       )}\n *     >\n *       Airdrop NFT\n *     </button>\n * };\n * ```\n * @example\n * ```jsx\n * const Component = () => {\n *   const { contract } = useContract(<ContractAddress>);\n *   const {\n *     mutate: airdropNFT,\n *     isLoading,\n *     error,\n *   } = useAirdropNFT(contract?.nft);\n *\n *   if (error) {\n *     console.error(\"failed to transfer batch NFTs\", error);\n *   }\n *\n *   return (\n *     <button\n *       disabled={isLoading}\n *       onClick={() => airdropNFT({\n *          tokenId: 2,\n *          addresses: [{ address: \"0x...\", quantity: 2 }, { address: \"0x...\", quantity: 4 } }]\n *       )}\n *     >\n *       Airdrop NFT\n *     </button>\n *   );\n * };\n * ```\n *\n * @param contract - an instance of a {@link Erc1155}\n * @returns a mutation object that can be used to transfer batch NFTs\n * @beta\n */\nexport function useAirdropNFT(contract: Erc1155) {\n  const activeChainId = useActiveChainId();\n  const contractAddress = contract?.getAddress();\n  const queryClient = useQueryClient();\n\n  return useMutation(\n    ({ tokenId, addresses }: AirdropNFTParams) => {\n      invariant(contract?.airdrop, \"contract does not support airdrop\");\n\n      return contract.airdrop(tokenId, addresses);\n    },\n    {\n      onSettled: () =>\n        invalidateContractAndBalances(\n          queryClient,\n          contractAddress,\n          activeChainId,\n        ),\n    },\n  );\n}\n\n/** **********************/\n/**     WRITE HOOKS     **/\n/** **********************/\n\n/**\n * Use this to burn an NFT on your {@link NFTContract}\n *\n * @example\n * ```jsx\n * const Component = () => {\n *   const nftDrop = useNFTDrop(<ContractAddress>);\n *   const {\n *     mutate: burnNft,\n *     isLoading,\n *     error,\n *   } = useBurnNFT(nftDrop);\n *\n *   if (error) {\n *     console.error(\"failed to burn nft\", error);\n *   }\n *\n *   return (\n *     <button\n *       disabled={isLoading}\n *       onClick={() => burnNft({ tokenId: 0 })}\n *     >\n *       Burn!\n *     </button>\n *   );\n * };\n * ```\n * @example\n * ```jsx\n * const Component = () => {\n *   const { contract } = useContract(<ContractAddress>);\n *   const {\n *     mutate: burnNft,\n *     isLoading,\n *     error,\n *   } = useBurnNFT(contract?.nft);\n *\n *   if (error) {\n *     console.error(\"failed to burn nft\", error);\n *   }\n *\n *   return (\n *     <button\n *       disabled={isLoading}\n *       onClick={() => burnNft({ tokenId: 0 })}\n *     >\n *       Burn!\n *     </button>\n *   );\n * };\n * ```\n *\n * @param contract - an instance of a {@link NFTContract}\n * @returns a mutation object that can be used to burn an NFT token from the connected wallet\n * @beta\n */\nexport function useBurnNFT<TContract extends NFTContract>(\n  contract: RequiredParam<TContract>,\n) {\n  const activeChainId = useActiveChainId();\n  const contractAddress = contract?.getAddress();\n  const queryClient = useQueryClient();\n\n  return useMutation(\n    async (data: BurnNFTParams<TContract>) => {\n      invariant(data.tokenId, \"No tokenId provided\");\n      invariant(contract?.burn, \"contract does not support burn\");\n      if (contract instanceof Erc1155) {\n        invariant(\"amount\" in data, \"amount not provided\");\n        const { tokenId, amount } = data;\n        return await contract.burn.tokens(tokenId, amount);\n      }\n      const { tokenId } = data;\n      return await contract.burn.token(tokenId);\n    },\n    {\n      onSettled: () =>\n        invalidateContractAndBalances(\n          queryClient,\n          contractAddress,\n          activeChainId,\n        ),\n    },\n  );\n}\n","import { useActiveChainId } from \"../../Provider\";\nimport {\n  ClaimNFTParams,\n  ClaimNFTReturnType,\n  DropContract,\n  NFTContract,\n  RequiredParam,\n} from \"../../types\";\nimport {\n  cacheKeys,\n  invalidateContractAndBalances,\n} from \"../../utils/cache-keys\";\nimport { useQueryWithNetwork } from \"../query-utils/useQueryWithNetwork\";\nimport { useNFTs } from \"./nft\";\nimport { useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport {\n  Erc1155,\n  NFTDrop,\n  NFTMetadataInput,\n  QueryAllParams,\n  SignatureDrop,\n  UploadProgressEvent,\n} from \"@thirdweb-dev/sdk/dist/browser\";\nimport invariant from \"tiny-invariant\";\n\n/** **********************/\n/**       READ HOOKS    **/\n/** **********************/\n\n/**\n * Use this to get a list of *unclaimed* NFT tokens of your ERC721 Drop contract.\n *\n * @example\n * ```javascript\n * const { data: unclaimedNfts, isLoading, error } = useUnclaimedNFTs(<YourERC721DropContractInstance>, { start: 0, count: 100 });\n * ```\n *\n * @param contract - an instance of a contract that extends the Erc721 spec (nft drop, custom contract that follows the Erc721 & drop spec)\n * @param queryParams - query params to pass to the query for the sake of pagination\n * @returns a response object that includes an array of NFTs that are unclaimed\n * @beta\n */\nexport function useUnclaimedNFTs(\n  contract: RequiredParam<NFTDrop>,\n  queryParams?: QueryAllParams,\n) {\n  const contractAddress = contract?.getAddress();\n  return useQueryWithNetwork(\n    cacheKeys.contract.nft.drop.getAllUnclaimed(contractAddress, queryParams),\n    () => {\n      invariant(contract, \"No Contract instance provided\");\n      invariant(\n        contract.getAllUnclaimed,\n        \"Contract instance does not support getAllUnclaimed\",\n      );\n      return contract.getAllUnclaimed(queryParams);\n    },\n    { enabled: !!contract },\n  );\n}\n\n/**\n * Use this to get a list of *claimed* (minted) NFT tokens of your ERC721 Drop contract.\n *\n * @remarks Equivalent to using {@link useNFTs}.\n *\n * @example\n * ```javascript\n * const { data: claimedNFTs, isLoading, error } = useClaimedNFTs(<YourERC721DropContractInstance>, { start: 0, count: 100 });\n * ```\n *\n * @param contract - an instance of a {@link DropContract}\n * @param queryParams - query params to pass to the query for the sake of pagination\n * @returns a response object that includes an array of NFTs that are claimed\n * @beta\n */\nexport function useClaimedNFTs(\n  contract: RequiredParam<DropContract>,\n  queryParams?: QueryAllParams,\n) {\n  return useNFTs(contract, queryParams);\n}\n/**\n *\n * @param contract - an instance of a {@link NFTDrop}\n * @returns a response object that includes the number of NFTs that are unclaimed\n */\nexport function useUnclaimedNFTSupply(\n  contract: RequiredParam<NFTDrop | SignatureDrop>,\n) {\n  const contractAddress = contract?.getAddress();\n  return useQueryWithNetwork(\n    cacheKeys.contract.nft.drop.totalUnclaimedSupply(contractAddress),\n    () => {\n      invariant(contract, \"No Contract instance provided\");\n\n      invariant(\n        contract.totalUnclaimedSupply,\n        \"Contract instance does not support totalUnclaimedSupply\",\n      );\n      return contract.totalUnclaimedSupply();\n    },\n    { enabled: !!contract },\n  );\n}\n\n/**\n *\n * @param contract - an instance of a {@link DropContract}\n * @returns a response object that includes the number of NFTs that are claimed\n */\nexport function useClaimedNFTSupply(contract: RequiredParam<DropContract>) {\n  const contractAddress = contract?.getAddress();\n  return useQueryWithNetwork(\n    cacheKeys.contract.nft.drop.totalClaimedSupply(contractAddress),\n    () => {\n      invariant(contract, \"No Contract instance provided\");\n      if (contract instanceof Erc1155) {\n        return contract.getTotalCount();\n      }\n      invariant(\n        contract.totalClaimedSupply,\n        \"Contract instance does not support totalClaimedSupply\",\n      );\n      return contract.totalClaimedSupply();\n    },\n    { enabled: !!contract },\n  );\n}\n\n/** **********************/\n/**     WRITE HOOKS     **/\n/** **********************/\n/**\n * Use this to claim a NFT on your {@link DropContract}\n *\n * @example\n * ```jsx\n * const Component = () => {\n *   const {\n *     mutate: claimNft,\n *     isLoading,\n *     error,\n *   } = useClaimNFT(DropContract);\n *\n *   if (error) {\n *     console.error(\"failed to claim nft\", error);\n *   }\n *\n *   return (\n *     <button\n *       disabled={isLoading}\n *       onClick={() => claimNft({ to: \"0x...\", quantity: 1 })}\n *     >\n *       Claim NFT!\n *     </button>\n *   );\n * };\n * ```\n *\n * @param contract - an instance of a {@link DropContract}\n * @returns a mutation object that can be used to claim a NFT to the wallet specificed in the params\n * @beta\n */\nexport function useClaimNFT<TContract extends DropContract>(\n  contract: RequiredParam<TContract>,\n) {\n  const activeChainId = useActiveChainId();\n  const contractAddress = contract?.getAddress();\n  const queryClient = useQueryClient();\n\n  return useMutation(\n    async (data: ClaimNFTParams<TContract>) => {\n      invariant(data.to, 'No \"to\" address provided');\n      invariant(contract?.claimTo, \"contract does not support claimTo\");\n      if (contract instanceof Erc1155) {\n        invariant(\"tokenId\" in data, \"tokenId not provided\");\n        const { to, tokenId, quantity } = data;\n        return (await contract.claimTo(\n          to,\n          tokenId,\n          quantity,\n          data.checkERC20Allowance,\n        )) as ClaimNFTReturnType<TContract>;\n      }\n      return (await contract.claimTo(\n        data.to,\n        data.quantity,\n        data.checkERC20Allowance,\n      )) as ClaimNFTReturnType<TContract>;\n    },\n    {\n      onSettled: () =>\n        invalidateContractAndBalances(\n          queryClient,\n          contractAddress,\n          activeChainId,\n        ),\n    },\n  );\n}\n\n/**\n * Use this to lazy mint a batch of NFTs on your {@link DropContract}\n *\n * @param contract - an instance of a {@link NFTContract} with the drop extension\n * @param onProgress - an optional callback that will be called with the progress of the upload\n * @returns a mutation object that can be used to lazy mint a batch of NFTs\n * @beta\n */\nexport function useLazyMint<TContract extends NFTContract>(\n  contract: RequiredParam<TContract>,\n  onProgress?: (progress: UploadProgressEvent) => void,\n) {\n  const activeChainId = useActiveChainId();\n  const contractAddress = contract?.getAddress();\n  const queryClient = useQueryClient();\n\n  return useMutation(\n    async (data: { metadatas: NFTMetadataInput[] }) => {\n      invariant(\n        contract?.drop?.lazyMint,\n        \"contract does not support drop.lazyMint\",\n      );\n      let options;\n      if (onProgress) {\n        options = {\n          onProgress,\n        };\n      }\n      return await contract.drop.lazyMint(data.metadatas, options);\n    },\n    {\n      onSettled: () =>\n        invalidateContractAndBalances(\n          queryClient,\n          contractAddress,\n          activeChainId,\n        ),\n    },\n  );\n}\n","import { useActiveChainId } from \"../../Provider\";\nimport { BuyNowParams, MakeBidParams, RequiredParam } from \"../../types\";\nimport {\n  cacheKeys,\n  invalidateContractAndBalances,\n} from \"../../utils/cache-keys\";\nimport { useQueryWithNetwork } from \"../query-utils/useQueryWithNetwork\";\nimport { useAddress } from \"../useAddress\";\nimport { useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport type {\n  Marketplace,\n  MarketplaceFilter,\n  NewAuctionListing,\n  NewDirectListing,\n} from \"@thirdweb-dev/sdk/dist/browser\";\n// eslint-disable-next-line no-duplicate-imports\nimport { ListingType } from \"@thirdweb-dev/sdk/dist/browser\";\nimport { BigNumber, BigNumberish } from \"ethers\";\nimport invariant from \"tiny-invariant\";\n\n/** **********************/\n/**     READ  HOOKS     **/\n/** **********************/\n\n/**\n * Use this to get a specific listing from the marketplace.\n *\n * @example\n * ```javascript\n * const { data: listing, isLoading, error } = useListing(<YourMarketplaceContractInstance>, <listingId>);\n * ```\n *\n * @param contract - an instance of a marketplace contract\n * @param listingId - the listing id to check\n * @returns a response object that includes an array of listings\n * @beta\n */\nexport function useListing(\n  contract: RequiredParam<Marketplace>,\n  listingId: RequiredParam<BigNumberish>,\n) {\n  const contractAddress = contract?.getAddress();\n  return useQueryWithNetwork(\n    cacheKeys.contract.marketplace.getListing(contractAddress, listingId),\n    () => {\n      invariant(contract, \"No Contract instance provided\");\n      return contract.getListing(BigNumber.from(listingId || 0));\n    },\n    {\n      enabled: !!contract || !contractAddress,\n      keepPreviousData: true,\n    },\n  );\n}\n\n/**\n * Use this to get a list all listings from your marketplace contract.\n *\n * @example\n * ```javascript\n * const { data: listings, isLoading, error } = useListings(<YourMarketplaceContractInstance>, { start: 0, count: 100 });\n * ```\n *\n * @param contract - an instance of a marketplace contract\n * @param filter - filter to pass to the query for the sake of pagination & filtering\n * @returns a response object that includes an array of listings\n * @beta\n */\nexport function useListings(\n  contract: RequiredParam<Marketplace>,\n  filter?: MarketplaceFilter,\n) {\n  const contractAddress = contract?.getAddress();\n  return useQueryWithNetwork(\n    cacheKeys.contract.marketplace.getAllListings(contractAddress, filter),\n    () => {\n      invariant(contract, \"No Contract instance provided\");\n      return contract.getAllListings(filter);\n    },\n    {\n      enabled: !!contract || !contractAddress,\n      keepPreviousData: true,\n    },\n  );\n}\n\n/**\n * Use this to get a list active listings from your marketplace contract.\n *\n * @example\n * ```javascript\n * const { data: listings, isLoading, error } = useActiveListings(<YourMarketplaceContractInstance>, { seller: \"0x...\", tokenContract: \"0x...\", tokenId: 1, start: 0, count: 100 });\n * ```\n *\n * @param contract - an instance of a marketplace contract\n * @param filter - filter to pass to the query for the sake of pagination & filtering\n * @returns a response object that includes an array of listings\n * @beta\n */\nexport function useActiveListings(\n  contract: RequiredParam<Marketplace>,\n  filter?: MarketplaceFilter,\n) {\n  const contractAddress = contract?.getAddress();\n  return useQueryWithNetwork(\n    cacheKeys.contract.marketplace.getActiveListings(contractAddress, filter),\n    () => {\n      invariant(contract, \"No Contract instance provided\");\n\n      return contract.getActiveListings(filter);\n    },\n    {\n      enabled: !!contract || !contractAddress,\n      keepPreviousData: true,\n    },\n  );\n}\n\n/**\n * Use this to get a the winning bid for an auction listing from your marketplace contract.\n *\n * @example\n * ```javascript\n * const { data: winningBid, isLoading, error } = useWinningBid(<YourMarketplaceContractInstance>, <listingId>);\n * ```\n *\n * @param contract - an instance of a marketplace contract\n * @param listingId - the listing id to check\n * @returns a response object that includes the {@link Offer} that is winning the auction\n * @beta\n */\nexport function useWinningBid(\n  contract: RequiredParam<Marketplace>,\n  listingId: RequiredParam<BigNumberish>,\n) {\n  const contractAddress = contract?.getAddress();\n  return useQueryWithNetwork(\n    cacheKeys.contract.marketplace.auction.getWinningBid(\n      contractAddress,\n      listingId,\n    ),\n    () => {\n      invariant(contract, \"No Contract instance provided\");\n      return contract.auction.getWinningBid(BigNumber.from(listingId || 0));\n    },\n    {\n      enabled: !!contract && listingId !== undefined,\n    },\n  );\n}\n\n/**\n * Use this to get the winner of an auction listing from your marketplace contract.\n *\n * @example\n * ```javascript\n * const { data: auctionWinner, isLoading, error } = useAuctionWinner(<YourMarketplaceContractInstance>, <listingId>);\n * ```\n *\n * @param contract - an instance of a marketplace contract\n * @param listingId - the listing id to check\n * @returns a response object that includes the address of the winner of the auction or undefined if there is no winner yet\n * @beta\n */\nexport function useAuctionWinner(\n  contract: RequiredParam<Marketplace>,\n  listingId: RequiredParam<BigNumberish>,\n) {\n  const contractAddress = contract?.getAddress();\n  return useQueryWithNetwork(\n    cacheKeys.contract.marketplace.auction.getWinner(\n      contractAddress,\n      listingId,\n    ),\n    async () => {\n      invariant(contract, \"No Contract instance provided\");\n      let winner: string | undefined;\n      try {\n        winner = await contract.auction.getWinner(\n          BigNumber.from(listingId || 0),\n        );\n      } catch (err) {\n        if (!(err as Error)?.message?.includes(\"Could not find auction\")) {\n          throw err;\n        }\n      }\n      return winner;\n    },\n    {\n      enabled: !!contract && listingId !== undefined,\n    },\n  );\n}\n\n/**\n * Use this to get the buffer in basis points between offers from your marketplace contract.\n *\n * @example\n * ```javascript\n * const { data: auctionWinner, isLoading, error } = useBidBuffer(<YourMarketplaceContractInstance>);\n * ```\n *\n * @param contract - an instance of a marketplace contract\n\n * @returns a response object that includes an array of listings\n * @beta\n */\nexport function useBidBuffer(contract: RequiredParam<Marketplace>) {\n  const contractAddress = contract?.getAddress();\n  return useQueryWithNetwork(\n    cacheKeys.contract.marketplace.getBidBufferBps(contractAddress),\n    () => {\n      invariant(contract, \"No Contract instance provided\");\n      return contract.getBidBufferBps();\n    },\n    {\n      enabled: !!contract,\n    },\n  );\n}\n\n/** **********************/\n/**     WRITE HOOKS     **/\n/** **********************/\n\n/**\n * Use this to create a new Direct Listing on your marketplace contract.\n *\n * @example\n * ```jsx\n * const Component = () => {\n *   const {\n *     mutate: createDirectListing,\n *     isLoading,\n *     error,\n *   } = useCreateDirectListing(\">>YourMarketplaceContractInstance<<\");\n *\n *   if (error) {\n *     console.error(\"failed to create direct listing\", error);\n *   }\n *\n *   return (\n *     <button\n *       disabled={isLoading}\n *       onClick={() => createDirectListing(directListingData)}\n *     >\n *       Create Direct Listing!\n *     </button>\n *   );\n * };\n * ```\n *\n * @param contract - an instance of a Marketplace contract\n * @returns a mutation object that can be used to create a new direct listing\n * @beta\n */\nexport function useCreateDirectListing(contract: RequiredParam<Marketplace>) {\n  const activeChainId = useActiveChainId();\n  const contractAddress = contract?.getAddress();\n  const queryClient = useQueryClient();\n  const walletAddress = useAddress();\n  return useMutation(\n    async (data: NewDirectListing) => {\n      invariant(walletAddress, \"no wallet connected, cannot create listing\");\n      invariant(\n        contract?.direct?.createListing,\n        \"contract does not support direct.createListing\",\n      );\n      return await contract.direct.createListing(data);\n    },\n    {\n      onSettled: () =>\n        invalidateContractAndBalances(\n          queryClient,\n          contractAddress,\n          activeChainId,\n        ),\n    },\n  );\n}\n\n/**\n * Use this to create a new Auction Listing on your marketplace contract.\n *\n * @example\n * ```jsx\n * const Component = () => {\n *   const {\n *     mutate: createAuctionListing,\n *     isLoading,\n *     error,\n *   } = useCreateAuctionListing(\">>YourMarketplaceContractInstance<<\");\n *\n *   if (error) {\n *     console.error(\"failed to create auction listing\", error);\n *   }\n *\n *   return (\n *     <button\n *       disabled={isLoading}\n *       onClick={() => createAuctionListing(auctionListingData)}\n *     >\n *       Create Auction Listing!\n *     </button>\n *   );\n * };\n * ```\n *\n * @param contract - an instance of a Marketplace contract\n * @returns a mutation object that can be used to create a new auction listing\n * @beta\n */\nexport function useCreateAuctionListing(contract: RequiredParam<Marketplace>) {\n  const activeChainId = useActiveChainId();\n  const contractAddress = contract?.getAddress();\n  const queryClient = useQueryClient();\n  const walletAddress = useAddress();\n  return useMutation(\n    async (data: NewAuctionListing) => {\n      invariant(walletAddress, \"no wallet connected, cannot create listing\");\n      invariant(\n        contract?.direct?.createListing,\n        \"contract does not support auction.createListing\",\n      );\n      return await contract.auction.createListing(data);\n    },\n    {\n      onSettled: () =>\n        invalidateContractAndBalances(\n          queryClient,\n          contractAddress,\n          activeChainId,\n        ),\n    },\n  );\n}\n\n/**\n * Use this to place a bid on an auction listing from your marketplace contract.\n *\n * @example\n * ```jsx\n * const Component = () => {\n *   const {\n *     mutate: makeBid,\n *     isLoading,\n *     error,\n *   } = useMakeBid(\">>YourMarketplaceContractInstance<<\");\n *\n *   if (error) {\n *     console.error(\"failed to make a bid\", error);\n *   }\n *\n *   return (\n *     <button\n *       disabled={isLoading}\n *       onClick={() => makeBid({ listingId: 1, bid: 2 })}\n *     >\n *       Bid!\n *     </button>\n *   );\n * };\n * ```\n *\n * @param contract - an instance of a Marketplace contract\n * @returns a mutation object that can be used to make a bid on an auction listing\n * @beta\n */\nexport function useMakeBid(contract: RequiredParam<Marketplace>) {\n  const activeChainId = useActiveChainId();\n  const contractAddress = contract?.getAddress();\n  const queryClient = useQueryClient();\n  const walletAddress = useAddress();\n  return useMutation(\n    async (data: MakeBidParams) => {\n      invariant(walletAddress, \"no wallet connected, cannot make bid\");\n      invariant(\n        contract?.auction?.makeBid,\n        \"contract does not support auction.makeBid\",\n      );\n      return await contract.auction.makeBid(data.listingId, data.bid);\n    },\n    {\n      onSettled: () =>\n        invalidateContractAndBalances(\n          queryClient,\n          contractAddress,\n          activeChainId,\n        ),\n    },\n  );\n}\n\n/**\n * Use this to buy out an auction listing from your marketplace contract.\n *\n * @example\n * ```jsx\n * const Component = () => {\n *   const {\n *     mutate: buyNow,\n *     isLoading,\n *     error,\n *   } = useBuyNow(\">>YourMarketplaceContractInstance<<\");\n *\n *   if (error) {\n *     console.error(\"failed to buyout listing\", error);\n *   }\n *\n *   return (\n *     <button\n *       disabled={isLoading}\n *       onClick={() => buyNow({listingId: 1, type: ListingType.Auction})}\n *     >\n *       Buy listing!\n *     </button>\n *   );\n * };\n * ```\n *\n * @param contract - an instance of a Marketplace contract\n * @returns a mutation object that can be used to buy out an auction listing\n * @beta\n */\nexport function useBuyNow(contract: RequiredParam<Marketplace>) {\n  const activeChainId = useActiveChainId();\n  const contractAddress = contract?.getAddress();\n  const queryClient = useQueryClient();\n  const walletAddress = useAddress();\n  return useMutation(\n    async (data: BuyNowParams) => {\n      invariant(walletAddress, \"no wallet connected, cannot make bid\");\n      if (data.type === ListingType.Direct) {\n        invariant(\n          contract?.direct.buyoutListing,\n          \"contract does not support direct.buyoutListing\",\n        );\n\n        return await contract.direct.buyoutListing(\n          data.id,\n          data.buyAmount,\n          data.buyForWallet,\n        );\n      }\n      invariant(\n        contract?.auction?.buyoutListing,\n        \"contract does not support auction.buyoutListing\",\n      );\n      return await contract.auction.buyoutListing(data.id);\n    },\n    {\n      onSettled: () =>\n        invalidateContractAndBalances(\n          queryClient,\n          contractAddress,\n          activeChainId,\n        ),\n    },\n  );\n}\n","import { useActiveChainId } from \"../../Provider\";\nimport {\n  ClaimTokenParams,\n  RequiredParam,\n  TokenBurnParams,\n  TokenParams,\n  WalletAddress,\n} from \"../../types\";\nimport {\n  cacheKeys,\n  invalidateContractAndBalances,\n} from \"../../utils/cache-keys\";\nimport { useQueryWithNetwork } from \"../query-utils/useQueryWithNetwork\";\nimport { useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport type { Erc20, TokenDrop } from \"@thirdweb-dev/sdk/dist/browser\";\nimport invariant from \"tiny-invariant\";\n\n/** **********************/\n/**     READ  HOOKS     **/\n/** **********************/\n\n/**\n * Use this to get a the total supply of your {@link Erc20} contract.\n *\n * @example\n * ```javascript\n * const { data: totalSupply, isLoading, error } = useTokenSupply(<YourTokenContractInstance>);\n * ```\n *\n * @param contract - an instance of a Token contract.\n * @returns a response object that incudes the total minted supply\n * @beta\n */\nexport function useTokenSupply(contract: RequiredParam<Erc20>) {\n  const contractAddress = contract?.getAddress();\n  return useQueryWithNetwork(\n    cacheKeys.contract.token.totalSupply(contractAddress),\n    () => {\n      invariant(contract, \"No Contract instance provided\");\n      return contract.totalSupply();\n    },\n    {\n      enabled: !!contract || !!contractAddress,\n    },\n  );\n}\n\n/**\n * Use this to get the balance of your {@link Erc20} contract for a given address.\n *\n * @example\n * ```javascript\n * const { data: balance, isLoading, error } = useTokenBalance(<YourTokenContractInstance>);\n * ```\n *\n * @param contract - an instance of a Token contract.\n * @returns a response object that includes the balance of the address\n * @beta\n */\nexport function useTokenBalance(\n  contract: RequiredParam<Erc20>,\n  walletAddress: RequiredParam<WalletAddress>,\n) {\n  const contractAddress = contract?.getAddress();\n  return useQueryWithNetwork(\n    cacheKeys.contract.token.balanceOf(contractAddress, walletAddress),\n    async () => {\n      invariant(contract, \"No Contract instance provided\");\n      invariant(walletAddress, \"No address provided\");\n      return await contract.balanceOf(walletAddress);\n    },\n    {\n      enabled: !!walletAddress && !!contract,\n    },\n  );\n}\n\n/** **********************/\n/**     WRITE HOOKS     **/\n/** **********************/\n\n/**\n * Use this to mint new tokens on your {@link Erc20} contract\n *\n * @example\n * ```jsx\n * const Component = () => {\n *   const {\n *     mutate: mintTokens,\n *     isLoading,\n *     error,\n *   } = useMintToken(\">>YourERC20ContractInstance<<\");\n *\n *   if (error) {\n *     console.error(\"failed to mint tokens\", error);\n *   }\n *\n *   return (\n *     <button\n *       disabled={isLoading}\n *       onClick={() => mintTokens({ to: \"0x...\", amount: 1000 })}\n *     >\n *       Mint!\n *     </button>\n *   );\n * };\n * ```\n *\n * @param contract - an instance of a contract that extends the ERC20 spec (token, token drop, custom contract that follows the ERC20 spec)\n * @returns a mutation object that can be used to mint new tokens to the connected wallet\n * @beta\n */\nexport function useMintToken(contract: RequiredParam<Erc20>) {\n  const activeChainId = useActiveChainId();\n  const contractAddress = contract?.getAddress();\n  const queryClient = useQueryClient();\n\n  return useMutation(\n    (data: TokenParams) => {\n      const { to, amount } = data;\n      invariant(contract?.mint?.to, \"contract does not support mint.to\");\n      return contract.mint.to(to, amount);\n    },\n    {\n      onSettled: () =>\n        invalidateContractAndBalances(\n          queryClient,\n          contractAddress,\n          activeChainId,\n        ),\n    },\n  );\n}\n\n/**\n * Use this to claim tokens on your {@link TokenDrop}\n *\n * @example\n * ```jsx\n * const Component = () => {\n *   const {\n *     mutate: claimTokens,\n *     isLoading,\n *     error,\n *   } = useClaimToken(TokenDropContract);\n *\n *   if (error) {\n *     console.error(\"failed to claim tokens\", error);\n *   }\n *\n *   return (\n *     <button\n *       disabled={isLoading}\n *       onClick={() => claimTokens({ to: \"0x...\", amount: 100 })}\n *     >\n *       Claim Tokens!\n *     </button>\n *   );\n * };\n * ```\n *\n * @param contract - an instance of a {@link TokenDrop}\n * @returns a mutation object that can be used to tokens to the wallet specificed in the params\n * @beta\n */\nexport function useClaimToken<TContract extends TokenDrop>(\n  contract: RequiredParam<TContract>,\n) {\n  const activeChainId = useActiveChainId();\n  const contractAddress = contract?.getAddress();\n  const queryClient = useQueryClient();\n\n  return useMutation(\n    async (data: ClaimTokenParams) => {\n      invariant(data.to, 'No \"to\" address provided');\n      invariant(contract?.claimTo, \"contract does not support claimTo\");\n      return await contract.claimTo(\n        data.to,\n        data.amount,\n        data.checkERC20Allowance,\n      );\n    },\n    {\n      onSettled: () =>\n        invalidateContractAndBalances(\n          queryClient,\n          contractAddress,\n          activeChainId,\n        ),\n    },\n  );\n}\n\n/**\n * Use this to transfer tokens on your {@link Erc20} contract\n *\n * @example\n * ```jsx\n * const Component = () => {\n *   const {\n *     mutate: transferTokens,\n *     isLoading,\n *     error,\n *   } = useTransferToken(\">>YourERC20ContractInstance<<\");\n *\n *   if (error) {\n *     console.error(\"failed to transfer tokens\", error);\n *   }\n *\n *   return (\n *     <button\n *       disabled={isLoading}\n *       onClick={() => transferTokens({ to: \"0x...\", amount: 1000 })}\n *     >\n *       Transfer\n *     </button>\n *   );\n * };\n * ```\n *\n * @param contract - an instance of a contract that extends the ERC20 spec (token, token drop, custom contract that follows the ERC20 spec)\n * @returns a mutation object that can be used to transfer tokens\n * @beta\n */\nexport function useTransferToken(contract: RequiredParam<Erc20>) {\n  const activeChainId = useActiveChainId();\n  const contractAddress = contract?.getAddress();\n  const queryClient = useQueryClient();\n\n  return useMutation(\n    (data: TokenParams) => {\n      const { to, amount } = data;\n      invariant(contract?.transfer, \"contract does not support transfer\");\n      return contract.transfer(to, amount);\n    },\n    {\n      onSettled: () =>\n        invalidateContractAndBalances(\n          queryClient,\n          contractAddress,\n          activeChainId,\n        ),\n    },\n  );\n}\n\n/**\n * Use this to transfer batch tokens on your {@link Erc20} contract\n *\n * @example\n * ```jsx\n * const Component = () => {\n *   const {\n *     mutate: transferBatchTokens,\n *     isLoading,\n *     error,\n *   } = useTransferToken(\">>YourERC20ContractInstance<<\");\n *\n *   if (error) {\n *     console.error(\"failed to transfer batch tokens\", error);\n *   }\n *\n *   return (\n *     <button\n *       disabled={isLoading}\n *       onClick={() => transferBatchTokens([{ to: \"0x...\", amount: 1000 }, { to: \"0x...\", amount: 2000 }])}\n *     >\n *       Transfer Batch\n *     </button>\n *   );\n * };\n * ```\n *\n * @param contract - an instance of a contract that extends the ERC20 spec (token, token drop, custom contract that follows the ERC20 spec)\n * @returns a mutation object that can be used to transfer batch tokens\n * @beta\n */\nexport function useTransferBatchToken(contract: RequiredParam<Erc20>) {\n  const activeChainId = useActiveChainId();\n  const contractAddress = contract?.getAddress();\n  const queryClient = useQueryClient();\n\n  return useMutation(\n    (data: TokenParams[]) => {\n      invariant(\n        contract?.transferBatch,\n        \"contract does not support transferBatch\",\n      );\n      const convertedData = data.map((token) => ({\n        toAddress: token.to,\n        amount: token.amount,\n      }));\n\n      return contract.transferBatch(convertedData);\n    },\n    {\n      onSettled: () =>\n        invalidateContractAndBalances(\n          queryClient,\n          contractAddress,\n          activeChainId,\n        ),\n    },\n  );\n}\n\n/**\n * Use this to burn tokens on your {@link Erc20} contract\n *\n * @example\n * ```jsx\n * const Component = () => {\n *   const {\n *     mutate: burnTokens,\n *     isLoading,\n *     error,\n *   } = useBurnToken(\">>YourERC20ContractInstance<<\");\n *\n *   if (error) {\n *     console.error(\"failed to burn tokens\", error);\n *   }\n *\n *   return (\n *     <button\n *       disabled={isLoading}\n *       onClick={() => burnTokens({ amount: 1000 })}\n *     >\n *       Burn!\n *     </button>\n *   );\n * };\n * ```\n *\n * @param contract - an instance of a contract that extends the ERC20 spec (token, token drop, custom contract that follows the ERC20 spec)\n * @returns a mutation object that can be used to burn tokens from the connected wallet\n * @beta\n */\nexport function useBurnToken(contract: RequiredParam<Erc20>) {\n  const activeChainId = useActiveChainId();\n  const contractAddress = contract?.getAddress();\n  const queryClient = useQueryClient();\n\n  return useMutation(\n    (data: TokenBurnParams) => {\n      const { amount } = data;\n      invariant(contract?.burn, \"contract does not support burn\");\n      return contract.burn.tokens(amount);\n    },\n    {\n      onSettled: () =>\n        invalidateContractAndBalances(\n          queryClient,\n          contractAddress,\n          activeChainId,\n        ),\n    },\n  );\n}\n","import { RequiredParam, WalletAddress } from \"../../types\";\nimport { cacheKeys } from \"../../utils/cache-keys\";\nimport { useQueryWithNetwork } from \"../query-utils/useQueryWithNetwork\";\nimport {\n  EditionDrop,\n  Erc1155,\n  NFTDrop,\n  SignatureDrop,\n  TokenDrop,\n} from \"@thirdweb-dev/sdk/dist/browser\";\nimport { BigNumberish } from \"ethers\";\nimport invariant from \"tiny-invariant\";\n\ntype ActiveClaimConditionParams<TContract> = TContract extends Erc1155\n  ? [contract: RequiredParam<TContract>, tokenId: RequiredParam<BigNumberish>]\n  : [contract: RequiredParam<TContract>];\n\n/** **********************/\n/**     READ  HOOKS     **/\n/** **********************/\n\n/**\n * Use this to get the active claim conditon for ERC20, ERC721 or ERC1155 based contracts. They need to extend the `claimCondition` extension for this hook to work.\n *\n * @example\n * ```javascript\n * const { data: activeClaimCondition, isLoading, error } = useActiveClaimCondition(<YourERC20ContractInstance>);\n * ```\n * @example\n * ```javascript\n * const { data: activeClaimCondition, isLoading, error } = useActiveClaimCondition(<YourERC721ContractInstance>);\n * ```\n * @example\n * ```javascript\n * const { data: activeClaimCondition, isLoading, error } = useActiveClaimCondition(<YourERC1155ContractInstance>, <tokenId>);\n * ```\n *\n * @param contract - an instance of a contract that extends the ERC721 or ERC1155 spec and implements the `claimConditions` extension.\n * @param tokenId - the id of the token to fetch the claim conditions for (if the contract is an ERC1155 contract)\n * @returns a response object with the currently active claim condition\n *\n * @beta\n */\nexport function useActiveClaimCondition<\n  TContract extends NFTDrop | EditionDrop | TokenDrop | SignatureDrop,\n>(...[contract, tokenId]: ActiveClaimConditionParams<TContract>) {\n  const contractAddress = contract?.getAddress();\n\n  return useQueryWithNetwork(\n    cacheKeys.extensions.claimConditions.getActive(contractAddress, tokenId),\n    () => {\n      invariant(contract, \"No Contract instance provided\");\n      invariant(\n        contract.claimConditions.getActive,\n        \"Contract instance does not support claimConditions.getActive\",\n      );\n      if (contract instanceof Erc1155) {\n        invariant(tokenId, \"tokenId is required for ERC1155 claim conditions\");\n        return contract.claimConditions.getActive(tokenId);\n      }\n      return contract.claimConditions.getActive();\n    },\n    {\n      // Checks that happen here:\n      // 1. if the contract is based on  ERC1155 contract => tokenId cannot be `undefined`\n      // 2. if the contract is NOT based on ERC1155 => contract has to still be provided\n      enabled: contract instanceof Erc1155 ? tokenId !== undefined : !!contract,\n    },\n  );\n}\n\n/**\n * Use this to get all claim conditons for ERC20, ERC721 or ERC1155 based contracts. They need to extend the `claimCondition` extension for this hook to work.\n *\n * @example\n * ```javascript\n * const { data: claimConditions, isLoading, error } = useClaimConditions(<YourERC20ContractInstance>);\n * ```\n * @example\n * ```javascript\n * const { data: claimConditions, isLoading, error } = useClaimConditions(<YourERC721ContractInstance>);\n * ```\n * @example\n * ```javascript\n * const { data: claimConditions, isLoading, error } = useClaimConditions(<YourERC1155ContractInstance>, <tokenId>);\n * ```\n *\n * @param contract - an instance of a contract that extends the ERC721 or ERC1155 spec and implements the `claimConditions` extension.\n * @param tokenId - the id of the token to fetch the claim conditions for (if the contract is an ERC1155 contract)\n * @returns a response object with the list of claim conditions\n *\n * @beta\n */\nexport function useClaimConditions<\n  TContract extends NFTDrop | EditionDrop | TokenDrop | SignatureDrop,\n>(...[contract, tokenId]: ActiveClaimConditionParams<TContract>) {\n  const contractAddress = contract?.getAddress();\n\n  return useQueryWithNetwork(\n    cacheKeys.extensions.claimConditions.getAll(contractAddress, tokenId),\n    () => {\n      invariant(contract, \"No Contract instance provided\");\n      invariant(\n        contract.claimConditions.getAll,\n        \"Contract instance does not support claimConditions.getAll\",\n      );\n      if (contract instanceof Erc1155) {\n        invariant(tokenId, \"tokenId is required for ERC1155 claim conditions\");\n        return contract.claimConditions.getAll(tokenId);\n      }\n      return contract.claimConditions.getAll();\n    },\n    {\n      // Checks that happen here:\n      // 1. if the contract is based on  ERC1155 contract => tokenId cannot be `undefined`\n      // 2. if the contract is NOT based on ERC1155 => contract has to still be provided\n      enabled: contract instanceof Erc1155 ? tokenId !== undefined : !!contract,\n    },\n  );\n}\n\n/**\n * The options to be passed as the second parameter to the `useClaimIneligibilityReasons` hook.\n *\n * @beta\n */\nexport type ClaimIneligibilityParameters = {\n  // the wallet address to check claim eligibility for\n  walletAddress: WalletAddress;\n  // the amount of tokens to check claim eligibility for\n  quantity: string | number;\n};\n\ntype ClaimIneligibilityInputParams<TContract> = TContract extends Erc1155\n  ? [\n      contract: RequiredParam<TContract>,\n      eligibilityParams: ClaimIneligibilityParameters,\n      tokenId: RequiredParam<BigNumberish>,\n    ]\n  : [\n      contract: RequiredParam<TContract>,\n      eligibilityParams: ClaimIneligibilityParameters,\n    ];\n\n/**\n * Use this to check for reasons that prevent claiming for either  ERC20, ERC721 or ERC1155 based contracts. They need to extend the `claimCondition` extension for this hook to work.\n * @example\n * ```javascript\n * const { data: activeClaimCondition, isLoading, error } = useClaimIneligibilityReasons(<YourERC20ContractInstance>, { walletAddress: <walletAddress> });\n * ```\n * @example\n * ```javascript\n * const { data: claimIneligibilityReasons, isLoading, error } = useClaimIneligibilityReasons(<YourERC721ContractInstance>, { quantity: <quantity>, walletAddress: <walletAddress> });\n * ```\n * @example\n * ```javascript\n * const { data: claimIneligibilityReasons, isLoading, error } = useClaimIneligibilityReasons(<YourERC1155ContractInstance>, { quantity: <quantity>, walletAddress: <walletAddress> }, <tokenId>);\n * ```\n *\n * @param contract - an instance of a contract that extends the  ERC20, ERC721 or ERC1155 spec and implements the `claimConditions` extension.\n * @param eligibilityParams - the parameters for the eligibility check, see: {@link ClaimIneligibilityParameters}\n * @param tokenId - the id of the token to fetch the claim conditions for (if the contract is an ERC1155 contract)\n * @returns a response object with the resons for the claim ineligibility\n *\n * @beta\n */\nexport function useClaimIneligibilityReasons<\n  TContract extends NFTDrop | EditionDrop | TokenDrop | SignatureDrop,\n>(...[contract, params, tokenId]: ClaimIneligibilityInputParams<TContract>) {\n  const contractAddress = contract?.getAddress();\n\n  return useQueryWithNetwork(\n    cacheKeys.extensions.claimConditions.getClaimIneligibilityReasons(\n      contractAddress,\n      params,\n      tokenId,\n    ),\n    () => {\n      invariant(contract, \"No Contract instance provided\");\n      invariant(\n        contract.claimConditions.getClaimIneligibilityReasons,\n        \"Contract instance does not support claimConditions.getClaimIneligibilityReasons\",\n      );\n      if (contract instanceof Erc1155) {\n        invariant(\n          tokenId,\n          \"tokenId is required for ERC1155 claim ineligibility reasons\",\n        );\n        return contract.claimConditions.getClaimIneligibilityReasons(\n          tokenId,\n          params.quantity,\n          params.walletAddress,\n        );\n      }\n      return contract.claimConditions.getClaimIneligibilityReasons(\n        params.quantity,\n        params.walletAddress,\n      );\n    },\n    {\n      // Checks that happen here:\n      // 1. if the contract is based on  ERC1155 contract => tokenId cannot be `undefined`\n      // 2. if the contract is NOT based on ERC1155 => contract has to still be provided\n      // 3. has a params object been passed?\n      // 4. does params have an address in it?\n      enabled:\n        (contract instanceof Erc1155 ? tokenId !== undefined : !!contract) &&\n        !!params &&\n        !!params.walletAddress,\n    },\n  );\n}\n","import { SupportedChainId } from \"../../constants/chain\";\nimport { useThirdwebConfigContext } from \"../../contexts/thirdweb-config\";\nimport { ContractAddress } from \"../../types\";\nimport { cacheKeys } from \"../../utils/cache-keys\";\nimport { useAddress } from \"../useAddress\";\nimport { useChainId } from \"../useChainId\";\nimport { useSigner } from \"../useSigner\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { UserWallet } from \"@thirdweb-dev/sdk/dist/browser\";\nimport { useMemo } from \"react\";\n\n/**\n * A hook to get the native or (optional) ERC20 token balance of the connected wallet.\n *\n * @param tokenAddress - the address of the token contract, if empty will use the chain's native token\n * @returns the balance of the connected wallet (native or ERC20)\n * @beta\n */\nexport function useBalance(tokenAddress?: ContractAddress) {\n  const { rpcUrlMap } = useThirdwebConfigContext();\n  const chainId = useChainId() as SupportedChainId;\n  const signer = useSigner();\n  const walletAddress = useAddress();\n\n  const walletSDK = useMemo(() => {\n    if (signer) {\n      return new UserWallet(signer, {\n        readonlySettings: {\n          rpcUrl: rpcUrlMap[chainId],\n          chainId,\n        },\n      });\n    }\n    return undefined;\n  }, [signer, chainId]);\n\n  const cacheKey = useMemo(() => {\n    return cacheKeys.wallet.balance(chainId, walletAddress, tokenAddress);\n  }, [chainId, tokenAddress, walletAddress]);\n\n  return useQuery(\n    cacheKey,\n    () => {\n      return walletSDK?.balance(tokenAddress);\n    },\n    {\n      // if user is not logged in no reason to try to fetch\n      enabled: !!walletSDK && !!walletAddress,\n      retry: true,\n      keepPreviousData: false,\n    },\n  );\n}\n","import { useActiveChainId } from \"../../Provider\";\nimport { RequiredParam, WalletAddress } from \"../../types\";\nimport {\n  cacheKeys,\n  invalidateContractAndBalances,\n} from \"../../utils/cache-keys\";\nimport { useQueryWithNetwork } from \"../query-utils/useQueryWithNetwork\";\nimport { useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport type {\n  SmartContract,\n  ValidContractInstance,\n} from \"@thirdweb-dev/sdk/dist/browser\";\nimport type { CustomContractMetadata } from \"@thirdweb-dev/sdk/dist/src/schema/contracts/custom\";\nimport invariant from \"tiny-invariant\";\n\n// primary sales\n\n/**\n *\n * @example\n * ```jsx\n * const { data: recipient, isLoading, error } = usePrimarySalesRecipient(SmartContract);\n * ```\n *\n * Use this to get the primary sales recipient of your {@link SmartContract}\n * @param contract - an instance of a {@link SmartContract}\n * @returns the wallet address of the primary sales recipient\n * @beta\n */\nexport function usePrimarySaleRecipient(\n  contract: RequiredParam<SmartContract | ValidContractInstance>,\n) {\n  const contractAddress = contract?.getAddress();\n  return useQueryWithNetwork(\n    cacheKeys.extensions.sales.getRecipient(contractAddress),\n    () => {\n      invariant(contract, \"No contract provided\");\n      invariant(\n        \"sales\" in contract && contract.sales,\n        \"Contract does not support primarySale\",\n      );\n      return contract.sales.getRecipient();\n    },\n    { enabled: !!contract || !!contractAddress },\n  );\n}\n\n/**\n * Use this to update the primary sales recipient of your {@link SmartContract}\n *\n * @example\n * ```jsx\n * const Component = () => {\n *   const {\n *     mutate: updatePrimarySalesRecipient,\n *     isLoading,\n *     error,\n *   } = useUpdatePrimarySaleRecipient(SmartContract);\n *\n *   if (error) {\n *     console.error(\"failed to update recipient\", error);\n *   }\n *\n *   return (\n *     <button\n *       disabled={isLoading}\n *       onClick={() => updatePrimarySalesRecipient({ newRecipient: \"0x123\" })}\n *     >\n *       Update Recipient\n *     </button>\n *   );\n * };\n * ```\n *\n * @param contract - an instance of a {@link SmartContract}\n * @returns a mutation object that can be used to update the primary sales recipient\n * @beta\n */\nexport function useUpdatePrimarySaleRecipient(\n  contract: RequiredParam<SmartContract | ValidContractInstance>,\n) {\n  const queryClient = useQueryClient();\n  const contractAddress = contract?.getAddress();\n  const activeChainId = useActiveChainId();\n  return useMutation(\n    (newRecipient: WalletAddress) => {\n      invariant(contract, \"No contract provided\");\n      invariant(\n        \"sales\" in contract && contract.sales,\n        \"Contract does not support primarySale\",\n      );\n      return contract.sales.setRecipient(newRecipient);\n    },\n    {\n      onSettled: () =>\n        invalidateContractAndBalances(\n          queryClient,\n          contractAddress,\n          activeChainId,\n        ),\n    },\n  );\n}\n\n// end prinary sales\n\n// royalties\n\n/**\n * Use this to get the royalty settings of your {@link SmartContract}\n *\n * @example\n * ```jsx\n * const { data: settings, isLoading, error } = useRoyaltySettings(SmartContract);\n * ```\n *\n * @param contract - an instance of a {@link SmartContract}\n * @returns an object containing recipient address and the royalty basis points\n * @beta\n */\nexport function useRoyaltySettings(\n  contract: RequiredParam<SmartContract | ValidContractInstance>,\n) {\n  const contractAddress = contract?.getAddress();\n  return useQueryWithNetwork(\n    cacheKeys.extensions.royalties.getDefaultRoyaltyInfo(contractAddress),\n    () => {\n      invariant(contract, \"No contract provided\");\n      invariant(\n        \"royalties\" in contract && contract.royalties,\n        \"Contract does not support royalties\",\n      );\n      return contract.royalties.getDefaultRoyaltyInfo();\n    },\n    { enabled: !!contract || !!contractAddress },\n  );\n}\n\n/**\n * Use this to update the royalty settings of your {@link SmartContract}\n *\n * @example\n * ```jsx\n * const Component = () => {\n *   const {\n *     mutate: updateRoyaltySettings,\n *     isLoading,\n *     error,\n *   } = useUpdateRoyaltySettings(SmartContract);\n *\n *   if (error) {\n *     console.error(\"failed to update royalty settings\", error);\n *   }\n *\n *   return (\n *     <button\n *       disabled={isLoading}\n *       onClick={() => updateRoyaltySettings({ updatePayload: { fee_recipient: \"0x123\", seller_fee_basis_points: 5_00 } })}\n *     >\n *       Update Royalty Settings\n *     </button>\n *   );\n * };\n * ```\n *\n * @param contract - an instance of a {@link SmartContract}\n * @returns a mutation object that can be used to update the royalty settings\n * @beta\n */\nexport function useUpdateRoyaltySettings(\n  contract: RequiredParam<SmartContract | ValidContractInstance>,\n) {\n  const queryClient = useQueryClient();\n  const contractAddress = contract?.getAddress();\n  const activeChainId = useActiveChainId();\n  return useMutation(\n    (updatePayload: {\n      seller_fee_basis_points?: number;\n      fee_recipient?: WalletAddress;\n    }) => {\n      invariant(contract, \"No contract provided\");\n      invariant(\n        \"royalties\" in contract && contract.royalties,\n        \"Contract does not support royalties\",\n      );\n      return contract.royalties.setDefaultRoyaltyInfo(updatePayload);\n    },\n    {\n      onSettled: () =>\n        invalidateContractAndBalances(\n          queryClient,\n          contractAddress,\n          activeChainId,\n        ),\n    },\n  );\n}\n\n// end royalties\n\n// platformFees\n\n/**\n * Use this to get the platform fees settings of your {@link SmartContract}\n *\n * @example\n * ```jsx\n * const { data: platformFees, isLoading, error } = usePlatformFees(SmartContract);\n * ```\n *\n * @param contract - an instance of a {@link SmartContract}\n * @returns an object containing the platform fee basis points and the fee recipient address\n * @beta\n */\nexport function usePlatformFees(\n  contract: RequiredParam<SmartContract | ValidContractInstance>,\n) {\n  const contractAddress = contract?.getAddress();\n  return useQueryWithNetwork(\n    cacheKeys.extensions.platformFees.get(contractAddress),\n    () => {\n      invariant(contract, \"No contract provided\");\n      invariant(\n        \"platformFees\" in contract && contract.platformFees,\n        \"Contract does not support platformFees\",\n      );\n      return contract.platformFees.get();\n    },\n    { enabled: !!contract || !!contractAddress },\n  );\n}\n\n/**\n * Use this to update the platform fees settings of your {@link SmartContract}\n *\n * @example\n * ```jsx\n * const Component = () => {\n *   const {\n *     mutate: updatePlatformFees,\n *     isLoading,\n *     error,\n *   } = useUpdatePlatformFees(SmartContract);\n *\n *   if (error) {\n *     console.error(\"failed to update platform fees\", error);\n *   }\n *\n *   return (\n *     <button\n *       disabled={isLoading}\n *       onClick={() => updatePlatformFees({ updatePayload: { fee_recipient: \"0x123\", platform_fee_basis_points: 5_00 } })}\n *     >\n *       Update Platform fees\n *     </button>\n *   );\n * };\n * ```\n * @param contract - an instance of a {@link SmartContract}\n * @returns a mutation object that can be used to update the platform fees settings\n * @beta\n */\nexport function useUpdatePlatformFees(\n  contract: RequiredParam<SmartContract | ValidContractInstance>,\n) {\n  const queryClient = useQueryClient();\n  const contractAddress = contract?.getAddress();\n  const activeChainId = useActiveChainId();\n  return useMutation(\n    (updatePayload: {\n      platform_fee_basis_points?: number;\n      fee_recipient?: WalletAddress;\n    }) => {\n      invariant(contract, \"No contract provided\");\n      invariant(\n        \"platformFees\" in contract && contract.platformFees,\n        \"Contract does not support platformFees\",\n      );\n      return contract.platformFees.set(updatePayload);\n    },\n    {\n      onSettled: () =>\n        invalidateContractAndBalances(\n          queryClient,\n          contractAddress,\n          activeChainId,\n        ),\n    },\n  );\n}\n\n// end platformFees\n\n// metadata\n\n/**\n * Use this to get the metadata of your {@link SmartContract}\n *\n * @example\n * ```jsx\n * const { data: metadata, isLoading, error } = useMetadata(SmartContract);\n * ```\n *\n * @param contract - an instance of a {@link SmartContract}\n * @returns a {@link CustomContractMetadata} object containing the metadata\n * @beta\n */\nexport function useMetadata(\n  contract: RequiredParam<SmartContract | ValidContractInstance>,\n) {\n  const contractAddress = contract?.getAddress();\n  return useQueryWithNetwork(\n    cacheKeys.extensions.metadata.get(contractAddress),\n    () => {\n      invariant(contract, \"No contract provided\");\n      invariant(\n        \"metadata\" in contract && contract.metadata,\n        \"Contract does not support metadata\",\n      );\n      return contract.metadata.get() as Promise<CustomContractMetadata>;\n    },\n    { enabled: !!contract || !!contractAddress },\n  );\n}\n\n/**\n * Use this to update the metadata of your {@link SmartContract}\n * @example\n * ```jsx\n * const Component = () => {\n *   const {\n *     mutate: updateMetadata,\n *     isLoading,\n *     error,\n *   } = useUpdateMetadata(SmartContract);\n *\n *   if (error) {\n *     console.error(\"failed to update metadata\", error);\n *   }\n *\n *   return (\n *     <button\n *       disabled={isLoading}\n *       onClick={() => updateMetadata({ updatePayload: { name: \"My Contract\", description: \"This is my contract\" } })}\n *     >\n *       Update Metadata\n *     </button>\n *   );\n * };\n * ```\n * @param contract - an instance of a {@link SmartContract}\n * @returns a mutation object that can be used to update the metadata\n * @beta\n */\nexport function useUpdateMetadata(\n  contract: RequiredParam<SmartContract | ValidContractInstance>,\n) {\n  const queryClient = useQueryClient();\n  const contractAddress = contract?.getAddress();\n  const activeChainId = useActiveChainId();\n  return useMutation(\n    (updatePayload: CustomContractMetadata) => {\n      invariant(contract, \"No contract provided\");\n      invariant(\n        \"metadata\" in contract && contract.metadata,\n        \"Contract does not support metadata\",\n      );\n      return contract.metadata.update(updatePayload);\n    },\n    {\n      onSettled: () =>\n        invalidateContractAndBalances(\n          queryClient,\n          contractAddress,\n          activeChainId,\n        ),\n    },\n  );\n}\n\n// end metadata\n","import { useActiveChainId } from \"../../Provider\";\nimport { RequiredParam, WalletAddress } from \"../../types\";\nimport {\n  cacheKeys,\n  invalidateContractAndBalances,\n} from \"../../utils/cache-keys\";\nimport { useQueryWithNetwork } from \"../query-utils/useQueryWithNetwork\";\nimport { useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport type {\n  Multiwrap,\n  Role,\n  SmartContract,\n  Split,\n  ValidContractInstance,\n  Vote,\n} from \"@thirdweb-dev/sdk/dist/browser\";\nimport { constants } from \"ethers\";\nimport invariant from \"tiny-invariant\";\n\n/** **********************/\n/**         UTILS       **/\n/** **********************/\n\n/**\n * @internal\n */\nexport type ContractWithRoles =\n  | Exclude<ValidContractInstance, Vote | Split | Multiwrap>\n  | SmartContract;\n\n/**\n * @internal\n */\nexport type RolesForContract<TContract extends ContractWithRoles> =\n  TContract extends SmartContract\n    ? Role | (string & {})\n    : NonNullable<TContract[\"roles\"]>[\"roles\"][number];\n\n/**\n * @internal\n */\ntype GetAllReturnType<TContract extends ContractWithRoles> = Promise<\n  Record<RolesForContract<TContract>, string[]>\n>;\n\n/** **********************/\n/**     READ  HOOKS     **/\n/** **********************/\n\n/**\n * Use this to get the roles of a {@link SmartContract}\n *\n * @example\n * ```jsx\n * const { data: roles, isLoading, error } = useAllRoleMembers(SmartContract);\n * ```\n *\n * @param contract - an instance of a {@link SmartContract}\n * @returns a list of addresses for all supported roles on the contract.\n * @beta\n */\nexport function useAllRoleMembers<TContract extends ContractWithRoles>(\n  contract: RequiredParam<TContract>,\n) {\n  const contractAddress = contract?.getAddress();\n  return useQueryWithNetwork<Awaited<GetAllReturnType<TContract>>>(\n    cacheKeys.extensions.roles.getAll(contractAddress),\n    () => {\n      invariant(contract, \"No contract provided\");\n      invariant(contract.roles, \"Contract does not support roles\");\n      // have to cast to any because of role bs, type is defined in the useQueryWithNetwork definition above\n      return contract.roles.getAll() as any;\n    },\n    {\n      enabled: !!contract && !!contractAddress,\n    },\n  );\n}\n\n/**\n * Use this to get the members of a role on a {@link SmartContract}\n *\n * @example\n * ```jsx\n * const { data: members, isLoading, error } = useRoleMembers(SmartContract, \"admin\");\n * ```\n *\n * @param contract - an instance of a {@link SmartContract}\n * @param role - the role to get the members of, see {@link Role}\n * @returns a list of addresses that are members of the role\n * @beta\n */\nexport function useRoleMembers<TContract extends ContractWithRoles>(\n  contract: RequiredParam<TContract>,\n  role: RolesForContract<TContract>,\n) {\n  const contractAddress = contract?.getAddress();\n  return useQueryWithNetwork(\n    cacheKeys.extensions.roles.get(contractAddress, role),\n    () => {\n      invariant(contract, \"No contract provided\");\n      invariant(contract.roles, \"Contract does not support roles\");\n      return contract.roles.get(role);\n    },\n    {\n      enabled: !!contract && !!contractAddress && !!role,\n    },\n  );\n}\n\n/**\n * Use this to check if a {@link WalletAddress} is a member of a role on a {@link SmartContract}\n *\n * @example\n * ```jsx\n * const { data: isMember, isLoading, error } = useIsAddressRole(SmartContract, \"admin\", \"0x123\");\n * ```\n *\n * @param contract - an instance of a {@link SmartContract}\n * @param role - the role to check the member against, see {@link Role}\n * @param walletAddress - the address to check\n * @returns true if the address is a member of the role, or false if not\n * @beta\n */\nexport function useIsAddressRole<TContract extends ContractWithRoles>(\n  contract: RequiredParam<TContract>,\n  role: RolesForContract<TContract>,\n  walletAddress: RequiredParam<WalletAddress>,\n): boolean {\n  // TODO this might be possible to do with `verify` fn instead?\n  const contractHasRoles = !!(contract && contract.roles);\n  const { data } = useRoleMembers(\n    contractHasRoles ? contract : undefined,\n    role,\n  );\n\n  // if the contract does not have roles then everything is allowed === true\n  if (contractHasRoles === false) {\n    return true;\n  }\n\n  // switch logic (if address 0 is in the role list then anyone has permissions to it)\n  if (data?.includes(constants.AddressZero)) {\n    return true;\n  }\n\n  // actual role check logic\n  return !!(walletAddress && data?.includes(walletAddress));\n}\n\n/** **********************/\n/**     WRITE HOOKS     **/\n/** **********************/\n\n/**\n * Use this to OVERWRITE the list of addresses that are members of specific roles\n *\n * @example\n * ```jsx\n * const Component = () => {\n *   const {\n *     mutate: overwriteRoles,\n *     isLoading,\n *     error,\n *   } = useSetAllRoleMembers(SmartContract);\n *\n *   if (error) {\n *     console.error(\"failed to overwrite roles\", error);\n *   }\n *\n *   return (\n *     <button\n *       disabled={isLoading}\n *       onClick={() => overwriteRoles({  rolesWithAddresses: { minter: [] } })}\n *     >\n *       Overwrite Roles\n *     </button>\n *   );\n * };\n * ```\n *\n * @param contract - an instance of a {@link SmartContract}\n * @returns a mutation object that can be used to overwrite all roles on the contract\n * @beta\n */\nexport function useSetAllRoleMembers<TContract extends ContractWithRoles>(\n  contract: RequiredParam<TContract>,\n) {\n  const activeChainId = useActiveChainId();\n  const contractAddress = contract?.getAddress();\n  const queryClient = useQueryClient();\n\n  return useMutation(\n    async (rolesWithAddresses: {\n      [role in RolesForContract<TContract>]: string[];\n    }) => {\n      invariant(contract, \"No contract provided\");\n      invariant(contract.roles, \"Contract does not support roles\");\n      await contract.roles.setAll(rolesWithAddresses);\n    },\n    {\n      onSettled: () =>\n        invalidateContractAndBalances(\n          queryClient,\n          contractAddress,\n          activeChainId,\n        ),\n    },\n  );\n}\n\n// const { mutate } = useSetAllRoleMembers(undefined as unknown as NFTCollection);\n\n/**\n * Use this to grant a {@link WalletAddress} a specific role on a {@link SmartContract}\n *\n * @example\n * ```jsx\n * const Component = () => {\n *   const {\n *     mutate: grantRole,\n *     isLoading,\n *     error,\n *   } = useGrantRole(SmartContract);\n *\n *   if (error) {\n *     console.error(\"failed to grant role\", error);\n *   }\n *\n *   return (\n *     <button\n *       disabled={isLoading}\n *       onClick={() => grantRole({  role: \"admin\", address: \"0x123\" })}\n *     >\n *       Grant Role\n *     </button>\n *   );\n * };\n * ```\n *\n * @param contract - an instance of a {@link SmartContract}\n * @returns a mutation object that can be used to grant a member of a role on the contract\n * @beta\n */\nexport function useGrantRole<TContract extends ContractWithRoles>(\n  contract: RequiredParam<TContract>,\n) {\n  const activeChainId = useActiveChainId();\n  const contractAddress = contract?.getAddress();\n  const queryClient = useQueryClient();\n\n  return useMutation(\n    async (params: {\n      role: RolesForContract<TContract>;\n      address: WalletAddress;\n    }) => {\n      invariant(contract, \"No contract provided\");\n      invariant(contract.roles, \"Contract does not support roles\");\n      await contract.roles.grant(params.role as any, params.address);\n    },\n    {\n      onSettled: () =>\n        invalidateContractAndBalances(\n          queryClient,\n          contractAddress,\n          activeChainId,\n        ),\n    },\n  );\n}\n\n/**\n * Use this to revoke a {@link WalletAddress} a specific role on a {@link SmartContract}\n *\n * @example\n * ```jsx\n * const Component = () => {\n *   const {\n *     mutate: revokeRole,\n *     isLoading,\n *     error,\n *   } = useRevokeRole(SmartContract);\n *\n *   if (error) {\n *     console.error(\"failed to revoke role\", error);\n *   }\n *\n *   return (\n *     <button\n *       disabled={isLoading}\n *       onClick={() => revokeRole({  role: \"admin\", address: \"0x123\" })}\n *     >\n *       Revoke Role\n *     </button>\n *   );\n * };\n * ```\n *\n * @param contract - an instance of a {@link SmartContract}\n * @returns a mutation object that can be used to revoke a role from a member on the contract\n * @beta\n */\nexport function useRevokeRole<TContract extends ContractWithRoles>(\n  contract: RequiredParam<TContract>,\n) {\n  const activeChainId = useActiveChainId();\n  const contractAddress = contract?.getAddress();\n  const queryClient = useQueryClient();\n  return useMutation(\n    async (params: {\n      role: RolesForContract<TContract>;\n      address: WalletAddress;\n    }) => {\n      invariant(contract, \"No contract provided\");\n      invariant(contract.roles, \"Contract does not support roles\");\n      await contract.roles.revoke(params.role as any, params.address);\n    },\n    {\n      onSettled: () =>\n        invalidateContractAndBalances(\n          queryClient,\n          contractAddress,\n          activeChainId,\n        ),\n    },\n  );\n}\n"]}